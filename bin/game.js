"use strict";const getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},globalObject=getGlobalThis();var loader;!function(T){let A=0;const E=[],O=[],k={baseUrl:""},B={};function c(T,E,O){let k=null,_t={},Ft=null;"function"==typeof T?_t=T:"string"==typeof T?(k=T,"function"==typeof E?_t=E:E instanceof Array&&(Ft=E,_t=O)):T instanceof Array&&(Ft=T,"function"==typeof E&&(_t=E)),Ft=Ft||["require","exports","module"],null===k&&(k="unnamed-module-"+A++),k=g(k),Ft=(Ft||[]).map((T=>function(T,A){return T?b(A,T):A}(k,T))),B[k]||(B[k]={name:k,parent:null,dclamd:1,dependencies:Ft,handlers:[],exports:{},dependants:new Set}),B[k].dependencies=Ft,p(Ft,(function(T){const A=B[k];if(!A)throw new Error("Could not access registered module "+k);let E=A.exports;E="function"==typeof _t?_t.apply(globalObject,T)||E:_t,A.exports=E,d(k)}),(T=>{if("function"!=typeof onerror)throw T;onerror(T)}),k)}function d(T){const A=B[T];if(!A)throw new Error("Could not access registered module "+T);A.dclamd=2;const E=A.handlers;if(E&&E.length)for(let A=0;A<E.length;A++)E[A](B[T])}function u(T,A,E){if(!B[T])return null;if(T===A||50===E)return[T];const O=B[T].dependencies;for(let k=0,B=O.length;k<B;k++){const B=u(O[k],A,E+1);if(null!==B)return B.push(T),B}return null}function a(T,A){const E=B[T];if(!E)return!1;const O={};for(const T in B)O[T]=!1;const k=[];for(k.push(E),O[T]=!0;k.length>0;){const T=k.shift().dependencies;if(T)for(let E=0,_t=T.length;E<_t;E++){const _t=T[E];if(_t===A)return!0;const Ft=B[_t];Ft&&!O[_t]&&(O[_t]=!0,k.push(Ft))}}return!1}function p(T,A,E,k){const _t=new Array(T.length).fill(null);let Ft=0,Pt=!1;if("string"==typeof T){if(B[T]){if(1===B[T].dclamd)throw new Error(`Trying to load ${T} from ${k}. The first module is still loading.`);return B[T]}throw new Error(T+" has not been defined. Please include it as a dependency in "+k+"'s define()")}const Lt=T.length;for(let Ut=0;Ut<Lt;Ut++)switch(T[Ut]){case"require":const h=function(T,A,E){return p(T,A,E,k)};h.toUrl=function(T){return b(T,k)},_t[Ut]=h,Ft++;break;case"exports":if(!B[k])throw new Error("Parent module "+k+" not registered yet");_t[Ut]=B[k].exports,Ft++;break;case"module":_t[Ut]={id:k,uri:b(k)},Ft++;break;default:{const Yt=T[Ut],m=()=>{_t[Ut]=B[Yt].exports,Ft++,Ft===Lt&&A&&(Pt=!0,A(_t))};if(a(Yt,k)){const T=u(Yt,k,0);T&&(T.reverse(),T.push(Yt),O.push(T)),w(Yt,(()=>{}),E,k),m()}else w(Yt,m,E,k);break}}!Pt&&Ft===Lt&&A&&A(_t)}function h(T,A){return function(){return dcl.callRpc(T,A.name,E.slice.call(arguments,0))}}function w(T,A,E,O){if(B[T])return B[T].dependants.add(O),void(1===B[T].dclamd?A&&B[T].handlers.push(A):A&&A(B[T]));if(B[T]={name:T,parent:O,dclamd:1,handlers:[A],dependencies:[],dependants:new Set([O]),exports:{}},0===T.indexOf("@")){const A=B[T].exports;if("function"!=typeof dcl.loadModule)throw new Error("Asynchronous modules will not work because loadModule function is not present");dcl.loadModule(T,A).then((E=>{for(const T in E.methods){const O=E.methods[T];A[O.name]=h(E.rpcHandle,O)}d(T)})).catch((T=>{E(T)}))}}function g(T){let A,E=T;for(A=/\/\.\//;A.test(E);)E=E.replace(A,"/");for(E=E.replace(/^\.\//g,""),A=/\/(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//;A.test(E);)E=E.replace(A,"/");return E=E.replace(/^(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//,""),E=E.replace(/^\//g,""),E}function b(T,A){switch(T){case"require":case"exports":case"module":return T}return A?function(T,A){let E=T;if(!E.startsWith("@")&&(E.startsWith("./")||E.startsWith("../"))){const T=A.split("/");T.pop(),E=g(T.join("/")+"/"+E)}return E}(T,A):g(T)}T.config=function(T){if("object"==typeof T)for(const A in T)T.hasOwnProperty(A)&&(k[A]=T[A])},T.define=c,function(T){T.amd={},T.modules=B}(c=T.define||(T.define={})),T.require=p,"undefined"!=typeof dcl&&dcl.onStart((()=>{const T=new Set,A=[];for(const E in B)B[E]&&(1===B[E].dclamd&&A.push(B[E]),B[E].dependencies.forEach((A=>{"require"!==A&&"exports"!==A&&"module"!==A&&(B[A]||T.add(A))})));const E=[];if(O.length&&E.push(`\n> Cyclic dependencies: ${O.map((T=>"\n  - "+T.join(" -> "))).join("")}`),T.size&&E.push(`\n> Undeclared/unknown modules: ${Array.from(T).map((T=>"\n  - "+T)).join("")}`),A.length&&E.push(`\n> These modules didn't load: ${A.map((T=>"\n  - "+T.name)).join("")}.\n`),E.length)throw new Error(E.join("\n"))})),p.toUrl=b}(loader||(loader={})),globalObject.define=loader.define,globalObject.dclamd=loader,function(T){var A=function(){function t(){}return t.AVATAR={getEntityRepresentation:function(T){return T.avatarEntity}},t.FIRST_PERSON_CAMERA={getEntityRepresentation:function(T){return T.firstPersonCameraEntity}},t}(),n=function(T,A){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,A){T.__proto__=A}||function(T,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(T[E]=A[E])})(T,A)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function i(T,A){if("function"!=typeof A&&null!==A)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function i(){this.constructor=T}n(T,A),T.prototype=null===A?Object.create(A):(i.prototype=A.prototype,new i)}var o=function(){return(o=Object.assign||function(T){for(var A,E=1,O=arguments.length;E<O;E++)for(var k in A=arguments[E])Object.prototype.hasOwnProperty.call(A,k)&&(T[k]=A[k]);return T}).apply(this,arguments)};function r(T,A,E,O){var k,B=arguments.length,_t=B<3?A:null===O?O=Object.getOwnPropertyDescriptor(A,E):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_t=Reflect.decorate(T,A,E,O);else for(var Ft=T.length-1;Ft>=0;Ft--)(k=T[Ft])&&(_t=(B<3?k(_t):B>3?k(A,E,_t):k(A,E))||_t);return B>3&&_t&&Object.defineProperty(A,E,_t),_t}function s(T,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(T,A)}function h(T){var A="function"==typeof Symbol&&Symbol.iterator,E=A&&T[A],O=0;if(E)return E.call(T);if(T&&"number"==typeof T.length)return{next:function(){return T&&O>=T.length&&(T=void 0),{value:T&&T[O++],done:!T}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(T,A){var E="function"==typeof Symbol&&T[Symbol.iterator];if(!E)return T;var O,k,B=E.call(T),_t=[];try{for(;(void 0===A||A-- >0)&&!(O=B.next()).done;)_t.push(O.value)}catch(T){k={error:T}}finally{try{O&&!O.done&&(E=B.return)&&E.call(B)}finally{if(k)throw k.error}}return _t}function p(T,A){for(var E=0,O=A.length,k=T.length;E<O;E++,k++)T[k]=A[E];return T}var E=0;function c(){for(var T=[],A=0;A<arguments.length;A++)T[A]=arguments[A];"undefined"!=typeof dcl?dcl.log.apply(dcl,p([],l(T))):console.log.apply(console,p(["DEBUG:"],l(T)))}function y(T,A){"undefined"!=typeof dcl?dcl.error(T,A):console.error("ERROR:",T,A)}function f(T){if(E++,0===T.length)throw new Error("newId(type: string): type cannot be empty");return T+E.toString(36)}function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(T){var A=16*Math.random()|0;return("x"===T?A:3&A|8).toString(16)}))}var O=[];function _(T){if(!("__event_name__"in T)||"string"!=typeof T.__event_name__)throw new Error("The EventConstructor is not registered");return T.__event_name__}var k=function(){function t(){this.listeners={}}return t.prototype.addListener=function(T,A,E){if(!T||"function"!=typeof T)throw new Error("Invalid EventConstructor");var O=_(T),k=this.listeners[O];k||(k=this.listeners[O]=[]);for(var B=0;B<k.length;B++)if(k[B].listener===A)throw new Error("The provided listener is already registered");return k.push({listener:A,fn:E}),this},t.prototype.removeListener=function(T,A){if(!A||"function"!=typeof A)throw new Error("Invalid EventConstructor");var E=_(A),O=this.listeners[E];if(!O)return!1;for(var k=0;k<O.length;k++)if(O[k].listener===T)return O.splice(k,1),!0;return!1},t.prototype.fireEvent=function(T){var A=_(T.constructor),E=this.listeners[A];if(E)for(var O=0;O<E.length;O++)try{var k=E[O];k.fn.call(k.listener,T)}catch(T){y(T)}return this},t}();function x(){var T=f("EV");if(-1!==O.indexOf(T))throw new Error("The event name "+T+" is already taken");return O.push(T),function(A){return A.__event_name__=T,A}}var B,_t=r([x(),s("design:paramtypes",[Object,String,Object])],(function(T,A,E){this.entity=T,this.componentName=A,this.component=E})),Ft=r([x(),s("design:paramtypes",[Object,String,Object])],(function(T,A,E){this.entity=T,this.componentName=A,this.classId=E})),Pt=r([x(),s("design:paramtypes",[Object,Object])],(function(T,A){this.entity=T,this.parent=A}));T.UIValueType=void 0,(B=T.UIValueType||(T.UIValueType={}))[B.PERCENT=0]="PERCENT",B[B.PIXELS=1]="PIXELS";var Lt=function(){function e(A){if(this.type=T.UIValueType.PIXELS,"string"==typeof A){var E=A;E.indexOf("px")>-1?this.type=T.UIValueType.PIXELS:E.indexOf("%")>-1&&(this.type=T.UIValueType.PERCENT),this.value=parseFloat(E)}else this.value=A}return e.prototype.toString=function(){var A=this.value.toString();return this.type===T.UIValueType.PERCENT?A+="%":A+="px",A},e}(),Ut="__name__symbol_",Yt="__classId__symbol_",Zt="__component__id_",Kt=r([x(),s("design:paramtypes",[String,String,Number])],(function(T,A,E){this.componentId=T,this.componentName=A,this.classId=E})),ee=r([x(),s("design:paramtypes",[String])],(function(T){this.componentId=T})),ne=r([x(),s("design:paramtypes",[String,Object])],(function(T,A){this.componentId=T,this.component=A}));function P(T,A){return function(E){if(E.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+E.originalClassName+" with: "+T);var O=E,o=function(){var E=Array.prototype.slice.call(arguments),k=new(O.bind.apply(O,p([void 0],l(E))));return Object.defineProperty(k,Ut,{enumerable:!1,writable:!1,configurable:!1,value:T}),void 0!==A&&Object.defineProperty(k,Yt,{enumerable:!1,writable:!1,configurable:!1,value:A}),k};return void 0!==A&&(o.__classId__symbol_=A),o.__name__symbol_=T,o.isComponent=!0,o.originalClassName=T,(o.prototype=E.prototype).constructor=E,o}}function N(T,A){return function(E){if(E.isComponent)throw new TypeError("You cannot extend a component. Trying to extend "+E.originalClassName+" with: "+T);if("number"!=typeof A||isNaN(A))throw new Error("classId: "+A+" is an invalid integer");var O=E,o=function(){if(!N.engine)throw new Error("You need to set a DisposableComponent.engine before creating disposable components");var E=Array.prototype.slice.call(arguments),k=new(O.bind.apply(O,p([void 0],l(E)))),B=f("C");return Object.defineProperty(k,Ut,{enumerable:!1,writable:!1,configurable:!1,value:T}),Object.defineProperty(k,Zt,{enumerable:!1,writable:!1,configurable:!1,value:B}),void 0!==A&&Object.defineProperty(k,Yt,{enumerable:!1,writable:!1,configurable:!1,value:A}),N.engine&&N.engine.registerComponent(k),k};return void 0!==A&&(o.__classId__symbol_=A),o.__name__symbol_=T,o.isComponent=!0,o.isDisposableComponent=!0,o.originalClassName=T,(o.prototype=E.prototype).constructor=E,o}}function F(T){if(!T)throw new TypeError(T+" is not a component.");if(T.__name__symbol_)return T.__name__symbol_;throw new TypeError(T+" is not a registered component.")}function L(T){if(!T)throw new TypeError(T+" is not a component.");if(T.__classId__symbol_)return T.__classId__symbol_;if(!T.__name__symbol_)throw new TypeError(T+" is not a registered component.");return null}function D(T){if(!T)throw new TypeError(T+" is not a component.");if(T.__component__id_)return T.__component__id_;throw new TypeError(T+" is not a registered disposable component.")}!function(T){T.engine=null}(N||(N={}));var le=function(){function t(){this.dirty=!1,this.data={},this.subscriptions=[]}return t.component=function(T,A){if(delete T[A]){var E=A+"_"+Math.random();T[E]=void 0,Object.defineProperty(T,E,o(o({},Object.getOwnPropertyDescriptor(T,E)),{enumerable:!1})),Object.defineProperty(T,A.toString(),{get:function(){return this[E]},set:function(T){var O=this[E];if(this.data[A]=T?D(T):null,this[E]=T,T!==O){this.dirty=!0;for(var k=0;k<this.subscriptions.length;k++)this.subscriptions[k](A,T,O)}},enumerable:!0})}},t.field=function(T,A){delete T[A]&&Object.defineProperty(T,A.toString(),{get:function(){return this.data[A]},set:function(T){var E=this.data[A];if(this.data[A]=T,T!==E){this.dirty=!0;for(var O=0;O<this.subscriptions.length;O++)this.subscriptions[O](A,T,E)}},enumerable:!0})},t.uiValue=function(T,A){delete T[A]&&Object.defineProperty(T,A.toString(),{get:function(){return this.data[A].toString()},set:function(T){var E=this.data[A],O=new Lt(T);if(this.data[A]=O,O!==E){this.dirty=!0;for(var k=0;k<this.subscriptions.length;k++)this.subscriptions[k](A,O,E)}},enumerable:!0})},t.readonly=function(T,A){delete T[A]&&Object.defineProperty(T,A.toString(),{get:function(){if(A in this.data==0)throw new Error("The field "+A+" is uninitialized");return this.data[A]},set:function(T){if(A in this.data)throw new Error("The field "+A+" is readonly");this.data[A]=T,this.dirty=!0},enumerable:!0,configurable:!1})},t.prototype.onChange=function(T){return this.subscriptions.push(T),this},t.prototype.toJSON=function(){return this.data},t}();function U(T){return Zt in T}var ve=function(){function t(){for(var T=[],A=0;A<arguments.length;A++)T[A]=arguments[A];if(this.entities=[],this.active=!1,this._requiresNames=[],!T)throw new Error("ComponentGroup: Could not load the requires list");if(!(T instanceof Array))throw new Error("ComponentGroup: requires list is not an Array");Object.defineProperty(this,"requires",{get:function(){return T.slice()}}),Object.defineProperty(this,"requiresNames",{get:function(){return this._requiresNames.slice()}});for(var n=function(A){var O=T[A],k=null;if(!O)throw new Error("ComponentGroup: the required component at location "+A+" is invalid");try{k=F(O)}catch(T){throw new Error("ComponentGroup: the required component at location "+A+" is not registered as a @Component. Remember to provide the class of the component, not the name")}if(E._requiresNames.some((function(T){return T===k})))throw new Error("ComponentGroup: the required component list has a repeated name "+k);E._requiresNames.push(k)},E=this,O=0;O<T.length;O++)n(O)}return t.prototype.hasEntity=function(T){return!!T.isAddedToEngine()&&-1!==this.entities.indexOf(T)},t.prototype.addEntity=function(T){if(!T.isAddedToEngine())throw new TypeError("ComponentGroup: Cannot add a entity that is not added to the engine");-1===this.entities.indexOf(T)&&this.entities.push(T)},t.prototype.removeEntity=function(T){var A=this.entities.indexOf(T);-1!==A&&this.entities.splice(A,1)},t.prototype.componentRemoved=function(T,A){-1!==this._requiresNames.indexOf(A)&&this.removeEntity(T)},t.prototype.meetsRequirements=function(T){for(var A=0;A<this._requiresNames.length;A++)if(!(this._requiresNames[A]in T.components))return!1;return!0},t}(),Se=function(){function t(T){this.name=T,this.children={},this.eventManager=null,this.alive=!1,this.uuid=f("E"),this.components={},this.engine=null,this._parent=null}return t.prototype.addComponentOrReplace=function(T){if("function"==typeof T)throw new Error("You passed a function or class as a component, an instance of component is expected");if("object"!=typeof T)throw new Error("You passed a "+typeof T+", an instance of component is expected");var A=F(T);if(this.components[A]){if(this.components[A]===T)return T;this.removeComponent(this.components[A],!1)}return this.addComponent(T)},t.prototype.hasComponent=function(T){var A=typeof T;if("string"!==A&&"object"!==A&&"function"!==A)throw new Error("Entity#has(component): component is not a class, name or instance");if(null===T)return!1;var E="string"===A?T:F(T),O=this.components[E];return!!O&&("object"===A?O===T:"function"!==A||O instanceof T)},t.prototype.getComponent=function(T){var A=typeof T;if("string"!==A&&"function"!==A)throw new Error("Entity#get(component): component is not a class or name");var E="string"===A?T:F(T),O=this.components[E];if(!O)throw new Error('Can not get component "'+E+'" from entity "'+this.identifier+'"');if("function"===A){if(O instanceof T)return O;throw new Error('Can not get component "'+E+'" from entity "'+this.identifier+'" (by instance)')}return O},t.prototype.getComponentOrNull=function(T){var A=typeof T;if("string"!==A&&"function"!==A)throw new Error("Entity#getOrNull(component): component is not a class or name");var E="string"===A?T:F(T),O=this.components[E];return O?"function"===A?O instanceof T?O:null:O:null},t.prototype.getComponentOrCreate=function(T){if("function"!=typeof T)throw new Error("Entity#getOrCreate(component): component is not a class");var A=this.getComponentOrNull(T);return A||(F(A=new T),this.addComponentOrReplace(A)),A},t.prototype.addComponent=function(T){if("object"!=typeof T)throw new Error("Entity#add(component): You passed a function or class as a component, an instance of component is expected");var A=F(T),E=L(T);if(this.components[A])throw new Error('A component of type "'+A+'" is already present in entity "'+this.identifier+'"');this.components[A]=T,this.eventManager&&this.eventManager.fireEvent(new Ft(this,A,E));var O=T;return"function"==typeof O.addedToEntity&&O.addedToEntity(this),T},t.prototype.removeComponent=function(T,A){void 0===A&&(A=!0);var E=typeof T;if("string"!==E&&"function"!==E&&"object"!==E)throw new Error("Entity#remove(component): component is not a class, class or name");var O="string"===E?T:F(T),k=this.components[O];if(k){if("function"===E)return k instanceof T?(delete this.components[O],void(k&&(A&&this.eventManager&&this.eventManager.fireEvent(new _t(this,O,k)),"function"==typeof k.removedFromEntity&&k.removedFromEntity(this)))):void c('Entity Warning: Trying to remove wrong (by constructor) component "'+O+'" from entity "'+this.identifier+'"');delete this.components[O],k&&(A&&this.eventManager&&this.eventManager.fireEvent(new _t(this,O,k)),"function"==typeof k.removedFromEntity&&k.removedFromEntity(this))}else c('Entity Warning: Trying to remove inexisting component "'+O+'" from entity "'+this.identifier+'"')},t.prototype.isAddedToEngine=function(){return!(!this.engine||!(this.uuid in this.engine.entities)&&this.engine.rootEntity!==this)},t.prototype.setParent=function(T){var A;if(T&&"getEntityRepresentation"in T){if(!this.engine)throw new Error("In order to set an attachable as parent, you first need to add the entity to the engine.");A=T.getEntityRepresentation(this.engine)}else A=!T&&this.engine?this.engine.rootEntity:T;var E=this.getParent();if(A===this)throw new Error('Failed to set parent for entity "'+this.identifier+"\": An entity can't set itself as a its own parent");if(A===E)return this;var O=this.getCircularAncestor(A);if(O)throw new Error('Failed to set parent for entity "'+this.identifier+'": Circular parent references are not allowed (See entity "'+O+'")');return E&&delete E.children[this.uuid],null!==A&&"0"!==A.uuid&&(!A.isAddedToEngine()&&this.isAddedToEngine()&&this.engine.removeEntity(this),A.isAddedToEngine()&&!this.isAddedToEngine()&&A.engine.addEntity(this)),this._parent=A||null,this.registerAsChild(),this.eventManager&&this.engine&&this.eventManager.fireEvent(new Pt(this,A)),this},t.prototype.getParent=function(){return this._parent},Object.defineProperty(t.prototype,"identifier",{get:function(){return this.name||this.uuid},enumerable:!1,configurable:!0}),t.prototype.getCircularAncestor=function(T){for(var A=this.engine?this.engine.rootEntity:null,E=T;E&&E!==A;){var O=E.getParent();if(O===this)return E.uuid;E=O}return null},t.prototype.registerAsChild=function(){var T=this.getParent();this.uuid&&T&&(T.children[this.uuid]=this)},t}(),Ce=function(){function t(T){this.eventManager=new k,this.systems=[],this.entityLists={},this.addedSystems=[],this._entities={},this._disposableComponents={},this._componentGroups={},this.simpleSystems=[],this.eventManager.addListener(Ft,this,this.componentAddedHandler),this.eventManager.addListener(_t,this,this.componentRemovedHandler),this.rootEntity=T,this.firstPersonCameraEntity=new Se,this.firstPersonCameraEntity.uuid="FirstPersonCameraEntityReference",this.addEntity(this.firstPersonCameraEntity),this.avatarEntity=new Se,this.avatarEntity.uuid="AvatarEntityReference",this.addEntity(this.avatarEntity)}return Object.defineProperty(t.prototype,"entities",{get:function(){return this._entities},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disposableComponents",{get:function(){return this._disposableComponents},enumerable:!1,configurable:!0}),t.prototype.addEntity=function(T){var A=T.getParent();if(T.isAddedToEngine())return T;for(var E in T.eventManager=this.eventManager,T.engine=this,this._entities[T.uuid]=T,this.checkRequirementsAndAdd(T),A?A.isAddedToEngine()||A===this.rootEntity||c("Engine: warning, added an entity with a parent not present in the engine. Parent id: "+A.uuid):T.setParent(this.rootEntity),T.alive=!0,T.children){var O=T.children[E];O&&(O.isAddedToEngine()||this.addEntity(O))}return T},t.prototype.removeEntity=function(T){var A=T.uuid;if(T.isAddedToEngine()){for(var E in T.components){var O=this._componentGroups[E];if(O)for(var k in O)O[k].removeEntity(T);delete this.entityLists[E][A]}for(var B=0;B<this.simpleSystems.length;B++){var _t=this.simpleSystems[B];_t.onRemoveEntity&&_t.onRemoveEntity(T)}for(var B in T.children){var Ft=T.children[B];Ft&&this.removeEntity(Ft)}return T.alive=!1,T.eventManager=null,delete this._entities[A],!0}for(var E in c("Engine: Trying to remove non existent entity from engine."),T.isAddedToEngine()?c("Engine: Entity id: "+A):c('Engine: Entity "'+T.uuid+'" has not been added to any engine yet.'),c("Engine: Entity's components:"),T.components)c(E);return!1},t.prototype.addSystem=function(T,A){if(void 0===A&&(A=0),-1!==this.addedSystems.indexOf(T))return c("Engine: Trying to add a system that is already added. Aborting"),T;if(this.systems.length>0)for(var E=0;E<this.systems.length;E++){var O=this.systems[E],k=E===this.systems.length-1;if(O.priority>A){this.addedSystems.push(T),this.systems.splice(E,0,{system:T,priority:A});break}if(k){this.addedSystems.push(T),this.systems.splice(E+1,0,{system:T,priority:A});break}}else this.addedSystems.push(T),this.systems.splice(1,0,{system:T,priority:A});return this.registerSystem(T),T},t.prototype.removeSystem=function(T){var A=this.addedSystems.indexOf(T);if(-1!==A){T.active=!1,T.deactivate&&T.deactivate(),this.addedSystems.splice(A,1);for(var E=0;E<this.systems.length;E++)this.systems[E].system===T&&this.systems.splice(E,1);return!0}return!1},t.prototype.update=function(T){for(var A in this.systems){var E=this.systems[A].system;if(E.active&&E.update)try{E.update(T)}catch(T){y(T)}}return this},t.prototype.getEntitiesWithComponent=function(T){var A="string"==typeof T?T:F(T);return A in this.entityLists?this.entityLists[A]:this.entityLists[A]={}},t.prototype.registerComponent=function(T){var A=D(T),E=F(T),O=L(T);this._disposableComponents[A]=T,null!==O&&(this.eventManager.fireEvent(new Kt(A,E,O)),this.eventManager.fireEvent(new ne(A,T)))},t.prototype.disposeComponent=function(T){var A=D(T);return delete this._disposableComponents[A]&&(this.eventManager.fireEvent(new ee(A)),T.onDispose&&T.onDispose(),!0)},t.prototype.updateComponent=function(T){this.eventManager.fireEvent(new ne(D(T),T))},t.prototype.getComponentGroup=function(){for(var T=[],A=0;A<arguments.length;A++)T[A]=arguments[A];var E=void 0;if(T.length>0&&(Pt=this._componentGroups[F(T[0])]))for(var O=T.slice(),k=0;k<Pt.length;k++){var B=Pt[k];if(O.length===B.requires.length){for(var _t=0;_t<O.length&&-1!==B.requires.indexOf(O[_t]);_t++)_t===O.length-1&&(E=B);if(E)break}}if(E)return E;(E=new(ve.bind.apply(ve,p([void 0],l(T))))).active=!0;var Ft=E.requiresNames;for(k=0;k<Ft.length;k++){var Pt,Lt=Ft[k];(Pt=this._componentGroups[Lt])||(this._componentGroups[Lt]=Pt=[]),-1===Pt.indexOf(E)&&Pt.push(E)}for(var Ut in this._entities)this.checkRequirements(this._entities[Ut],E);return E},t.prototype.removeComponentGroup=function(T){if(T.active){T.active=!1;for(var A=T.requiresNames,E=0;E<A.length;E++){var O=A[E],k=this._componentGroups[O];if(k){var B=k.indexOf(T);-1!==B&&k.splice(B,1)}}return!0}return!1},t.prototype.registerSystem=function(T){T.active=!0,T.activate&&T.activate(this),this.simpleSystems.push(T)},t.prototype.checkRequirementsAndAdd=function(T){if(T.isAddedToEngine()){for(var A in T.components){A in this.entityLists||(this.entityLists[A]={}),this.entityLists[A][T.uuid]=T;var E=this._componentGroups[A];if(E)for(var O in E)this.checkRequirements(T,E[O])}for(var k=0;k<this.simpleSystems.length;k++){var B=this.simpleSystems[k];B.onAddEntity&&B.onAddEntity(T)}}},t.prototype.checkRequirements=function(T,A){A.meetsRequirements(T)?A.hasEntity(T)||A.addEntity(T):A.hasEntity(T)&&A.removeEntity(T)},t.prototype.componentAddedHandler=function(T){var A,E=T.entity,O=T.componentName;if(E.isAddedToEngine()){this.entityLists[O]?this.entityLists[O][E.uuid]=E:this.entityLists[O]=((A={})[E.uuid]=E,A);var k=this._componentGroups[O];if(k)for(var B in k)this.checkRequirements(E,k[B])}},t.prototype.componentRemovedHandler=function(T){var A=T.entity,E=T.componentName;if(A.isAddedToEngine()){delete this.entityLists[E][A.uuid];var O=this._componentGroups[E];if(O)for(var k in O)this.checkRequirements(A,O[k])}},t}(),Ie=Promise.resolve().then.bind(Promise.resolve());function G(T){var A=Ie(T);return A.isComplete=!1,A.then((function(T){A.isComplete=!0,A.result=T,A.didFail=!1})).catch((function(T){A.isComplete=!0,A.error=T,A.didFail=!0,y("executeTask: FAILED "+T.toString(),T)})),A}var Re,Fe,Ne=function(){function t(T,A,E,O){void 0===A&&(A=!1),this.initalize(T,A,E,O)}return t.prototype.initalize=function(T,A,E,O){return void 0===A&&(A=!1),this.mask=T,this.skipNextObservers=A,this.target=E,this.currentTarget=O,this},t}(),Y=function(T,A,E){void 0===E&&(E=null),this.callback=T,this.mask=A,this.scope=E,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1},Pe=function(){function t(){this._observers=null,this._observables=null}return t.Watch=function(T,A,E,O){var k,B;void 0===E&&(E=-1),void 0===O&&(O=null);var _t=new t;_t._observers=new Array,_t._observables=T;try{for(var Ft=h(T),Pt=Ft.next();!Pt.done;Pt=Ft.next()){var Lt=Pt.value.add(A,E,!1,O);Lt&&_t._observers.push(Lt)}}catch(T){k={error:T}}finally{try{Pt&&!Pt.done&&(B=Ft.return)&&B.call(Ft)}finally{if(k)throw k.error}}return _t},t.prototype.dispose=function(){if(this._observers&&this._observables)for(var T=0;T<this._observers.length;T++)this._observables[T].remove(this._observers[T]);this._observers=null,this._observables=null},t}(),Le=function(){function t(T){this._observers=new Array,this._onObserverAdded=null,this._eventState=new Ne(0),T&&(this._onObserverAdded=T)}return t.prototype.add=function(T,A,E,O,k){if(void 0===A&&(A=-1),void 0===E&&(E=!1),void 0===O&&(O=null),void 0===k&&(k=!1),!T)return null;var B=new Y(T,A,O);return B.unregisterOnNextCall=k,E?this._observers.unshift(B):this._observers.push(B),this._onObserverAdded&&this._onObserverAdded(B),B},t.prototype.addOnce=function(T){return this.add(T,void 0,void 0,void 0,!0)},t.prototype.remove=function(T){return!!T&&-1!==this._observers.indexOf(T)&&(this._deferUnregister(T),!0)},t.prototype.removeCallback=function(T,A){for(var E=0;E<this._observers.length;E++)if(this._observers[E].callback===T&&(!A||A===this._observers[E].scope))return this._deferUnregister(this._observers[E]),!0;return!1},t.prototype.notifyObservers=function(T,A,E,O){var k,B;if(void 0===A&&(A=-1),!this._observers.length)return!0;var _t=this._eventState;_t.mask=A,_t.target=E,_t.currentTarget=O,_t.skipNextObservers=!1,_t.lastReturnValue=T;try{for(var Ft=h(this._observers),Pt=Ft.next();!Pt.done;Pt=Ft.next()){var Lt=Pt.value;if(!Lt._willBeUnregistered&&(Lt.mask&A&&(Lt.scope?_t.lastReturnValue=Lt.callback.apply(Lt.scope,[T,_t]):_t.lastReturnValue=Lt.callback(T,_t),Lt.unregisterOnNextCall&&this._deferUnregister(Lt)),_t.skipNextObservers))return!1}}catch(T){k={error:T}}finally{try{Pt&&!Pt.done&&(B=Ft.return)&&B.call(Ft)}finally{if(k)throw k.error}}return!0},t.prototype.notifyObserversWithPromise=function(T,A,E,O){var k=this;void 0===A&&(A=-1);var B=Promise.resolve(T);if(!this._observers.length)return B;var _t=this._eventState;return _t.mask=A,_t.target=E,_t.currentTarget=O,_t.skipNextObservers=!1,this._observers.forEach((function(E){_t.skipNextObservers||E._willBeUnregistered||E.mask&A&&(B=E.scope?B.then((function(A){return _t.lastReturnValue=A,E.callback.apply(E.scope,[T,_t])})):B.then((function(A){return _t.lastReturnValue=A,E.callback(T,_t)})),E.unregisterOnNextCall&&k._deferUnregister(E))})),B.then((function(){return T}))},t.prototype.notifyObserver=function(T,A,E){void 0===E&&(E=-1);var O=this._eventState;O.mask=E,O.skipNextObservers=!1,T.callback(A,O)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var T=new t;return T._observers=this._observers.slice(0),T},t.prototype.hasSpecificMask=function(T){var A,E;void 0===T&&(T=-1);try{for(var O=h(this._observers),k=O.next();!k.done;k=O.next()){var B=k.value;if(B.mask&T||B.mask===T)return!0}}catch(T){A={error:T}}finally{try{k&&!k.done&&(E=O.return)&&E.call(O)}finally{if(A)throw A.error}}return!1},t.prototype._deferUnregister=function(T){var A=this;T.unregisterOnNextCall=!1,T._willBeUnregistered=!0,G((function(){return function(T,A,E,O){return new(E||(E=Promise))((function(A,k){function s(T){try{d(O.next(T))}catch(T){k(T)}}function a(T){try{d(O.throw(T))}catch(T){k(T)}}function d(T){var O;T.done?A(T.value):(O=T.value,O instanceof E?O:new E((function(T){T(O)}))).then(s,a)}d((O=O.apply(T,[])).next())}))}(A,0,void 0,(function(){return function(T,A){var E,O,k,B,_t={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return B={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function a(B){return function(Ft){return function(B){if(E)throw new TypeError("Generator is already executing.");for(;_t;)try{if(E=1,O&&(k=2&B[0]?O.return:B[0]?O.throw||((k=O.return)&&k.call(O),0):O.next)&&!(k=k.call(O,B[1])).done)return k;switch(O=0,k&&(B=[2&B[0],k.value]),B[0]){case 0:case 1:k=B;break;case 4:return _t.label++,{value:B[1],done:!1};case 5:_t.label++,O=B[1],B=[0];continue;case 7:B=_t.ops.pop(),_t.trys.pop();continue;default:if(!((k=(k=_t.trys).length>0&&k[k.length-1])||6!==B[0]&&2!==B[0])){_t=0;continue}if(3===B[0]&&(!k||B[1]>k[0]&&B[1]<k[3])){_t.label=B[1];break}if(6===B[0]&&_t.label<k[1]){_t.label=k[1],k=B;break}if(k&&_t.label<k[2]){_t.label=k[2],_t.ops.push(B);break}k[2]&&_t.ops.pop(),_t.trys.pop();continue}B=A.call(T,_t)}catch(T){B=[6,T],O=0}finally{E=k=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,Ft])}}}(this,(function(A){return[2,this._remove(T)]}))}))}))},t.prototype._remove=function(T){if(!T)return!1;var A=this._observers.indexOf(T);return-1!==A&&(this._observers.splice(A,1),!0)},t}(),Ue=r([x(),s("design:paramtypes",[String,Object])],(function(T,A){this.uuid=T,this.payload=A})),He=r([x(),s("design:paramtypes",[Object])],(function(T){this.payload=T})),Ve=r([x(),s("design:paramtypes",[Object])],(function(T){this.payload=T}));function tt(T){return function(){Fe&&Fe.subscribe(T)}}var We=new Le(tt("cameraModeChanged")),Ge=new Le(tt("idleStateChanged")),qe=new Le(tt("onEnterScene")),Xe=qe,Ye=new Le(tt("onLeaveScene")),$e=Ye,Je=new Le(tt("sceneStart")),Qe=new Le(tt("playerExpression")),Ze=new Le(tt("onPointerLock")),tn=new Le(tt("videoEvent")),nn=new Le(tt("profileChanged")),on=new Le(tt("playerConnected")),rn=new Le(tt("playerDisconnected")),sn=new Le(tt("onRealmChanged")),an=new Le(tt("playerClicked"));function mt(T){(Fe=T)&&Fe.onEvent((function(T){switch(T.type){case"onEnterScene":return void qe.notifyObservers(T.data);case"onLeaveScene":return void Ye.notifyObservers(T.data);case"cameraModeChanged":return void We.notifyObservers(T.data);case"idleStateChanged":return void Ge.notifyObservers(T.data);case"sceneStart":return void Je.notifyObservers(T.data);case"playerExpression":return void Qe.notifyObservers(T.data);case"videoEvent":var A=T.data,E=N.engine.disposableComponents[A.componentId];return E&&E.update(A),void tn.notifyObservers(A);case"profileChanged":return void nn.notifyObservers(T.data);case"onPointerLock":return void Ze.notifyObservers(T.data);case"playerConnected":return void on.notifyObservers(T.data);case"playerDisconnected":return void rn.notifyObservers(T.data);case"onRealmChanged":return void sn.notifyObservers(T.data);case"playerClicked":return void an.notifyObservers(T.data)}}))}var cn=function(){function t(T){this.dcl=T,this.cachedComponents={}}return t.prototype.activate=function(T){var A=this;this.engine=T,T.eventManager.addListener(Ft,this,this.componentAdded),T.eventManager.addListener(_t,this,this.componentRemoved),T.eventManager.addListener(Kt,this,this.disposableComponentCreated),T.eventManager.addListener(ee,this,this.disposableComponentRemoved),T.eventManager.addListener(ne,this,this.disposableComponentUpdated),T.eventManager.addListener(Pt,this,this.parentChanged);var E=T.rootEntity.uuid;this.dcl.addEntity(E),this.dcl.onUpdate((function(E){T.update(E),A.presentEntities()})),this.dcl.onEvent((function(A){var E=A.data;switch(A.type){case"uuidEvent":T.eventManager.fireEvent(new Ue(E.uuid,E.payload));break;case"raycastResponse":("HitFirst"===E.queryType||"HitAll"===E.queryType)&&T.eventManager.fireEvent(new He(E));break;case"actionButtonEvent":T.eventManager.fireEvent(new Ve(E.payload))}}))},t.prototype.onAddEntity=function(T){if(T&&T.isAddedToEngine()){var A=T.uuid,E=T.getParent();for(var O in this.dcl.addEntity(A),E&&this.dcl.setParent(A,E.uuid),this.cachedComponents[A]={},T.components){var k=T.components[O],B=L(k);if(null!==B)if(U(k))this.dcl.attachEntityComponent(T.uuid,O,D(k));else{var _t=JSON.stringify(k);this.dcl.updateEntityComponent(A,O,B,_t),this.cachedComponents[A][O]=_t}}}},t.prototype.onRemoveEntity=function(T){if(T.isAddedToEngine()){var A=T.uuid;this.dcl.removeEntity(A),delete this.cachedComponents[A]}},t.prototype.presentEntities=function(){for(var T in this.engine.entities){var A=this.engine.entities[T];for(var E in A.components){var O=L(_t=A.components[E]);if(null!==O&&!U(_t)){var k=this.getJsonIfDirty(A.uuid,E,_t);k&&(this.dcl.updateEntityComponent(A.uuid,E,O,k),this.clearDirty(A.uuid,E,_t,k))}}}for(var B in this.engine.disposableComponents){var _t;(_t=this.engine.disposableComponents[B])instanceof le&&_t.dirty&&(this.dcl.componentUpdated(B,JSON.stringify(_t)),_t.dirty=!1)}},t.prototype.componentAdded=function(T){if(T.entity.isAddedToEngine()){var A=T.entity.components[T.componentName];if(U(A))this.dcl.attachEntityComponent(T.entity.uuid,T.componentName,D(A));else if(null!==T.classId){var E=JSON.stringify(A);this.dcl.updateEntityComponent(T.entity.uuid,T.componentName,T.classId,E),this.cachedComponents[T.entity.uuid][T.componentName]=E}}},t.prototype.componentRemoved=function(T){T.entity.isAddedToEngine()&&(this.dcl.removeEntityComponent(T.entity.uuid,T.componentName),delete this.cachedComponents[T.entity.uuid][T.componentName])},t.prototype.disposableComponentCreated=function(T){this.dcl.componentCreated(T.componentId,T.componentName,T.classId)},t.prototype.disposableComponentRemoved=function(T){this.dcl.componentDisposed(T.componentId)},t.prototype.disposableComponentUpdated=function(T){this.dcl.componentUpdated(T.componentId,JSON.stringify(T.component))},t.prototype.parentChanged=function(T){this.dcl.setParent(T.entity.uuid,T.parent?T.parent.uuid:"0")},t.prototype.getJsonIfDirty=function(T,A,E){var O=JSON.stringify(E);return O!==this.cachedComponents[T][A]&&O},t.prototype.clearDirty=function(T,A,E,O){this.cachedComponents[T][A]=O},t}(),ln="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},un={},hn={};!function(T){var A,E;Object.defineProperty(T,"__esModule",{value:!0}),T.RAD2DEG=T.DEG2RAD=T.Epsilon=T.ToLinearSpace=T.ToGammaSpace=T.Space=T.Orientation=void 0,(A=T.Orientation||(T.Orientation={}))[A.CW=0]="CW",A[A.CCW=1]="CCW",(E=T.Space||(T.Space={}))[E.LOCAL=0]="LOCAL",E[E.WORLD=1]="WORLD",E[E.BONE=2]="BONE",T.ToGammaSpace=1/2.2,T.ToLinearSpace=2.2,T.Epsilon=1e-6,T.DEG2RAD=Math.PI/180,T.RAD2DEG=360/(2*Math.PI)}(hn);var pn={},dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.buildArray=void 0,dn.buildArray=function(T,A){const E=[];for(let O=0;O<T;++O)E.push(A());return E};var fn={},yn={},gn={},mn={},vn={};Object.defineProperty(vn,"__esModule",{value:!0}),vn.Scalar=void 0;class Et{static WithinEpsilon(T,A,E=1401298e-51){const O=T-A;return-E<=O&&O<=E}static ToHex(T){const A=T.toString(16);return T<=15?("0"+A).toUpperCase():A.toUpperCase()}static Sign(T){const A=+T;return 0===A||isNaN(A)?A:A>0?1:-1}static Clamp(T,A=0,E=1){return Math.min(E,Math.max(A,T))}static Log2(T){return Math.log(T)*Math.LOG2E}static Repeat(T,A){return T-Math.floor(T/A)*A}static Normalize(T,A,E){return(T-A)/(E-A)}static Denormalize(T,A,E){return T*(E-A)+A}static DeltaAngle(T,A){let E=Et.Repeat(A-T,360);return E>180&&(E-=360),E}static PingPong(T,A){const E=Et.Repeat(T,2*A);return A-Math.abs(E-A)}static SmoothStep(T,A,E){let O=Et.Clamp(E);return O=-2*O*O*O+3*O*O,A*O+T*(1-O)}static MoveTowards(T,A,E){let O=0;return O=Math.abs(A-T)<=E?A:T+Et.Sign(A-T)*E,O}static MoveTowardsAngle(T,A,E){const O=Et.DeltaAngle(T,A);let k=0;return k=-E<O&&O<E?A:Et.MoveTowards(T,T+O,E),k}static Lerp(T,A,E){return T+(A-T)*E}static LerpAngle(T,A,E){let O=Et.Repeat(A-T,360);return O>180&&(O-=360),T+O*Et.Clamp(E)}static InverseLerp(T,A,E){let O=0;return O=T!==A?Et.Clamp((E-T)/(A-T)):0,O}static Hermite(T,A,E,O,k){const B=k*k,_t=k*B;return T*(2*_t-3*B+1)+E*(-2*_t+3*B)+A*(_t-2*B+k)+O*(_t-B)}static RandomRange(T,A){return T===A?T:Math.random()*(A-T)+T}static RangeToPercent(T,A,E){return(T-A)/(E-A)}static PercentToRange(T,A,E){return(E-A)*T+A}static NormalizeRadians(T){return T-Et.TwoPi*Math.floor((T+Math.PI)/Et.TwoPi)}}vn.Scalar=Et,Et.TwoPi=2*Math.PI,Object.defineProperty(mn,"__esModule",{value:!0}),mn.Vector4=void 0;const bn=hn,wn=vn,Tn=fn;class Mt{constructor(T,A,E,O){this.x=T,this.y=A,this.z=E,this.w=O}static Add(T,A){return new Mt(T.x,T.y,T.z,T.w).addInPlace(A)}static FromArray(T,A=0){return new Mt(T[A],T[A+1],T[A+2],T[A+3])}static FromArrayToRef(T,A,E){E.x=T[A],E.y=T[A+1],E.z=T[A+2],E.w=T[A+3]}static FromFloatArrayToRef(T,A,E){Mt.FromArrayToRef(T,A,E)}static FromFloatsToRef(T,A,E,O,k){k.x=T,k.y=A,k.z=E,k.w=O}static Zero(){return new Mt(0,0,0,0)}static One(){return new Mt(1,1,1,1)}static Normalize(T){const A=Mt.Zero();return Mt.NormalizeToRef(T,A),A}static NormalizeToRef(T,A){A.copyFrom(T),A.normalize()}static Minimize(T,A){const E=new Mt(T.x,T.y,T.z,T.w);return E.minimizeInPlace(A),E}static Maximize(T,A){const E=new Mt(T.x,T.y,T.z,T.w);return E.maximizeInPlace(A),E}static Distance(T,A){return Math.sqrt(Mt.DistanceSquared(T,A))}static DistanceSquared(T,A){const E=T.x-A.x,O=T.y-A.y,k=T.z-A.z,B=T.w-A.w;return E*E+O*O+k*k+B*B}static Center(T,A){const E=Mt.Add(T,A);return E.scaleInPlace(.5),E}static TransformNormal(T,A){const E=Mt.Zero();return Mt.TransformNormalToRef(T,A,E),E}static TransformNormalToRef(T,A,E){const O=A.m,k=T.x*O[0]+T.y*O[4]+T.z*O[8],B=T.x*O[1]+T.y*O[5]+T.z*O[9],_t=T.x*O[2]+T.y*O[6]+T.z*O[10];E.x=k,E.y=B,E.z=_t,E.w=T.w}static TransformNormalFromFloatsToRef(T,A,E,O,k,B){const _t=k.m;B.x=T*_t[0]+A*_t[4]+E*_t[8],B.y=T*_t[1]+A*_t[5]+E*_t[9],B.z=T*_t[2]+A*_t[6]+E*_t[10],B.w=O}toString(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"}getClassName(){return"Vector4"}getHashCode(){let T=this.x||0;return T=397*T^(this.y||0),T=397*T^(this.z||0),T=397*T^(this.w||0),T}asArray(){const T=new Array;return this.toArray(T,0),T}toArray(T,A=0){return T[A]=this.x,T[A+1]=this.y,T[A+2]=this.z,T[A+3]=this.w,this}addInPlace(T){return this.x+=T.x,this.y+=T.y,this.z+=T.z,this.w+=T.w,this}add(T){return new Mt(this.x+T.x,this.y+T.y,this.z+T.z,this.w+T.w)}addToRef(T,A){return A.x=this.x+T.x,A.y=this.y+T.y,A.z=this.z+T.z,A.w=this.w+T.w,this}subtractInPlace(T){return this.x-=T.x,this.y-=T.y,this.z-=T.z,this.w-=T.w,this}subtract(T){return new Mt(this.x-T.x,this.y-T.y,this.z-T.z,this.w-T.w)}subtractToRef(T,A){return A.x=this.x-T.x,A.y=this.y-T.y,A.z=this.z-T.z,A.w=this.w-T.w,this}subtractFromFloats(T,A,E,O){return new Mt(this.x-T,this.y-A,this.z-E,this.w-O)}subtractFromFloatsToRef(T,A,E,O,k){return k.x=this.x-T,k.y=this.y-A,k.z=this.z-E,k.w=this.w-O,this}negate(){return new Mt(-this.x,-this.y,-this.z,-this.w)}scaleInPlace(T){return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this}scale(T){return new Mt(this.x*T,this.y*T,this.z*T,this.w*T)}scaleToRef(T,A){return A.x=this.x*T,A.y=this.y*T,A.z=this.z*T,A.w=this.w*T,this}scaleAndAddToRef(T,A){return A.x+=this.x*T,A.y+=this.y*T,A.z+=this.z*T,A.w+=this.w*T,this}equals(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z&&this.w===T.w}equalsWithEpsilon(T,A=bn.Epsilon){return T&&wn.Scalar.WithinEpsilon(this.x,T.x,A)&&wn.Scalar.WithinEpsilon(this.y,T.y,A)&&wn.Scalar.WithinEpsilon(this.z,T.z,A)&&wn.Scalar.WithinEpsilon(this.w,T.w,A)}equalsToFloats(T,A,E,O){return this.x===T&&this.y===A&&this.z===E&&this.w===O}multiplyInPlace(T){return this.x*=T.x,this.y*=T.y,this.z*=T.z,this.w*=T.w,this}multiply(T){return new Mt(this.x*T.x,this.y*T.y,this.z*T.z,this.w*T.w)}multiplyToRef(T,A){return A.x=this.x*T.x,A.y=this.y*T.y,A.z=this.z*T.z,A.w=this.w*T.w,this}multiplyByFloats(T,A,E,O){return new Mt(this.x*T,this.y*A,this.z*E,this.w*O)}divide(T){return new Mt(this.x/T.x,this.y/T.y,this.z/T.z,this.w/T.w)}divideToRef(T,A){return A.x=this.x/T.x,A.y=this.y/T.y,A.z=this.z/T.z,A.w=this.w/T.w,this}divideInPlace(T){return this.divideToRef(T,this)}minimizeInPlace(T){return T.x<this.x&&(this.x=T.x),T.y<this.y&&(this.y=T.y),T.z<this.z&&(this.z=T.z),T.w<this.w&&(this.w=T.w),this}maximizeInPlace(T){return T.x>this.x&&(this.x=T.x),T.y>this.y&&(this.y=T.y),T.z>this.z&&(this.z=T.z),T.w>this.w&&(this.w=T.w),this}floor(){return new Mt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))}fract(){return new Mt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}normalize(){const T=this.length();return 0===T?this:this.scaleInPlace(1/T)}toVector3(){return new Tn.Vector3(this.x,this.y,this.z)}clone(){return new Mt(this.x,this.y,this.z,this.w)}copyFrom(T){return this.x=T.x,this.y=T.y,this.z=T.z,this.w=T.w,this}copyFromFloats(T,A,E,O){return this.x=T,this.y=A,this.z=E,this.w=O,this}set(T,A,E,O){return this.copyFromFloats(T,A,E,O)}setAll(T){return this.x=this.y=this.z=this.w=T,this}}mn.Vector4=Mt,Object.defineProperty(gn,"__esModule",{value:!0}),gn.Matrix=void 0;const xn=fn,An=yn,_n=pn,Sn=mn;class Dt{constructor(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this._m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this._updateIdentityStatus(!1)}get m(){return this._m}static get IdentityReadOnly(){return Dt._identityReadOnly}static FromArray(T,A=0){const E=new Dt;return Dt.FromArrayToRef(T,A,E),E}static FromArrayToRef(T,A,E){for(let O=0;O<16;O++)E._m[O]=T[O+A];E._markAsUpdated()}static FromFloatArrayToRefScaled(T,A,E,O){for(let k=0;k<16;k++)O._m[k]=T[k+A]*E;O._markAsUpdated()}static FromValuesToRef(T,A,E,O,k,B,_t,Ft,Pt,Lt,Ut,Yt,Zt,Kt,ee,ne,le){const ve=le._m;ve[0]=T,ve[1]=A,ve[2]=E,ve[3]=O,ve[4]=k,ve[5]=B,ve[6]=_t,ve[7]=Ft,ve[8]=Pt,ve[9]=Lt,ve[10]=Ut,ve[11]=Yt,ve[12]=Zt,ve[13]=Kt,ve[14]=ee,ve[15]=ne,le._markAsUpdated()}static FromValues(T,A,E,O,k,B,_t,Ft,Pt,Lt,Ut,Yt,Zt,Kt,ee,ne){const le=new Dt,ve=le._m;return ve[0]=T,ve[1]=A,ve[2]=E,ve[3]=O,ve[4]=k,ve[5]=B,ve[6]=_t,ve[7]=Ft,ve[8]=Pt,ve[9]=Lt,ve[10]=Ut,ve[11]=Yt,ve[12]=Zt,ve[13]=Kt,ve[14]=ee,ve[15]=ne,le._markAsUpdated(),le}static Compose(T,A,E){const O=new Dt;return Dt.ComposeToRef(T,A,E,O),O}static ComposeToRef(T,A,E,O){Dt.ScalingToRef(T.x,T.y,T.z,_n.MathTmp.Matrix[1]),A.toRotationMatrix(_n.MathTmp.Matrix[0]),_n.MathTmp.Matrix[1].multiplyToRef(_n.MathTmp.Matrix[0],O),O.setTranslation(E)}static Identity(){const T=Dt.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return T._updateIdentityStatus(!0),T}static IdentityToRef(T){Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,T),T._updateIdentityStatus(!0)}static Zero(){const T=Dt.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return T._updateIdentityStatus(!1),T}static RotationX(T){const A=new Dt;return Dt.RotationXToRef(T,A),A}static Invert(T){const A=new Dt;return T.invertToRef(A),A}static RotationXToRef(T,A){const E=Math.sin(T),O=Math.cos(T);Dt.FromValuesToRef(1,0,0,0,0,O,E,0,0,-E,O,0,0,0,0,1,A),A._updateIdentityStatus(1===O&&0===E)}static RotationY(T){const A=new Dt;return Dt.RotationYToRef(T,A),A}static RotationYToRef(T,A){const E=Math.sin(T),O=Math.cos(T);Dt.FromValuesToRef(O,0,-E,0,0,1,0,0,E,0,O,0,0,0,0,1,A),A._updateIdentityStatus(1===O&&0===E)}static RotationZ(T){const A=new Dt;return Dt.RotationZToRef(T,A),A}static RotationZToRef(T,A){const E=Math.sin(T),O=Math.cos(T);Dt.FromValuesToRef(O,E,0,0,-E,O,0,0,0,0,1,0,0,0,0,1,A),A._updateIdentityStatus(1===O&&0===E)}static RotationAxis(T,A){const E=new Dt;return Dt.RotationAxisToRef(T,A,E),E}static RotationAxisToRef(T,A,E){const O=Math.sin(-A),k=Math.cos(-A),B=1-k;T.normalize();const _t=E._m;_t[0]=T.x*T.x*B+k,_t[1]=T.x*T.y*B-T.z*O,_t[2]=T.x*T.z*B+T.y*O,_t[3]=0,_t[4]=T.y*T.x*B+T.z*O,_t[5]=T.y*T.y*B+k,_t[6]=T.y*T.z*B-T.x*O,_t[7]=0,_t[8]=T.z*T.x*B-T.y*O,_t[9]=T.z*T.y*B+T.x*O,_t[10]=T.z*T.z*B+k,_t[11]=0,_t[12]=0,_t[13]=0,_t[14]=0,_t[15]=1,E._markAsUpdated()}static RotationYawPitchRoll(T,A,E){const O=new Dt;return Dt.RotationYawPitchRollToRef(T,A,E,O),O}static RotationYawPitchRollToRef(T,A,E,O){An.Quaternion.RotationYawPitchRollToRef(T,A,E,_n.MathTmp.Quaternion[0]),_n.MathTmp.Quaternion[0].toRotationMatrix(O)}static Scaling(T,A,E){const O=new Dt;return Dt.ScalingToRef(T,A,E,O),O}static ScalingToRef(T,A,E,O){Dt.FromValuesToRef(T,0,0,0,0,A,0,0,0,0,E,0,0,0,0,1,O),O._updateIdentityStatus(1===T&&1===A&&1===E)}static Translation(T,A,E){const O=new Dt;return Dt.TranslationToRef(T,A,E,O),O}static TranslationToRef(T,A,E,O){Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,T,A,E,1,O),O._updateIdentityStatus(0===T&&0===A&&0===E)}static Lerp(T,A,E){const O=new Dt;return Dt.LerpToRef(T,A,E,O),O}static LerpToRef(T,A,E,O){for(let k=0;k<16;k++)O._m[k]=T._m[k]*(1-E)+A._m[k]*E;O._markAsUpdated()}static DecomposeLerp(T,A,E){const O=new Dt;return Dt.DecomposeLerpToRef(T,A,E,O),O}static DecomposeLerpToRef(T,A,E,O){const k=_n.MathTmp.Vector3[0],B=_n.MathTmp.Quaternion[0],_t=_n.MathTmp.Vector3[1];T.decompose(k,B,_t);const Ft=_n.MathTmp.Vector3[2],Pt=_n.MathTmp.Quaternion[1],Lt=_n.MathTmp.Vector3[3];A.decompose(Ft,Pt,Lt);const Ut=_n.MathTmp.Vector3[4];xn.Vector3.LerpToRef(k,Ft,E,Ut);const Yt=_n.MathTmp.Quaternion[2];An.Quaternion.SlerpToRef(B,Pt,E,Yt);const Zt=_n.MathTmp.Vector3[5];xn.Vector3.LerpToRef(_t,Lt,E,Zt),Dt.ComposeToRef(Ut,Yt,Zt,O)}static LookAtLH(T,A,E){const O=new Dt;return Dt.LookAtLHToRef(T,A,E,O),O}static LookAtLHToRef(T,A,E,O){const k=_n.MathTmp.Vector3[0],B=_n.MathTmp.Vector3[1],_t=_n.MathTmp.Vector3[2];A.subtractToRef(T,_t),_t.normalize(),xn.Vector3.CrossToRef(E,_t,k);const Ft=k.lengthSquared();0===Ft?k.x=1:k.normalizeFromLength(Math.sqrt(Ft)),xn.Vector3.CrossToRef(_t,k,B),B.normalize();const Pt=-xn.Vector3.Dot(k,T),Lt=-xn.Vector3.Dot(B,T),Ut=-xn.Vector3.Dot(_t,T);Dt.FromValuesToRef(k.x,B.x,_t.x,0,k.y,B.y,_t.y,0,k.z,B.z,_t.z,0,Pt,Lt,Ut,1,O)}static LookAtRH(T,A,E){const O=new Dt;return Dt.LookAtRHToRef(T,A,E,O),O}static LookAtRHToRef(T,A,E,O){const k=_n.MathTmp.Vector3[0],B=_n.MathTmp.Vector3[1],_t=_n.MathTmp.Vector3[2];T.subtractToRef(A,_t),_t.normalize(),xn.Vector3.CrossToRef(E,_t,k);const Ft=k.lengthSquared();0===Ft?k.x=1:k.normalizeFromLength(Math.sqrt(Ft)),xn.Vector3.CrossToRef(_t,k,B),B.normalize();const Pt=-xn.Vector3.Dot(k,T),Lt=-xn.Vector3.Dot(B,T),Ut=-xn.Vector3.Dot(_t,T);Dt.FromValuesToRef(k.x,B.x,_t.x,0,k.y,B.y,_t.y,0,k.z,B.z,_t.z,0,Pt,Lt,Ut,1,O)}static OrthoLH(T,A,E,O){const k=new Dt;return Dt.OrthoLHToRef(T,A,E,O,k),k}static OrthoLHToRef(T,A,E,O,k){const B=2/T,_t=2/A,Ft=2/(O-E),Pt=-(O+E)/(O-E);Dt.FromValuesToRef(B,0,0,0,0,_t,0,0,0,0,Ft,0,0,0,Pt,1,k),k._updateIdentityStatus(1===B&&1===_t&&1===Ft&&0===Pt)}static OrthoOffCenterLH(T,A,E,O,k,B){const _t=new Dt;return Dt.OrthoOffCenterLHToRef(T,A,E,O,k,B,_t),_t}static OrthoOffCenterLHToRef(T,A,E,O,k,B,_t){const Ft=2/(A-T),Pt=2/(O-E),Lt=2/(B-k),Ut=-(B+k)/(B-k),Yt=(T+A)/(T-A),Zt=(O+E)/(E-O);Dt.FromValuesToRef(Ft,0,0,0,0,Pt,0,0,0,0,Lt,0,Yt,Zt,Ut,1,_t),_t._markAsUpdated()}static OrthoOffCenterRH(T,A,E,O,k,B){const _t=new Dt;return Dt.OrthoOffCenterRHToRef(T,A,E,O,k,B,_t),_t}static OrthoOffCenterRHToRef(T,A,E,O,k,B,_t){Dt.OrthoOffCenterLHToRef(T,A,E,O,k,B,_t),_t._m[10]*=-1}static PerspectiveLH(T,A,E,O){const k=new Dt,B=2*E/T,_t=2*E/A,Ft=(O+E)/(O-E),Pt=-2*O*E/(O-E);return Dt.FromValuesToRef(B,0,0,0,0,_t,0,0,0,0,Ft,1,0,0,Pt,0,k),k._updateIdentityStatus(!1),k}static PerspectiveFovLH(T,A,E,O){const k=new Dt;return Dt.PerspectiveFovLHToRef(T,A,E,O,k),k}static PerspectiveFovLHToRef(T,A,E,O,k,B=!0){const _t=E,Ft=O,Pt=1/Math.tan(.5*T),Lt=B?Pt/A:Pt,Ut=B?Pt:Pt*A,Yt=(Ft+_t)/(Ft-_t),Zt=-2*Ft*_t/(Ft-_t);Dt.FromValuesToRef(Lt,0,0,0,0,Ut,0,0,0,0,Yt,1,0,0,Zt,0,k),k._updateIdentityStatus(!1)}static PerspectiveFovRH(T,A,E,O){const k=new Dt;return Dt.PerspectiveFovRHToRef(T,A,E,O,k),k}static PerspectiveFovRHToRef(T,A,E,O,k,B=!0){const _t=E,Ft=O,Pt=1/Math.tan(.5*T),Lt=B?Pt/A:Pt,Ut=B?Pt:Pt*A,Yt=-(Ft+_t)/(Ft-_t),Zt=-2*Ft*_t/(Ft-_t);Dt.FromValuesToRef(Lt,0,0,0,0,Ut,0,0,0,0,Yt,-1,0,0,Zt,0,k),k._updateIdentityStatus(!1)}static PerspectiveFovWebVRToRef(T,A,E,O,k=!1){const B=k?-1:1,_t=Math.tan(T.upDegrees*Math.PI/180),Ft=Math.tan(T.downDegrees*Math.PI/180),Pt=Math.tan(T.leftDegrees*Math.PI/180),Lt=Math.tan(T.rightDegrees*Math.PI/180),Ut=2/(Pt+Lt),Yt=2/(_t+Ft),Zt=O._m;Zt[0]=Ut,Zt[1]=Zt[2]=Zt[3]=Zt[4]=0,Zt[5]=Yt,Zt[6]=Zt[7]=0,Zt[8]=(Pt-Lt)*Ut*.5,Zt[9]=-(_t-Ft)*Yt*.5,Zt[10]=-E/(A-E),Zt[11]=1*B,Zt[12]=Zt[13]=Zt[15]=0,Zt[14]=-2*E*A/(E-A),O._markAsUpdated()}static GetAsMatrix2x2(T){return[T._m[0],T._m[1],T._m[4],T._m[5]]}static GetAsMatrix3x3(T){return[T._m[0],T._m[1],T._m[2],T._m[4],T._m[5],T._m[6],T._m[8],T._m[9],T._m[10]]}static Transpose(T){const A=new Dt;return Dt.TransposeToRef(T,A),A}static TransposeToRef(T,A){const E=A._m,O=T._m;E[0]=O[0],E[1]=O[4],E[2]=O[8],E[3]=O[12],E[4]=O[1],E[5]=O[5],E[6]=O[9],E[7]=O[13],E[8]=O[2],E[9]=O[6],E[10]=O[10],E[11]=O[14],E[12]=O[3],E[13]=O[7],E[14]=O[11],E[15]=O[15],A._updateIdentityStatus(T._isIdentity,T._isIdentityDirty)}static Reflection(T){const A=new Dt;return Dt.ReflectionToRef(T,A),A}static ReflectionToRef(T,A){T.normalize();const E=T.normal.x,O=T.normal.y,k=T.normal.z,B=-2*E,_t=-2*O,Ft=-2*k;Dt.FromValuesToRef(B*E+1,_t*E,Ft*E,0,B*O,_t*O+1,Ft*O,0,B*k,_t*k,Ft*k+1,0,B*T.d,_t*T.d,Ft*T.d,1,A)}static FromXYZAxesToRef(T,A,E,O){Dt.FromValuesToRef(T.x,T.y,T.z,0,A.x,A.y,A.z,0,E.x,E.y,E.z,0,0,0,0,1,O)}static FromQuaternionToRef(T,A){const E=T.x*T.x,O=T.y*T.y,k=T.z*T.z,B=T.x*T.y,_t=T.z*T.w,Ft=T.z*T.x,Pt=T.y*T.w,Lt=T.y*T.z,Ut=T.x*T.w;A._m[0]=1-2*(O+k),A._m[1]=2*(B+_t),A._m[2]=2*(Ft-Pt),A._m[3]=0,A._m[4]=2*(B-_t),A._m[5]=1-2*(k+E),A._m[6]=2*(Lt+Ut),A._m[7]=0,A._m[8]=2*(Ft+Pt),A._m[9]=2*(Lt-Ut),A._m[10]=1-2*(O+E),A._m[11]=0,A._m[12]=0,A._m[13]=0,A._m[14]=0,A._m[15]=1,A._markAsUpdated()}_markAsUpdated(){this.updateFlag=Dt._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0}isIdentity(){if(this._isIdentityDirty){this._isIdentityDirty=!1;const T=this._m;this._isIdentity=1===T[0]&&0===T[1]&&0===T[2]&&0===T[3]&&0===T[4]&&1===T[5]&&0===T[6]&&0===T[7]&&0===T[8]&&0===T[9]&&1===T[10]&&0===T[11]&&0===T[12]&&0===T[13]&&0===T[14]&&1===T[15]}return this._isIdentity}isIdentityAs3x2(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2}determinant(){if(!0===this._isIdentity)return 1;const T=this._m,A=T[0],E=T[1],O=T[2],k=T[3],B=T[4],_t=T[5],Ft=T[6],Pt=T[7],Lt=T[8],Ut=T[9],Yt=T[10],Zt=T[11],Kt=T[12],ee=T[13],ne=T[14],le=T[15],ve=Yt*le-ne*Zt,Se=Ut*le-ee*Zt,Ce=Ut*ne-ee*Yt,Ie=Lt*le-Kt*Zt,Re=Lt*ne-Yt*Kt,Fe=Lt*ee-Kt*Ut;return A*+(_t*ve-Ft*Se+Pt*Ce)+E*-(B*ve-Ft*Ie+Pt*Re)+O*+(B*Se-_t*Ie+Pt*Fe)+k*-(B*Ce-_t*Re+Ft*Fe)}toArray(){return this._m}asArray(){return this._m}invert(){return this.invertToRef(this),this}reset(){return Dt.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this}add(T){const A=new Dt;return this.addToRef(T,A),A}addToRef(T,A){for(let E=0;E<16;E++)A._m[E]=this._m[E]+T._m[E];return A._markAsUpdated(),this}addToSelf(T){for(let A=0;A<16;A++)this._m[A]+=T._m[A];return this._markAsUpdated(),this}invertToRef(T){if(!0===this._isIdentity)return Dt.IdentityToRef(T),this;const A=this._m,E=A[0],O=A[1],k=A[2],B=A[3],_t=A[4],Ft=A[5],Pt=A[6],Lt=A[7],Ut=A[8],Yt=A[9],Zt=A[10],Kt=A[11],ee=A[12],ne=A[13],le=A[14],ve=A[15],Se=Zt*ve-le*Kt,Ce=Yt*ve-ne*Kt,Ie=Yt*le-ne*Zt,Re=Ut*ve-ee*Kt,Fe=Ut*le-Zt*ee,Ne=Ut*ne-ee*Yt,Pe=+(Ft*Se-Pt*Ce+Lt*Ie),Le=-(_t*Se-Pt*Re+Lt*Fe),Ue=+(_t*Ce-Ft*Re+Lt*Ne),He=-(_t*Ie-Ft*Fe+Pt*Ne),Ve=E*Pe+O*Le+k*Ue+B*He;if(0===Ve)return T.copyFrom(this),this;const We=1/Ve,Ge=Pt*ve-le*Lt,qe=Ft*ve-ne*Lt,Xe=Ft*le-ne*Pt,Ye=_t*ve-ee*Lt,$e=_t*le-ee*Pt,Je=_t*ne-ee*Ft,Qe=Pt*Kt-Zt*Lt,Ze=Ft*Kt-Yt*Lt,tn=Ft*Zt-Yt*Pt,nn=_t*Kt-Ut*Lt,on=_t*Zt-Ut*Pt,rn=_t*Yt-Ut*Ft,sn=-(O*Se-k*Ce+B*Ie),an=+(E*Se-k*Re+B*Fe),cn=-(E*Ce-O*Re+B*Ne),ln=+(E*Ie-O*Fe+k*Ne),un=+(O*Ge-k*qe+B*Xe),hn=-(E*Ge-k*Ye+B*$e),pn=+(E*qe-O*Ye+B*Je),dn=-(E*Xe-O*$e+k*Je),fn=-(O*Qe-k*Ze+B*tn),yn=+(E*Qe-k*nn+B*on),gn=-(E*Ze-O*nn+B*rn),mn=+(E*tn-O*on+k*rn);return Dt.FromValuesToRef(Pe*We,sn*We,un*We,fn*We,Le*We,an*We,hn*We,yn*We,Ue*We,cn*We,pn*We,gn*We,He*We,ln*We,dn*We,mn*We,T),this}addAtIndex(T,A){return this._m[T]+=A,this._markAsUpdated(),this}multiplyAtIndex(T,A){return this._m[T]*=A,this._markAsUpdated(),this}setTranslationFromFloats(T,A,E){return this._m[12]=T,this._m[13]=A,this._m[14]=E,this._markAsUpdated(),this}setTranslation(T){return this.setTranslationFromFloats(T.x,T.y,T.z)}getTranslation(){return new xn.Vector3(this._m[12],this._m[13],this._m[14])}getTranslationToRef(T){return T.x=this._m[12],T.y=this._m[13],T.z=this._m[14],this}removeRotationAndScaling(){const T=this.m;return Dt.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,T[12],T[13],T[14],T[15],this),this._updateIdentityStatus(0===T[12]&&0===T[13]&&0===T[14]&&1===T[15]),this}multiply(T){const A=new Dt;return this.multiplyToRef(T,A),A}copyFrom(T){T.copyToArray(this._m);const A=T;return this._updateIdentityStatus(A._isIdentity,A._isIdentityDirty,A._isIdentity3x2,A._isIdentity3x2Dirty),this}copyToArray(T,A=0){for(let E=0;E<16;E++)T[A+E]=this._m[E];return this}multiplyToRef(T,A){return this._isIdentity?(A.copyFrom(T),this):T._isIdentity?(A.copyFrom(this),this):(this.multiplyToArray(T,A._m,0),A._markAsUpdated(),this)}multiplyToArray(T,A,E){const O=this._m,k=T.m,B=O[0],_t=O[1],Ft=O[2],Pt=O[3],Lt=O[4],Ut=O[5],Yt=O[6],Zt=O[7],Kt=O[8],ee=O[9],ne=O[10],le=O[11],ve=O[12],Se=O[13],Ce=O[14],Ie=O[15],Re=k[0],Fe=k[1],Ne=k[2],Pe=k[3],Le=k[4],Ue=k[5],He=k[6],Ve=k[7],We=k[8],Ge=k[9],qe=k[10],Xe=k[11],Ye=k[12],$e=k[13],Je=k[14],Qe=k[15];return A[E]=B*Re+_t*Le+Ft*We+Pt*Ye,A[E+1]=B*Fe+_t*Ue+Ft*Ge+Pt*$e,A[E+2]=B*Ne+_t*He+Ft*qe+Pt*Je,A[E+3]=B*Pe+_t*Ve+Ft*Xe+Pt*Qe,A[E+4]=Lt*Re+Ut*Le+Yt*We+Zt*Ye,A[E+5]=Lt*Fe+Ut*Ue+Yt*Ge+Zt*$e,A[E+6]=Lt*Ne+Ut*He+Yt*qe+Zt*Je,A[E+7]=Lt*Pe+Ut*Ve+Yt*Xe+Zt*Qe,A[E+8]=Kt*Re+ee*Le+ne*We+le*Ye,A[E+9]=Kt*Fe+ee*Ue+ne*Ge+le*$e,A[E+10]=Kt*Ne+ee*He+ne*qe+le*Je,A[E+11]=Kt*Pe+ee*Ve+ne*Xe+le*Qe,A[E+12]=ve*Re+Se*Le+Ce*We+Ie*Ye,A[E+13]=ve*Fe+Se*Ue+Ce*Ge+Ie*$e,A[E+14]=ve*Ne+Se*He+Ce*qe+Ie*Je,A[E+15]=ve*Pe+Se*Ve+Ce*Xe+Ie*Qe,this}equals(T){const A=T;if(!A)return!1;if((this._isIdentity||A._isIdentity)&&!this._isIdentityDirty&&!A._isIdentityDirty)return this._isIdentity&&A._isIdentity;const E=this.m,O=A.m;return E[0]===O[0]&&E[1]===O[1]&&E[2]===O[2]&&E[3]===O[3]&&E[4]===O[4]&&E[5]===O[5]&&E[6]===O[6]&&E[7]===O[7]&&E[8]===O[8]&&E[9]===O[9]&&E[10]===O[10]&&E[11]===O[11]&&E[12]===O[12]&&E[13]===O[13]&&E[14]===O[14]&&E[15]===O[15]}clone(){const T=new Dt;return T.copyFrom(this),T}getClassName(){return"Matrix"}getHashCode(){let T=this._m[0]||0;for(let A=1;A<16;A++)T=397*T^(this._m[A]||0);return T}decompose(T,A,E){if(this._isIdentity)return E&&E.setAll(0),T&&T.setAll(1),A&&A.copyFromFloats(0,0,0,1),!0;const O=this._m;E&&E.copyFromFloats(O[12],O[13],O[14]);const k=T||_n.MathTmp.Vector3[0];if(k.x=Math.sqrt(O[0]*O[0]+O[1]*O[1]+O[2]*O[2]),k.y=Math.sqrt(O[4]*O[4]+O[5]*O[5]+O[6]*O[6]),k.z=Math.sqrt(O[8]*O[8]+O[9]*O[9]+O[10]*O[10]),this.determinant()<=0&&(k.y*=-1),0===k.x||0===k.y||0===k.z)return A&&A.copyFromFloats(0,0,0,1),!1;if(A){const T=1/k.x,E=1/k.y,B=1/k.z;Dt.FromValuesToRef(O[0]*T,O[1]*T,O[2]*T,0,O[4]*E,O[5]*E,O[6]*E,0,O[8]*B,O[9]*B,O[10]*B,0,0,0,0,1,_n.MathTmp.Matrix[0]),An.Quaternion.FromRotationMatrixToRef(_n.MathTmp.Matrix[0],A)}return!0}getRow(T){if(T<0||T>3)return null;const A=4*T;return new Sn.Vector4(this._m[A+0],this._m[A+1],this._m[A+2],this._m[A+3])}setRow(T,A){return this.setRowFromFloats(T,A.x,A.y,A.z,A.w)}transpose(){return Dt.Transpose(this)}transposeToRef(T){return Dt.TransposeToRef(this,T),this}setRowFromFloats(T,A,E,O,k){if(T<0||T>3)return this;const B=4*T;return this._m[B+0]=A,this._m[B+1]=E,this._m[B+2]=O,this._m[B+3]=k,this._markAsUpdated(),this}scale(T){const A=new Dt;return this.scaleToRef(T,A),A}scaleToRef(T,A){for(let E=0;E<16;E++)A._m[E]=this._m[E]*T;return A._markAsUpdated(),this}scaleAndAddToRef(T,A){for(let E=0;E<16;E++)A._m[E]+=this._m[E]*T;return A._markAsUpdated(),this}toNormalMatrix(T){const A=_n.MathTmp.Matrix[0];this.invertToRef(A),A.transposeToRef(T);const E=T._m;Dt.FromValuesToRef(E[0],E[1],E[2],0,E[4],E[5],E[6],0,E[8],E[9],E[10],0,0,0,0,1,T)}getRotationMatrix(){const T=new Dt;return this.getRotationMatrixToRef(T),T}getRotationMatrixToRef(T){const A=_n.MathTmp.Vector3[0];if(!this.decompose(A))return Dt.IdentityToRef(T),this;const E=this._m,O=1/A.x,k=1/A.y,B=1/A.z;return Dt.FromValuesToRef(E[0]*O,E[1]*O,E[2]*O,0,E[4]*k,E[5]*k,E[6]*k,0,E[8]*B,E[9]*B,E[10]*B,0,0,0,0,1,T),this}toggleModelMatrixHandInPlace(){const T=this._m;T[2]*=-1,T[6]*=-1,T[8]*=-1,T[9]*=-1,T[14]*=-1,this._markAsUpdated()}toggleProjectionMatrixHandInPlace(){const T=this._m;T[8]*=-1,T[9]*=-1,T[10]*=-1,T[11]*=-1,this._markAsUpdated()}_updateIdentityStatus(T,A=!1,E=!1,O=!0){this.updateFlag=Dt._updateFlagSeed++,this._isIdentity=T,this._isIdentity3x2=T||E,this._isIdentityDirty=!this._isIdentity&&A,this._isIdentity3x2Dirty=!this._isIdentity3x2&&O}}gn.Matrix=Dt,Dt._updateFlagSeed=0,Dt._identityReadOnly=Dt.Identity(),Object.defineProperty(yn,"__esModule",{value:!0}),yn.Quaternion=void 0;const En=gn,Cn=fn,In=pn,Rn=hn,On=vn;class jt{constructor(T=0,A=0,E=0,O=1){this.x=T,this.y=A,this.z=E,this.w=O}static FromRotationMatrix(T){const A=new jt;return jt.FromRotationMatrixToRef(T,A),A}static FromRotationMatrixToRef(T,A){const E=T.m,O=E[0],k=E[4],B=E[8],_t=E[1],Ft=E[5],Pt=E[9],Lt=E[2],Ut=E[6],Yt=E[10],Zt=O+Ft+Yt;let Kt;Zt>0?(Kt=.5/Math.sqrt(Zt+1),A.w=.25/Kt,A.x=(Ut-Pt)*Kt,A.y=(B-Lt)*Kt,A.z=(_t-k)*Kt):O>Ft&&O>Yt?(Kt=2*Math.sqrt(1+O-Ft-Yt),A.w=(Ut-Pt)/Kt,A.x=.25*Kt,A.y=(k+_t)/Kt,A.z=(B+Lt)/Kt):Ft>Yt?(Kt=2*Math.sqrt(1+Ft-O-Yt),A.w=(B-Lt)/Kt,A.x=(k+_t)/Kt,A.y=.25*Kt,A.z=(Pt+Ut)/Kt):(Kt=2*Math.sqrt(1+Yt-O-Ft),A.w=(_t-k)/Kt,A.x=(B+Lt)/Kt,A.y=(Pt+Ut)/Kt,A.z=.25*Kt)}static Dot(T,A){return T.x*A.x+T.y*A.y+T.z*A.z+T.w*A.w}static AreClose(T,A){return jt.Dot(T,A)>=0}static Zero(){return new jt(0,0,0,0)}static Inverse(T){return new jt(-T.x,-T.y,-T.z,T.w)}static IsIdentity(T){return T&&0===T.x&&0===T.y&&0===T.z&&1===T.w}static RotationAxis(T,A){const E=A*Rn.DEG2RAD;return jt.RotationAxisToRef(T,E,new jt)}static RotationAxisToRef(T,A,E){const O=A*Rn.DEG2RAD,k=Math.sin(O/2);return T.normalize(),E.w=Math.cos(O/2),E.x=T.x*k,E.y=T.y*k,E.z=T.z*k,E}static FromArray(T,A=0){return new jt(T[A],T[A+1],T[A+2],T[A+3])}static FromEulerAnglesRef(T,A,E,O){return jt.RotationYawPitchRollToRef(A*Rn.DEG2RAD,T*Rn.DEG2RAD,E*Rn.DEG2RAD,O)}static RotationYawPitchRoll(T,A,E){const O=new jt;return jt.RotationYawPitchRollToRef(T,A,E,O),O}static RotationYawPitchRollToRef(T,A,E,O){const k=.5*A,B=.5*T,_t=.5*E,Ft=Math.cos(k),Pt=Math.cos(B),Lt=Math.cos(_t),Ut=Math.sin(k),Yt=Math.sin(B),Zt=Math.sin(_t);O.x=Pt*Ut*Lt+Yt*Ft*Zt,O.y=Yt*Ft*Lt-Pt*Ut*Zt,O.z=Pt*Ft*Zt-Yt*Ut*Lt,O.w=Pt*Ft*Lt+Yt*Ut*Zt}static RotationAlphaBetaGamma(T,A,E){const O=new jt;return jt.RotationAlphaBetaGammaToRef(T,A,E,O),O}static RotationAlphaBetaGammaToRef(T,A,E,O){const k=.5*(E+T),B=.5*(E-T),_t=.5*A;O.x=Math.cos(B)*Math.sin(_t),O.y=Math.sin(B)*Math.sin(_t),O.z=Math.sin(k)*Math.cos(_t),O.w=Math.cos(k)*Math.cos(_t)}static RotationQuaternionFromAxis(T,A,E){const O=new jt(0,0,0,0);return jt.RotationQuaternionFromAxisToRef(T,A,E,O),O}static RotationQuaternionFromAxisToRef(T,A,E,O){const k=In.MathTmp.Matrix[0];En.Matrix.FromXYZAxesToRef(T.normalize(),A.normalize(),E.normalize(),k),jt.FromRotationMatrixToRef(k,O)}static Slerp(T,A,E){const O=jt.Identity;return jt.SlerpToRef(T,A,E,O),O}static SlerpToRef(T,A,E,O){let k,B,_t=T.x*A.x+T.y*A.y+T.z*A.z+T.w*A.w,Ft=!1;if(_t<0&&(Ft=!0,_t=-_t),_t>.999999)B=1-E,k=Ft?-E:E;else{const T=Math.acos(_t),A=1/Math.sin(T);B=Math.sin((1-E)*T)*A,k=Ft?-Math.sin(E*T)*A:Math.sin(E*T)*A}O.x=B*T.x+k*A.x,O.y=B*T.y+k*A.y,O.z=B*T.z+k*A.z,O.w=B*T.w+k*A.w}static Hermite(T,A,E,O,k){const B=k*k,_t=k*B,Ft=2*_t-3*B+1,Pt=-2*_t+3*B,Lt=_t-2*B+k,Ut=_t-B,Yt=T.x*Ft+E.x*Pt+A.x*Lt+O.x*Ut,Zt=T.y*Ft+E.y*Pt+A.y*Lt+O.y*Ut,Kt=T.z*Ft+E.z*Pt+A.z*Lt+O.z*Ut,ee=T.w*Ft+E.w*Pt+A.w*Lt+O.w*Ut;return new jt(Yt,Zt,Kt,ee)}static get Identity(){return new jt(0,0,0,1)}static Angle(T,A){const E=jt.Dot(T,A);return 2*Math.acos(Math.min(Math.abs(E),1))*Rn.RAD2DEG}static Euler(T,A,E){return jt.RotationYawPitchRoll(A*Rn.DEG2RAD,T*Rn.DEG2RAD,E*Rn.DEG2RAD)}static LookRotation(T,A=In.MathTmp.staticUp){const E=Cn.Vector3.Normalize(T),O=Cn.Vector3.Normalize(Cn.Vector3.Cross(A,E)),k=Cn.Vector3.Cross(E,O),B=O.x,_t=O.y,Ft=O.z,Pt=k.x,Lt=k.y,Ut=k.z,Yt=E.x,Zt=E.y,Kt=E.z,ee=B+Lt+Kt,ne=new jt;if(ee>0){let T=Math.sqrt(ee+1);return ne.w=.5*T,T=.5/T,ne.x=(Ut-Zt)*T,ne.y=(Yt-Ft)*T,ne.z=(_t-Pt)*T,ne}if(B>=Lt&&B>=Kt){const T=Math.sqrt(1+B-Lt-Kt),A=.5/T;return ne.x=.5*T,ne.y=(_t+Pt)*A,ne.z=(Ft+Yt)*A,ne.w=(Ut-Zt)*A,ne}if(Lt>Kt){const T=Math.sqrt(1+Lt-B-Kt),A=.5/T;return ne.x=(Pt+_t)*A,ne.y=.5*T,ne.z=(Zt+Ut)*A,ne.w=(Yt-Ft)*A,ne}const le=Math.sqrt(1+Kt-B-Lt),ve=.5/le;return ne.x=(Yt+Ft)*ve,ne.y=(Zt+Ut)*ve,ne.z=.5*le,ne.w=(_t-Pt)*ve,ne}static RotateTowards(T,A,E){const O=jt.Angle(T,A);if(0===O)return A;const k=Math.min(1,E/O);return jt.Slerp(T,A,k)}static FromToRotation(T,A,E=In.MathTmp.staticUp){const O=T.normalize(),k=A.normalize(),B=Cn.Vector3.Cross(O,k),_t=Math.sqrt(O.lengthSquared()*k.lengthSquared())+Cn.Vector3.Dot(O,k);return B.lengthSquared()<1e-4?Math.abs(_t)<1e-4?new jt(E.x,E.y,E.z,0).normalized:jt.Identity:new jt(B.x,B.y,B.z,_t).normalized}get normalized(){return this.normalize()}setFromToRotation(T,A,E=In.MathTmp.staticUp){const O=jt.FromToRotation(T,A,E);this.x=O.x,this.y=O.y,this.z=O.z,this.w=O.w}set eulerAngles(T){this.setEuler(T.x,T.y,T.z)}get eulerAngles(){const T=new Cn.Vector3,A=this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w,E=this.x*this.w-this.y*this.z;return E>.4995*A?(T.x=Math.PI/2,T.y=2*Math.atan2(this.y,this.x),T.z=0):E<-.4995*A?(T.x=-Math.PI/2,T.y=-2*Math.atan2(this.y,this.x),T.z=0):(T.x=Math.asin(2*(this.w*this.x-this.y*this.z)),T.y=Math.atan2(2*this.w*this.y+2*this.z*this.x,1-2*(this.x*this.x+this.y*this.y)),T.z=Math.atan2(2*this.w*this.z+2*this.x*this.y,1-2*(this.z*this.z+this.x*this.x))),T.x*=Rn.RAD2DEG,T.y*=Rn.RAD2DEG,T.z*=Rn.RAD2DEG,T.x=On.Scalar.Repeat(T.x,360),T.y=On.Scalar.Repeat(T.y,360),T.z=On.Scalar.Repeat(T.z,360),T}toString(){return`(${this.x}, ${this.y}, ${this.z}, ${this.w})`}get length(){return Math.sqrt(this.lengthSquared)}get lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}getClassName(){return"Quaternion"}getHashCode(){let T=this.x||0;return T=397*T^(this.y||0),T=397*T^(this.z||0),T=397*T^(this.w||0),T}asArray(){return[this.x,this.y,this.z,this.w]}equals(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z&&this.w===T.w}clone(){return new jt(this.x,this.y,this.z,this.w)}copyFrom(T){return this.x=T.x,this.y=T.y,this.z=T.z,this.w=T.w,this}copyFromFloats(T,A,E,O){return this.x=T,this.y=A,this.z=E,this.w=O,this}set(T,A,E,O){return this.copyFromFloats(T,A,E,O)}setEuler(T,A,E){return jt.RotationYawPitchRollToRef(A*Rn.DEG2RAD,T*Rn.DEG2RAD,E*Rn.DEG2RAD,this),this}add(T){return new jt(this.x+T.x,this.y+T.y,this.z+T.z,this.w+T.w)}addInPlace(T){return this.x+=T.x,this.y+=T.y,this.z+=T.z,this.w+=T.w,this}subtract(T){return new jt(this.x-T.x,this.y-T.y,this.z-T.z,this.w-T.w)}scale(T){return new jt(this.x*T,this.y*T,this.z*T,this.w*T)}scaleToRef(T,A){return A.x=this.x*T,A.y=this.y*T,A.z=this.z*T,A.w=this.w*T,this}scaleInPlace(T){return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this}scaleAndAddToRef(T,A){return A.x+=this.x*T,A.y+=this.y*T,A.z+=this.z*T,A.w+=this.w*T,this}multiply(T){const A=new jt(0,0,0,1);return this.multiplyToRef(T,A),A}multiplyToRef(T,A){const E=this.x*T.w+this.y*T.z-this.z*T.y+this.w*T.x,O=-this.x*T.z+this.y*T.w+this.z*T.x+this.w*T.y,k=this.x*T.y-this.y*T.x+this.z*T.w+this.w*T.z,B=-this.x*T.x-this.y*T.y-this.z*T.z+this.w*T.w;return A.copyFromFloats(E,O,k,B),this}multiplyInPlace(T){return this.multiplyToRef(T,this),this}conjugateToRef(T){return T.copyFromFloats(-this.x,-this.y,-this.z,this.w),this}conjugateInPlace(){return this.x*=-1,this.y*=-1,this.z*=-1,this}conjugate(){return new jt(-this.x,-this.y,-this.z,this.w)}normalize(){const T=1/this.length;return this.x*=T,this.y*=T,this.z*=T,this.w*=T,this}angleAxis(T,A){if(0===A.lengthSquared())return jt.Identity;const E=jt.Identity;let O=T*Rn.DEG2RAD;O*=.5;let k=A.normalize();return k=A.scaleInPlace(Math.sin(O)),E.x=k.x,E.y=k.y,E.z=k.z,E.w=Math.cos(O),E.normalize()}toRotationMatrix(T){return En.Matrix.FromQuaternionToRef(this,T),this}fromRotationMatrix(T){return jt.FromRotationMatrixToRef(T,this),this}}yn.Quaternion=jt,Object.defineProperty(fn,"__esModule",{value:!0}),fn.Vector3=void 0;const Fn=pn,Nn=hn,kn=yn,Pn=vn;class Xt{constructor(T=0,A=0,E=0){this.x=T,this.y=A,this.z=E}get isNonUniform(){const T=Math.abs(this.x),A=Math.abs(this.y);if(T!==A)return!0;const E=Math.abs(this.z);return T!==E||A!==E}static Add(T,A){return new Xt(T.x,T.y,T.z).addInPlace(A)}static GetClipFactor(T,A,E,O){const k=Xt.Dot(T,E)-O;return k/(k-(Xt.Dot(A,E)-O))}static GetAngleBetweenVectors(T,A,E){const O=T.normalizeToRef(Fn.MathTmp.Vector3[1]),k=A.normalizeToRef(Fn.MathTmp.Vector3[2]),B=Xt.Dot(O,k),_t=Fn.MathTmp.Vector3[3];return Xt.CrossToRef(O,k,_t),Xt.Dot(_t,E)>0?Math.acos(B):-Math.acos(B)}static FromArray(T,A=0){return new Xt(T[A],T[A+1],T[A+2])}static FromFloatArray(T,A){return Xt.FromArray(T,A)}static FromArrayToRef(T,A,E){E.x=T[A],E.y=T[A+1],E.z=T[A+2]}static FromFloatArrayToRef(T,A,E){return Xt.FromArrayToRef(T,A,E)}static FromFloatsToRef(T,A,E,O){O.copyFromFloats(T,A,E)}static Zero(){return new Xt(0,0,0)}static One(){return new Xt(1,1,1)}static Up(){return new Xt(0,1,0)}static Down(){return new Xt(0,-1,0)}static Forward(){return new Xt(0,0,1)}static Backward(){return new Xt(0,0,-1)}static Right(){return new Xt(1,0,0)}static Left(){return new Xt(-1,0,0)}static TransformCoordinates(T,A){const E=Xt.Zero();return Xt.TransformCoordinatesToRef(T,A,E),E}static TransformCoordinatesToRef(T,A,E){return Xt.TransformCoordinatesFromFloatsToRef(T.x,T.y,T.z,A,E)}static TransformCoordinatesFromFloatsToRef(T,A,E,O,k){const B=O.m,_t=T*B[0]+A*B[4]+E*B[8]+B[12],Ft=T*B[1]+A*B[5]+E*B[9]+B[13],Pt=T*B[2]+A*B[6]+E*B[10]+B[14],Lt=1/(T*B[3]+A*B[7]+E*B[11]+B[15]);k.x=_t*Lt,k.y=Ft*Lt,k.z=Pt*Lt}static TransformNormal(T,A){const E=Xt.Zero();return Xt.TransformNormalToRef(T,A,E),E}static TransformNormalToRef(T,A,E){this.TransformNormalFromFloatsToRef(T.x,T.y,T.z,A,E)}static TransformNormalFromFloatsToRef(T,A,E,O,k){const B=O.m;k.x=T*B[0]+A*B[4]+E*B[8],k.y=T*B[1]+A*B[5]+E*B[9],k.z=T*B[2]+A*B[6]+E*B[10]}static CatmullRom(T,A,E,O,k){const B=k*k,_t=k*B,Ft=.5*(2*A.x+(-T.x+E.x)*k+(2*T.x-5*A.x+4*E.x-O.x)*B+(-T.x+3*A.x-3*E.x+O.x)*_t),Pt=.5*(2*A.y+(-T.y+E.y)*k+(2*T.y-5*A.y+4*E.y-O.y)*B+(-T.y+3*A.y-3*E.y+O.y)*_t),Lt=.5*(2*A.z+(-T.z+E.z)*k+(2*T.z-5*A.z+4*E.z-O.z)*B+(-T.z+3*A.z-3*E.z+O.z)*_t);return new Xt(Ft,Pt,Lt)}static Clamp(T,A,E){const O=new Xt;return Xt.ClampToRef(T,A,E,O),O}static ClampToRef(T,A,E,O){let k=T.x;k=k>E.x?E.x:k,k=k<A.x?A.x:k;let B=T.y;B=B>E.y?E.y:B,B=B<A.y?A.y:B;let _t=T.z;_t=_t>E.z?E.z:_t,_t=_t<A.z?A.z:_t,O.copyFromFloats(k,B,_t)}static Hermite(T,A,E,O,k){const B=k*k,_t=k*B,Ft=2*_t-3*B+1,Pt=-2*_t+3*B,Lt=_t-2*B+k,Ut=_t-B,Yt=T.x*Ft+E.x*Pt+A.x*Lt+O.x*Ut,Zt=T.y*Ft+E.y*Pt+A.y*Lt+O.y*Ut,Kt=T.z*Ft+E.z*Pt+A.z*Lt+O.z*Ut;return new Xt(Yt,Zt,Kt)}static Lerp(T,A,E){const O=new Xt(0,0,0);return Xt.LerpToRef(T,A,E,O),O}static LerpToRef(T,A,E,O){O.x=T.x+(A.x-T.x)*E,O.y=T.y+(A.y-T.y)*E,O.z=T.z+(A.z-T.z)*E}static Dot(T,A){return T.x*A.x+T.y*A.y+T.z*A.z}static Cross(T,A){const E=Xt.Zero();return Xt.CrossToRef(T,A,E),E}static CrossToRef(T,A,E){const O=T.y*A.z-T.z*A.y,k=T.z*A.x-T.x*A.z,B=T.x*A.y-T.y*A.x;E.copyFromFloats(O,k,B)}static Normalize(T){const A=Xt.Zero();return Xt.NormalizeToRef(T,A),A}static NormalizeToRef(T,A){T.normalizeToRef(A)}static Minimize(T,A){const E=new Xt(T.x,T.y,T.z);return E.minimizeInPlace(A),E}static Maximize(T,A){const E=new Xt(T.x,T.y,T.z);return E.maximizeInPlace(A),E}static Distance(T,A){return Math.sqrt(Xt.DistanceSquared(T,A))}static DistanceSquared(T,A){const E=T.x-A.x,O=T.y-A.y,k=T.z-A.z;return E*E+O*O+k*k}static Center(T,A){const E=Xt.Add(T,A);return E.scaleInPlace(.5),E}static RotationFromAxis(T,A,E){const O=Xt.Zero();return Xt.RotationFromAxisToRef(T,A,E,O),O}static RotationFromAxisToRef(T,A,E,O){const k=Fn.MathTmp.Quaternion[0];kn.Quaternion.RotationQuaternionFromAxisToRef(T,A,E,k),O.copyFrom(k.eulerAngles)}toString(){return`(${this.x}, ${this.y}, ${this.z})`}getClassName(){return"Vector3"}getHashCode(){let T=this.x||0;return T=397*T^(this.y||0),T=397*T^(this.z||0),T}asArray(){const T=[];return this.toArray(T,0),T}toArray(T,A=0){return T[A]=this.x,T[A+1]=this.y,T[A+2]=this.z,this}toQuaternion(){return kn.Quaternion.Identity.setEuler(this.y,this.x,this.z)}addInPlace(T){return this.addInPlaceFromFloats(T.x,T.y,T.z)}addInPlaceFromFloats(T,A,E){return this.x+=T,this.y+=A,this.z+=E,this}add(T){return new Xt(this.x+T.x,this.y+T.y,this.z+T.z)}addToRef(T,A){return A.copyFromFloats(this.x+T.x,this.y+T.y,this.z+T.z)}subtractInPlace(T){return this.x-=T.x,this.y-=T.y,this.z-=T.z,this}subtract(T){return new Xt(this.x-T.x,this.y-T.y,this.z-T.z)}subtractToRef(T,A){return this.subtractFromFloatsToRef(T.x,T.y,T.z,A)}subtractFromFloats(T,A,E){return new Xt(this.x-T,this.y-A,this.z-E)}subtractFromFloatsToRef(T,A,E,O){return O.copyFromFloats(this.x-T,this.y-A,this.z-E)}applyMatrix4(T){this.applyMatrix4ToRef(T,this)}applyMatrix4ToRef(T,A){const{x:E,y:O,z:k}=this,{m:B}=T,_t=1/(B[3]*E+B[7]*O+B[11]*k+B[15]);return A.x=(B[0]*E+B[4]*O+B[8]*k+B[12])*_t,A.y=(B[1]*E+B[5]*O+B[9]*k+B[13])*_t,A.z=(B[2]*E+B[6]*O+B[10]*k+B[14])*_t,A}rotate(T){return this.rotateToRef(T,this)}rotateToRef(T,A){const{x:E,y:O,z:k}=this,{x:B,y:_t,z:Ft,w:Pt}=T,Lt=Pt*E+_t*k-Ft*O,Ut=Pt*O+Ft*E-B*k,Yt=Pt*k+B*O-_t*E,Zt=-B*E-_t*O-Ft*k;return A.x=Lt*Pt+Zt*-B+Ut*-Ft-Yt*-_t,A.y=Ut*Pt+Zt*-_t+Yt*-B-Lt*-Ft,A.z=Yt*Pt+Zt*-Ft+Lt*-_t-Ut*-B,A}negate(){return new Xt(-this.x,-this.y,-this.z)}scaleInPlace(T){return this.x*=T,this.y*=T,this.z*=T,this}scale(T){return new Xt(this.x*T,this.y*T,this.z*T)}scaleToRef(T,A){return A.copyFromFloats(this.x*T,this.y*T,this.z*T)}scaleAndAddToRef(T,A){return A.addInPlaceFromFloats(this.x*T,this.y*T,this.z*T)}equals(T){return T&&this.x===T.x&&this.y===T.y&&this.z===T.z}equalsWithEpsilon(T,A=Nn.Epsilon){return T&&Pn.Scalar.WithinEpsilon(this.x,T.x,A)&&Pn.Scalar.WithinEpsilon(this.y,T.y,A)&&Pn.Scalar.WithinEpsilon(this.z,T.z,A)}equalsToFloats(T,A,E){return this.x===T&&this.y===A&&this.z===E}multiplyInPlace(T){return this.x*=T.x,this.y*=T.y,this.z*=T.z,this}multiply(T){return this.multiplyByFloats(T.x,T.y,T.z)}multiplyToRef(T,A){return A.copyFromFloats(this.x*T.x,this.y*T.y,this.z*T.z)}multiplyByFloats(T,A,E){return new Xt(this.x*T,this.y*A,this.z*E)}divide(T){return new Xt(this.x/T.x,this.y/T.y,this.z/T.z)}divideToRef(T,A){return A.copyFromFloats(this.x/T.x,this.y/T.y,this.z/T.z)}divideInPlace(T){return this.divideToRef(T,this)}minimizeInPlace(T){return this.minimizeInPlaceFromFloats(T.x,T.y,T.z)}maximizeInPlace(T){return this.maximizeInPlaceFromFloats(T.x,T.y,T.z)}minimizeInPlaceFromFloats(T,A,E){return T<this.x&&(this.x=T),A<this.y&&(this.y=A),E<this.z&&(this.z=E),this}maximizeInPlaceFromFloats(T,A,E){return T>this.x&&(this.x=T),A>this.y&&(this.y=A),E>this.z&&(this.z=E),this}floor(){return new Xt(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))}fract(){return new Xt(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.normalizeFromLength(this.length())}normalizeFromLength(T){return 0===T||1===T?this:this.scaleInPlace(1/T)}normalizeToNew(){const T=new Xt(0,0,0);return this.normalizeToRef(T),T}normalizeToRef(T){const A=this.length();return 0===A||1===A?T.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/A,T)}clone(){return new Xt(this.x,this.y,this.z)}copyFrom(T){return this.copyFromFloats(T.x,T.y,T.z)}copyFromFloats(T,A,E){return this.x=T,this.y=A,this.z=E,this}set(T,A,E){return this.copyFromFloats(T,A,E)}setAll(T){return this.x=this.y=this.z=T,this}}fn.Vector3=Xt,Object.defineProperty(pn,"__esModule",{value:!0}),pn.MathTmp=void 0;const zn=dn,Mn=fn,Bn=yn,Dn=gn;pn.MathTmp={Vector3:(0,zn.buildArray)(6,Mn.Vector3.Zero),Matrix:(0,zn.buildArray)(2,Dn.Matrix.Identity),Quaternion:(0,zn.buildArray)(3,Bn.Quaternion.Zero),staticUp:Mn.Vector3.Up(),tmpMatrix:Dn.Matrix.Zero()};var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.Angle=void 0;class te{constructor(T){this._radians=T,this._radians<0&&(this._radians+=2*Math.PI)}static BetweenTwoPoints(T,A){const E=A.subtract(T),O=Math.atan2(E.y,E.x);return new te(O)}static FromRadians(T){return new te(T)}static FromDegrees(T){return new te(T*Math.PI/180)}degrees(){return 180*this._radians/Math.PI}radians(){return this._radians}}Ln.Angle=te;var Un={},Hn={};Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.Vector2=void 0;const jn=hn,Vn=vn;class re{constructor(T=0,A=0){this.x=T,this.y=A}static Zero(){return new re(0,0)}static One(){return new re(1,1)}static Add(T,A){return new re(T.x,T.y).addInPlace(A)}static FromArray(T,A=0){return new re(T[A],T[A+1])}static FromArrayToRef(T,A,E){E.x=T[A],E.y=T[A+1]}static CatmullRom(T,A,E,O,k){const B=k*k,_t=k*B,Ft=.5*(2*A.x+(-T.x+E.x)*k+(2*T.x-5*A.x+4*E.x-O.x)*B+(-T.x+3*A.x-3*E.x+O.x)*_t),Pt=.5*(2*A.y+(-T.y+E.y)*k+(2*T.y-5*A.y+4*E.y-O.y)*B+(-T.y+3*A.y-3*E.y+O.y)*_t);return new re(Ft,Pt)}static Clamp(T,A,E){let O=T.x;O=O>E.x?E.x:O,O=O<A.x?A.x:O;let k=T.y;return k=k>E.y?E.y:k,k=k<A.y?A.y:k,new re(O,k)}static Hermite(T,A,E,O,k){const B=k*k,_t=k*B,Ft=2*_t-3*B+1,Pt=-2*_t+3*B,Lt=_t-2*B+k,Ut=_t-B,Yt=T.x*Ft+E.x*Pt+A.x*Lt+O.x*Ut,Zt=T.y*Ft+E.y*Pt+A.y*Lt+O.y*Ut;return new re(Yt,Zt)}static Lerp(T,A,E){const O=T.x+(A.x-T.x)*E,k=T.y+(A.y-T.y)*E;return new re(O,k)}static Dot(T,A){return T.x*A.x+T.y*A.y}static Normalize(T){const A=new re(T.x,T.y);return A.normalize(),A}static Minimize(T,A){const E=T.x<A.x?T.x:A.x,O=T.y<A.y?T.y:A.y;return new re(E,O)}static Maximize(T,A){const E=T.x>A.x?T.x:A.x,O=T.y>A.y?T.y:A.y;return new re(E,O)}static Transform(T,A){const E=re.Zero();return re.TransformToRef(T,A,E),E}static TransformToRef(T,A,E){const O=A.m,k=T.x*O[0]+T.y*O[4]+O[12],B=T.x*O[1]+T.y*O[5]+O[13];E.x=k,E.y=B}static PointInTriangle(T,A,E,O){const k=.5*(-E.y*O.x+A.y*(-E.x+O.x)+A.x*(E.y-O.y)+E.x*O.y),B=k<0?-1:1,_t=(A.y*O.x-A.x*O.y+(O.y-A.y)*T.x+(A.x-O.x)*T.y)*B,Ft=(A.x*E.y-A.y*E.x+(A.y-E.y)*T.x+(E.x-A.x)*T.y)*B;return _t>0&&Ft>0&&_t+Ft<2*k*B}static Distance(T,A){return Math.sqrt(re.DistanceSquared(T,A))}static DistanceSquared(T,A){const E=T.x-A.x,O=T.y-A.y;return E*E+O*O}static Center(T,A){const E=re.Add(T,A);return E.scaleInPlace(.5),E}static DistanceOfPointFromSegment(T,A,E){const O=re.DistanceSquared(A,E);if(0===O)return re.Distance(T,A);const k=E.subtract(A),B=Math.max(0,Math.min(1,re.Dot(T.subtract(A),k)/O)),_t=A.add(k.multiplyByFloats(B,B));return re.Distance(T,_t)}toString(){return"{X: "+this.x+" Y:"+this.y+"}"}getClassName(){return"Vector2"}getHashCode(){let T=this.x||0;return T=397*T^(this.y||0),T}toArray(T,A=0){return T[A]=this.x,T[A+1]=this.y,this}asArray(){const T=new Array;return this.toArray(T,0),T}copyFrom(T){return this.x=T.x,this.y=T.y,this}copyFromFloats(T,A){return this.x=T,this.y=A,this}set(T,A){return this.copyFromFloats(T,A)}add(T){return new re(this.x+T.x,this.y+T.y)}addToRef(T,A){return A.x=this.x+T.x,A.y=this.y+T.y,this}addInPlace(T){return this.x+=T.x,this.y+=T.y,this}addVector3(T){return new re(this.x+T.x,this.y+T.y)}subtract(T){return new re(this.x-T.x,this.y-T.y)}subtractToRef(T,A){return A.x=this.x-T.x,A.y=this.y-T.y,this}subtractInPlace(T){return this.x-=T.x,this.y-=T.y,this}multiplyInPlace(T){return this.x*=T.x,this.y*=T.y,this}multiply(T){return new re(this.x*T.x,this.y*T.y)}multiplyToRef(T,A){return A.x=this.x*T.x,A.y=this.y*T.y,this}multiplyByFloats(T,A){return new re(this.x*T,this.y*A)}divide(T){return new re(this.x/T.x,this.y/T.y)}divideToRef(T,A){return A.x=this.x/T.x,A.y=this.y/T.y,this}divideInPlace(T){return this.divideToRef(T,this)}negate(){return new re(-this.x,-this.y)}scaleInPlace(T){return this.x*=T,this.y*=T,this}scale(T){const A=new re(0,0);return this.scaleToRef(T,A),A}scaleToRef(T,A){return A.x=this.x*T,A.y=this.y*T,this}scaleAndAddToRef(T,A){return A.x+=this.x*T,A.y+=this.y*T,this}equals(T){return T&&this.x===T.x&&this.y===T.y}equalsWithEpsilon(T,A=jn.Epsilon){return T&&Vn.Scalar.WithinEpsilon(this.x,T.x,A)&&Vn.Scalar.WithinEpsilon(this.y,T.y,A)}floor(){return new re(Math.floor(this.x),Math.floor(this.y))}fract(){return new re(this.x-Math.floor(this.x),this.y-Math.floor(this.y))}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){const T=this.length();if(0===T)return this;const A=1/T;return this.x*=A,this.y*=A,this}clone(){return new re(this.x,this.y)}}Hn.Vector2=re,Object.defineProperty(Un,"__esModule",{value:!0}),Un.Arc2=void 0;const Wn=Ln,Gn=Hn,qn=hn;Un.Arc2=class{constructor(T,A,E){this.startPoint=T,this.midPoint=A,this.endPoint=E;const O=Math.pow(A.x,2)+Math.pow(A.y,2),k=(Math.pow(T.x,2)+Math.pow(T.y,2)-O)/2,B=(O-Math.pow(E.x,2)-Math.pow(E.y,2))/2,_t=(T.x-A.x)*(A.y-E.y)-(A.x-E.x)*(T.y-A.y);this.centerPoint=new Gn.Vector2((k*(A.y-E.y)-B*(T.y-A.y))/_t,((T.x-A.x)*B-(A.x-E.x)*k)/_t),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=Wn.Angle.BetweenTwoPoints(this.centerPoint,this.startPoint);const Ft=this.startAngle.degrees();let Pt=Wn.Angle.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),Lt=Wn.Angle.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();Pt-Ft>180&&(Pt-=360),Pt-Ft<-180&&(Pt+=360),Lt-Pt>180&&(Lt-=360),Lt-Pt<-180&&(Lt+=360),this.orientation=Pt-Ft<0?qn.Orientation.CW:qn.Orientation.CCW,this.angle=Wn.Angle.FromDegrees(this.orientation===qn.Orientation.CW?Ft-Lt:Lt-Ft)}};var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.Axis=void 0;const Yn=fn;class pe{}Xn.Axis=pe,pe.X=new Yn.Vector3(1,0,0),pe.Y=new Yn.Vector3(0,1,0),pe.Z=new Yn.Vector3(0,0,1);var $n={};Object.defineProperty($n,"__esModule",{value:!0}),$n.BezierCurve=void 0,$n.BezierCurve=class{static Interpolate(T,A,E,O,k){const B=1-3*O+3*A,_t=3*O-6*A,Ft=3*A;let Pt=T;for(let A=0;A<5;A++){const A=Pt*Pt;Pt-=1/(3*B*A+2*_t*Pt+Ft)*(B*(A*Pt)+_t*A+Ft*Pt-T),Pt=Math.min(1,Math.max(0,Pt))}return 3*Math.pow(1-Pt,2)*Pt*E+3*(1-Pt)*Math.pow(Pt,2)*k+Math.pow(Pt,3)}};var Jn={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.Color4=void 0;const Zn=vn,Kn=hn;class ge{constructor(T=0,A=0,E=0,O=1){this.r=T,this.g=A,this.b=E,this.a=O}static FromHexString(T){if("#"!==T.substring(0,1)||9!==T.length)return new ge(0,0,0,0);const A=parseInt(T.substring(1,3),16),E=parseInt(T.substring(3,5),16),O=parseInt(T.substring(5,7),16),k=parseInt(T.substring(7,9),16);return ge.FromInts(A,E,O,k)}static Lerp(T,A,E){const O=new ge(0,0,0,0);return ge.LerpToRef(T,A,E,O),O}static LerpToRef(T,A,E,O){O.r=T.r+(A.r-T.r)*E,O.g=T.g+(A.g-T.g)*E,O.b=T.b+(A.b-T.b)*E,O.a=T.a+(A.a-T.a)*E}static Red(){return new ge(1,0,0,1)}static Green(){return new ge(0,1,0,1)}static Blue(){return new ge(0,0,1,1)}static Black(){return new ge(0,0,0,1)}static White(){return new ge(1,1,1,1)}static Purple(){return new ge(.5,0,.5,1)}static Magenta(){return new ge(1,0,1,1)}static Yellow(){return new ge(1,1,0,1)}static Gray(){return new ge(.5,.5,.5,1)}static Teal(){return new ge(0,1,1,1)}static Clear(){return new ge(0,0,0,0)}static FromColor3(T,A=1){return new ge(T.r,T.g,T.b,A)}static FromArray(T,A=0){return new ge(T[A],T[A+1],T[A+2],T[A+3])}static FromInts(T,A,E,O){return new ge(T/255,A/255,E/255,O/255)}static CheckColors4(T,A){if(T.length===3*A){const A=[];for(let E=0;E<T.length;E+=3){const O=E/3*4;A[O]=T[E],A[O+1]=T[E+1],A[O+2]=T[E+2],A[O+3]=1}return A}return T}addInPlace(T){return this.r+=T.r,this.g+=T.g,this.b+=T.b,this.a+=T.a,this}asArray(){const T=new Array;return this.toArray(T,0),T}toArray(T,A=0){return T[A]=this.r,T[A+1]=this.g,T[A+2]=this.b,T[A+3]=this.a,this}add(T){return new ge(this.r+T.r,this.g+T.g,this.b+T.b,this.a+T.a)}subtract(T){return new ge(this.r-T.r,this.g-T.g,this.b-T.b,this.a-T.a)}subtractToRef(T,A){return A.r=this.r-T.r,A.g=this.g-T.g,A.b=this.b-T.b,A.a=this.a-T.a,this}scale(T){return new ge(this.r*T,this.g*T,this.b*T,this.a*T)}scaleToRef(T,A){return A.r=this.r*T,A.g=this.g*T,A.b=this.b*T,A.a=this.a*T,this}scaleAndAddToRef(T,A){return A.r+=this.r*T,A.g+=this.g*T,A.b+=this.b*T,A.a+=this.a*T,this}clampToRef(T=0,A=1,E){return E.r=Zn.Scalar.Clamp(this.r,T,A),E.g=Zn.Scalar.Clamp(this.g,T,A),E.b=Zn.Scalar.Clamp(this.b,T,A),E.a=Zn.Scalar.Clamp(this.a,T,A),this}multiply(T){return new ge(this.r*T.r,this.g*T.g,this.b*T.b,this.a*T.a)}multiplyToRef(T,A){return A.r=this.r*T.r,A.g=this.g*T.g,A.b=this.b*T.b,A.a=this.a*T.a,A}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"}getClassName(){return"Color4"}getHashCode(){let T=this.r||0;return T=397*T^(this.g||0),T=397*T^(this.b||0),T=397*T^(this.a||0),T}clone(){return new ge(this.r,this.g,this.b,this.a)}copyFrom(T){return this.r=T.r,this.g=T.g,this.b=T.b,this.a=T.a,this}copyFromFloats(T,A,E,O){return this.r=T,this.g=A,this.b=E,this.a=O,this}set(T,A,E,O){return this.copyFromFloats(T,A,E,O)}toHexString(){const T=255*this.r|0,A=255*this.g|0,E=255*this.b|0,O=255*this.a|0;return"#"+Zn.Scalar.ToHex(T)+Zn.Scalar.ToHex(A)+Zn.Scalar.ToHex(E)+Zn.Scalar.ToHex(O)}toLinearSpace(){const T=new ge;return this.toLinearSpaceToRef(T),T}toLinearSpaceToRef(T){return T.r=Math.pow(this.r,Kn.ToLinearSpace),T.g=Math.pow(this.g,Kn.ToLinearSpace),T.b=Math.pow(this.b,Kn.ToLinearSpace),T.a=this.a,this}toGammaSpace(){const T=new ge;return this.toGammaSpaceToRef(T),T}toGammaSpaceToRef(T){return T.r=Math.pow(this.r,Kn.ToGammaSpace),T.g=Math.pow(this.g,Kn.ToGammaSpace),T.b=Math.pow(this.b,Kn.ToGammaSpace),T.a=this.a,this}}Qn.Color4=ge,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.Color3=void 0;const ti=hn,ei=Qn,ni=vn;class xe{constructor(T=0,A=0,E=0){this.r=T,this.g=A,this.b=E}static FromHexString(T){if("#"!==T.substring(0,1)||7!==T.length)return new xe(0,0,0);const A=parseInt(T.substring(1,3),16),E=parseInt(T.substring(3,5),16),O=parseInt(T.substring(5,7),16);return xe.FromInts(A,E,O)}static FromArray(T,A=0){return new xe(T[A],T[A+1],T[A+2])}static FromInts(T,A,E){return new xe(T/255,A/255,E/255)}static Lerp(T,A,E){const O=new xe(0,0,0);return xe.LerpToRef(T,A,E,O),O}static LerpToRef(T,A,E,O){O.r=T.r+(A.r-T.r)*E,O.g=T.g+(A.g-T.g)*E,O.b=T.b+(A.b-T.b)*E}static Red(){return new xe(1,0,0)}static Green(){return new xe(0,1,0)}static Blue(){return new xe(0,0,1)}static Black(){return new xe(0,0,0)}static White(){return new xe(1,1,1)}static Purple(){return new xe(.5,0,.5)}static Magenta(){return new xe(1,0,1)}static Yellow(){return new xe(1,1,0)}static Gray(){return new xe(.5,.5,.5)}static Teal(){return new xe(0,1,1)}static Random(){return new xe(Math.random(),Math.random(),Math.random())}toString(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"}getClassName(){return"Color3"}getHashCode(){let T=this.r||0;return T=397*T^(this.g||0),T=397*T^(this.b||0),T}toArray(T,A=0){return T[A]=this.r,T[A+1]=this.g,T[A+2]=this.b,this}toColor4(T=1){return new ei.Color4(this.r,this.g,this.b,T)}asArray(){const T=new Array;return this.toArray(T,0),T}toLuminance(){return.3*this.r+.59*this.g+.11*this.b}multiply(T){return new xe(this.r*T.r,this.g*T.g,this.b*T.b)}multiplyToRef(T,A){return A.r=this.r*T.r,A.g=this.g*T.g,A.b=this.b*T.b,this}equals(T){return T&&this.r===T.r&&this.g===T.g&&this.b===T.b}equalsFloats(T,A,E){return this.r===T&&this.g===A&&this.b===E}scale(T){return new xe(this.r*T,this.g*T,this.b*T)}scaleToRef(T,A){return A.r=this.r*T,A.g=this.g*T,A.b=this.b*T,this}scaleAndAddToRef(T,A){return A.r+=this.r*T,A.g+=this.g*T,A.b+=this.b*T,this}clampToRef(T=0,A=1,E){return E.r=ni.Scalar.Clamp(this.r,T,A),E.g=ni.Scalar.Clamp(this.g,T,A),E.b=ni.Scalar.Clamp(this.b,T,A),this}add(T){return new xe(this.r+T.r,this.g+T.g,this.b+T.b)}addToRef(T,A){return A.r=this.r+T.r,A.g=this.g+T.g,A.b=this.b+T.b,this}subtract(T){return new xe(this.r-T.r,this.g-T.g,this.b-T.b)}subtractToRef(T,A){return A.r=this.r-T.r,A.g=this.g-T.g,A.b=this.b-T.b,this}clone(){return new xe(this.r,this.g,this.b)}copyFrom(T){return this.r=T.r,this.g=T.g,this.b=T.b,this}copyFromFloats(T,A,E){return this.r=T,this.g=A,this.b=E,this}set(T,A,E){return this.copyFromFloats(T,A,E)}toHexString(){const T=255*this.r|0,A=255*this.g|0,E=255*this.b|0;return"#"+ni.Scalar.ToHex(T)+ni.Scalar.ToHex(A)+ni.Scalar.ToHex(E)}toLinearSpace(){const T=new xe;return this.toLinearSpaceToRef(T),T}toLinearSpaceToRef(T){return T.r=Math.pow(this.r,ti.ToLinearSpace),T.g=Math.pow(this.g,ti.ToLinearSpace),T.b=Math.pow(this.b,ti.ToLinearSpace),this}toGammaSpace(){const T=new xe;return this.toGammaSpaceToRef(T),T}toGammaSpaceToRef(T){return T.r=Math.pow(this.r,ti.ToGammaSpace),T.g=Math.pow(this.g,ti.ToGammaSpace),T.b=Math.pow(this.b,ti.ToGammaSpace),this}toJSON(){return{r:this.r,g:this.g,b:this.b}}}Jn.Color3=xe;var ii={};Object.defineProperty(ii,"__esModule",{value:!0}),ii.Curve3=void 0;const oi=fn;class Ae{constructor(T){this._length=0,this._points=T,this._length=this._computeLength(T)}static CreateQuadraticBezier(T,A,E,O){O=O>2?O:3;const k=new Array,r=(T,A,E,O)=>(1-T)*(1-T)*A+2*T*(1-T)*E+T*T*O;for(let B=0;B<=O;B++)k.push(new oi.Vector3(r(B/O,T.x,A.x,E.x),r(B/O,T.y,A.y,E.y),r(B/O,T.z,A.z,E.z)));return new Ae(k)}static CreateCubicBezier(T,A,E,O,k){k=k>3?k:4;const B=new Array,s=(T,A,E,O,k)=>(1-T)*(1-T)*(1-T)*A+3*T*(1-T)*(1-T)*E+3*T*T*(1-T)*O+T*T*T*k;for(let _t=0;_t<=k;_t++)B.push(new oi.Vector3(s(_t/k,T.x,A.x,E.x,O.x),s(_t/k,T.y,A.y,E.y,O.y),s(_t/k,T.z,A.z,E.z,O.z)));return new Ae(B)}static CreateHermiteSpline(T,A,E,O,k){const B=new Array,_t=1/k;for(let Ft=0;Ft<=k;Ft++)B.push(oi.Vector3.Hermite(T,A,E,O,Ft*_t));return new Ae(B)}static CreateCatmullRomSpline(T,A,E){const O=new Array,k=1/A;let B=0;if(E){const E=T.length;for(let _t=0;_t<E;_t++){B=0;for(let Ft=0;Ft<A;Ft++)O.push(oi.Vector3.CatmullRom(T[_t%E],T[(_t+1)%E],T[(_t+2)%E],T[(_t+3)%E],B)),B+=k}O.push(O[0])}else{const E=new Array;E.push(T[0].clone()),Array.prototype.push.apply(E,T),E.push(T[T.length-1].clone());let _t=0;for(_t=0;_t<E.length-3;_t++){B=0;for(let T=0;T<A;T++)O.push(oi.Vector3.CatmullRom(E[_t],E[_t+1],E[_t+2],E[_t+3],B)),B+=k}_t--,O.push(oi.Vector3.CatmullRom(E[_t],E[_t+1],E[_t+2],E[_t+3],B))}return new Ae(O)}getPoints(){return this._points}length(){return this._length}continue(T){const A=this._points[this._points.length-1],E=this._points.slice(),O=T.getPoints();for(let T=1;T<O.length;T++)E.push(O[T].subtract(O[0]).add(A));return new Ae(E)}_computeLength(T){let A=0;for(let E=1;E<T.length;E++)A+=T[E].subtract(T[E-1]).length();return A}}ii.Curve3=Ae;var ri={},si={};Object.defineProperty(si,"__esModule",{value:!0}),si.Plane=void 0;const ai=fn,ci=gn,li=pn;class ze{constructor(T,A,E,O){this.normal=new ai.Vector3(T,A,E),this.d=O}static FromArray(T){return new ze(T[0],T[1],T[2],T[3])}static FromPoints(T,A,E){const O=new ze(0,0,0,0);return O.copyFromPoints(T,A,E),O}static FromPositionAndNormal(T,A){const E=new ze(0,0,0,0);return A.normalize(),E.normal=A,E.d=-(A.x*T.x+A.y*T.y+A.z*T.z),E}static SignedDistanceToPlaneFromPositionAndNormal(T,A,E){const O=-(A.x*T.x+A.y*T.y+A.z*T.z);return ai.Vector3.Dot(E,A)+O}asArray(){return[this.normal.x,this.normal.y,this.normal.z,this.d]}clone(){return new ze(this.normal.x,this.normal.y,this.normal.z,this.d)}getClassName(){return"Plane"}getHashCode(){let T=this.normal.getHashCode();return T=397*T^(this.d||0),T}normalize(){const T=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z);let A=0;return 0!==T&&(A=1/T),this.normal.x*=A,this.normal.y*=A,this.normal.z*=A,this.d*=A,this}transform(T){const A=li.MathTmp.Matrix[0];ci.Matrix.TransposeToRef(T,A);const E=A.m,O=this.normal.x,k=this.normal.y,B=this.normal.z,_t=this.d,Ft=O*E[0]+k*E[1]+B*E[2]+_t*E[3],Pt=O*E[4]+k*E[5]+B*E[6]+_t*E[7],Lt=O*E[8]+k*E[9]+B*E[10]+_t*E[11],Ut=O*E[12]+k*E[13]+B*E[14]+_t*E[15];return new ze(Ft,Pt,Lt,Ut)}dotCoordinate(T){return this.normal.x*T.x+this.normal.y*T.y+this.normal.z*T.z+this.d}copyFromPoints(T,A,E){const O=A.x-T.x,k=A.y-T.y,B=A.z-T.z,_t=E.x-T.x,Ft=E.y-T.y,Pt=E.z-T.z,Lt=k*Pt-B*Ft,Ut=B*_t-O*Pt,Yt=O*Ft-k*_t,Zt=Math.sqrt(Lt*Lt+Ut*Ut+Yt*Yt);let Kt;return Kt=0!==Zt?1/Zt:0,this.normal.x=Lt*Kt,this.normal.y=Ut*Kt,this.normal.z=Yt*Kt,this.d=-(this.normal.x*T.x+this.normal.y*T.y+this.normal.z*T.z),this}isFrontFacingTo(T,A){return ai.Vector3.Dot(this.normal,T)<=A}signedDistanceTo(T){return ai.Vector3.Dot(T,this.normal)+this.d}}si.Plane=ze,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Frustum=void 0;const ui=si;class Me{static GetPlanes(T){const A=[];for(let T=0;T<6;T++)A.push(new ui.Plane(0,0,0,0));return Me.GetPlanesToRef(T,A),A}static GetNearPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]+E[2],A.normal.y=E[7]+E[6],A.normal.z=E[11]+E[10],A.d=E[15]+E[14],A.normalize()}static GetFarPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]-E[2],A.normal.y=E[7]-E[6],A.normal.z=E[11]-E[10],A.d=E[15]-E[14],A.normalize()}static GetLeftPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]+E[0],A.normal.y=E[7]+E[4],A.normal.z=E[11]+E[8],A.d=E[15]+E[12],A.normalize()}static GetRightPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]-E[0],A.normal.y=E[7]-E[4],A.normal.z=E[11]-E[8],A.d=E[15]-E[12],A.normalize()}static GetTopPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]-E[1],A.normal.y=E[7]-E[5],A.normal.z=E[11]-E[9],A.d=E[15]-E[13],A.normalize()}static GetBottomPlaneToRef(T,A){const E=T.m;A.normal.x=E[3]+E[1],A.normal.y=E[7]+E[5],A.normal.z=E[11]+E[9],A.d=E[15]+E[13],A.normalize()}static GetPlanesToRef(T,A){Me.GetNearPlaneToRef(T,A[0]),Me.GetFarPlaneToRef(T,A[1]),Me.GetLeftPlaneToRef(T,A[2]),Me.GetRightPlaneToRef(T,A[3]),Me.GetTopPlaneToRef(T,A[4]),Me.GetBottomPlaneToRef(T,A[5])}}ri.Frustum=Me;var hi={};Object.defineProperty(hi,"__esModule",{value:!0}),hi.Path2=void 0;const pi=Hn,di=Un,fi=hn;class De{constructor(T,A){this.closed=!1,this._points=new Array,this._length=0,this._points.push(new pi.Vector2(T,A))}static StartingAt(T,A){return new De(T,A)}addLineTo(T,A){if(this.closed)return this;const E=new pi.Vector2(T,A),O=this._points[this._points.length-1];return this._points.push(E),this._length+=E.subtract(O).length(),this}addArcTo(T,A,E,O,k=36){if(this.closed)return this;const B=this._points[this._points.length-1],_t=new pi.Vector2(T,A),Ft=new pi.Vector2(E,O),Pt=new di.Arc2(B,_t,Ft);let Lt=Pt.angle.radians()/k;Pt.orientation===fi.Orientation.CW&&(Lt*=-1);let Ut=Pt.startAngle.radians()+Lt;for(let T=0;T<k;T++){const T=Math.cos(Ut)*Pt.radius+Pt.centerPoint.x,A=Math.sin(Ut)*Pt.radius+Pt.centerPoint.y;this.addLineTo(T,A),Ut+=Lt}return this}close(){return this.closed=!0,this}length(){let T=this._length;if(!this.closed){const A=this._points[this._points.length-1];T+=this._points[0].subtract(A).length()}return T}getPoints(){return this._points}getPointAtLengthPosition(T){if(T<0||T>1)return pi.Vector2.Zero();const A=T*this.length();let E=0;for(let T=0;T<this._points.length;T++){const O=(T+1)%this._points.length,k=this._points[T],B=this._points[O].subtract(k),_t=B.length()+E;if(A>=E&&A<=_t){const T=B.normalize(),O=A-E;return new pi.Vector2(k.x+T.x*O,k.y+T.y*O)}E=_t}return pi.Vector2.Zero()}}hi.Path2=De;var yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.Path3D=void 0;const gi=fn,mi=hn,vi=vn;yi.Path3D=class{constructor(T,A=null,E){this.path=T,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(let A=0;A<T.length;A++)this._curve[A]=T[A].clone();this._raw=E||!1,this._compute(A)}getCurve(){return this._curve}getTangents(){return this._tangents}getNormals(){return this._normals}getBinormals(){return this._binormals}getDistances(){return this._distances}update(T,A=null){for(let A=0;A<T.length;A++)this._curve[A].x=T[A].x,this._curve[A].y=T[A].y,this._curve[A].z=T[A].z;return this._compute(A),this}_compute(T){const A=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[A-1]=this._curve[A-1].subtract(this._curve[A-2]),this._raw||this._tangents[A-1].normalize();const E=this._tangents[0],O=this._normalVector(this._curve[0],E,T);let k,B,_t,Ft;this._normals[0]=O,this._raw||this._normals[0].normalize(),this._binormals[0]=gi.Vector3.Cross(E,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(let T=1;T<A;T++)k=this._getLastNonNullVector(T),T<A-1&&(B=this._getFirstNonNullVector(T),this._tangents[T]=k.add(B),this._tangents[T].normalize()),this._distances[T]=this._distances[T-1]+k.length(),_t=this._tangents[T],Ft=this._binormals[T-1],this._normals[T]=gi.Vector3.Cross(Ft,_t),this._raw||this._normals[T].normalize(),this._binormals[T]=gi.Vector3.Cross(_t,this._normals[T]),this._raw||this._binormals[T].normalize()}_getFirstNonNullVector(T){let A=1,E=this._curve[T+A].subtract(this._curve[T]);for(;0===E.length()&&T+A+1<this._curve.length;)A++,E=this._curve[T+A].subtract(this._curve[T]);return E}_getLastNonNullVector(T){let A=1,E=this._curve[T].subtract(this._curve[T-A]);for(;0===E.length()&&T>A+1;)A++,E=this._curve[T].subtract(this._curve[T-A]);return E}_normalVector(T,A,E){let O,k=A.length();if(0===k&&(k=1),null==E){let T;T=vi.Scalar.WithinEpsilon(Math.abs(A.y)/k,1,mi.Epsilon)?vi.Scalar.WithinEpsilon(Math.abs(A.x)/k,1,mi.Epsilon)?vi.Scalar.WithinEpsilon(Math.abs(A.z)/k,1,mi.Epsilon)?gi.Vector3.Zero():new gi.Vector3(0,0,1):new gi.Vector3(1,0,0):new gi.Vector3(0,-1,0),O=gi.Vector3.Cross(A,T)}else O=gi.Vector3.Cross(A,E),gi.Vector3.CrossToRef(O,A,O);return O.normalize(),O}};var bi={};Object.defineProperty(bi,"__esModule",{value:!0}),bi.Size=void 0;class je{constructor(T,A){this.width=T,this.height=A}get surface(){return this.width*this.height}static Zero(){return new je(0,0)}static Lerp(T,A,E){const O=T.width+(A.width-T.width)*E,k=T.height+(A.height-T.height)*E;return new je(O,k)}toString(){return`{W: ${this.width}, H: ${this.height}}`}getClassName(){return"Size"}getHashCode(){let T=this.width||0;return T=397*T^(this.height||0),T}copyFrom(T){this.width=T.width,this.height=T.height}copyFromFloats(T,A){return this.width=T,this.height=A,this}set(T,A){return this.copyFromFloats(T,A)}multiplyByFloats(T,A){return new je(this.width*T,this.height*A)}clone(){return new je(this.width,this.height)}equals(T){return!!T&&this.width===T.width&&this.height===T.height}add(T){return new je(this.width+T.width,this.height+T.height)}subtract(T){return new je(this.width-T.width,this.height-T.height)}}bi.Size=je,function(T){var A=ln&&ln.__createBinding||(Object.create?function(T,A,E,O){void 0===O&&(O=E),Object.defineProperty(T,O,{enumerable:!0,get:function(){return A[E]}})}:function(T,A,E,O){void 0===O&&(O=E),T[O]=A[E]}),E=ln&&ln.__exportStar||function(T,E){for(var O in T)"default"===O||Object.prototype.hasOwnProperty.call(E,O)||A(E,T,O)};Object.defineProperty(T,"__esModule",{value:!0}),E(hn,T),E(pn,T),E(Ln,T),E(Un,T),E(Xn,T),E($n,T),E(Jn,T),E(Qn,T),E(ii,T),E(ri,T),E(gn,T),E(hi,T),E(yi,T),E(si,T),E(yn,T),E(vn,T),E(bi,T),E(Hn,T),E(fn,T),E(mn,T),E(un,T)}(un);var wi,Ti,xi,Ai,_i={looping:!0,speed:1,weight:1,layer:0},Si=function(T){function e(A,E){void 0===E&&(E=_i);var O=T.call(this)||this;return O.isAnimationClip=!0,O.looping=_i.looping,O.weight=_i.weight,O.playing=!1,O.shouldReset=!1,O.speed=_i.speed,O.name=f("AnimClip"),O.layer=_i.layer,O.clip=A,O.setParams(o({},E)),O}return i(e,T),e.prototype.setParams=function(T){return this.looping=void 0!==T.looping?T.looping:this.looping,this.speed=T.speed||this.speed,this.weight=T.weight||this.weight,this.layer=T.layer||this.layer,this},e.prototype.toJSON=function(){var A=JSON.parse(JSON.stringify(T.prototype.toJSON.call(this)));return this.shouldReset&&(this.shouldReset=!1),A},e.prototype.play=function(T){var A;void 0===T&&(T=!1),null===(A=this.owner)||void 0===A||A.play(this,T)},e.prototype.pause=function(){var T;null===(T=this.owner)||void 0===T||T.pause(this)},e.prototype.reset=function(){this.shouldReset=!0},e.prototype.stop=function(){var T;null===(T=this.owner)||void 0===T||T.stop(this)},r([le.readonly,s("design:type",String)],e.prototype,"clip",void 0),r([le.field,s("design:type",Boolean)],e.prototype,"looping",void 0),r([le.field,s("design:type",Number)],e.prototype,"weight",void 0),r([le.field,s("design:type",Boolean)],e.prototype,"playing",void 0),r([le.field,s("design:type",Boolean)],e.prototype,"shouldReset",void 0),r([le.field,s("design:type",Number)],e.prototype,"speed",void 0),r([le.readonly,s("design:type",String)],e.prototype,"name",void 0),e}(le);T.InputEventType=void 0,(wi=T.InputEventType||(T.InputEventType={}))[wi.DOWN=0]="DOWN",wi[wi.UP=1]="UP",T.CameraMode=void 0,(Ti=T.CameraMode||(T.CameraMode={}))[Ti.FirstPerson=0]="FirstPerson",Ti[Ti.ThirdPerson=1]="ThirdPerson",Ti[Ti.BuildingToolGodMode=2]="BuildingToolGodMode",T.LandRole=void 0,(xi=T.LandRole||(T.LandRole={})).OWNER="owner",xi.OPERATOR="operator",T.ActionButton=void 0,(Ai=T.ActionButton||(T.ActionButton={})).POINTER="POINTER",Ai.PRIMARY="PRIMARY",Ai.SECONDARY="SECONDARY",Ai.ANY="ANY",Ai.FORWARD="FORWARD",Ai.BACKWARD="BACKWARD",Ai.RIGHT="RIGHT",Ai.LEFT="LEFT",Ai.JUMP="JUMP",Ai.WALK="WALK",Ai.ACTION_3="ACTION_3",Ai.ACTION_4="ACTION_4",Ai.ACTION_5="ACTION_5",Ai.ACTION_6="ACTION_6";var Ei,Ci,Ke=function(T){if(this.callback=T,!T||!("apply"in T)||!("call"in T))throw new Error("Callback is not a function");Fi.ensureInstance()},Ii=function(T){function e(){return null!==T&&T.apply(this,arguments)||this}return i(e,T),r([P("pointerDown")],e)}(Ke),Oi=function(T){function e(){return null!==T&&T.apply(this,arguments)||this}return i(e,T),r([P("pointerUp")],e)}(Ke),en=function(T,A){this.fn=T,this.useRaycast=A},Fi=function(){function e(){this.buttonIdMapping=[T.ActionButton.POINTER,T.ActionButton.PRIMARY,T.ActionButton.SECONDARY,T.ActionButton.ANY,T.ActionButton.FORWARD,T.ActionButton.BACKWARD,T.ActionButton.RIGHT,T.ActionButton.LEFT,T.ActionButton.JUMP,T.ActionButton.WALK,T.ActionButton.ACTION_3,T.ActionButton.ACTION_4,T.ActionButton.ACTION_5,T.ActionButton.ACTION_6],this.subscriptions=this.buttonIdMapping.reduce((function(T,A){var E;return o(o({},T),((E={})[A]={BUTTON_DOWN:[],BUTTON_UP:[]},E))}),{}),this.internalState=this.buttonIdMapping.reduce((function(T,A){var E;return o(o({},T),((E={})[A]={BUTTON_DOWN:!1},E))}),{})}return Object.defineProperty(e,"instance",{get:function(){return e.ensureInstance(),e._instance},enumerable:!1,configurable:!0}),e.ensureInstance=function(){e._instance||(e._instance=new e)},e.prototype.isButtonPressed=function(T){return this.internalState[T]},e.prototype.subscribe=function(T,A,E,O){var k=this;return this.subscriptions[A][T].push(new en(O,E)),function(){k.unsubscribe(T,A,O)}},e.prototype.unsubscribe=function(T,A,E){var O=this.getSubscriptionId(T,A,E);return O>-1&&this.subscriptions[A][T].splice(O,1)},e.prototype.handlePointerEvent=function(A){var E=this.getPointerById(A.buttonId);if(E){var O=o(o({},A),{button:E,direction:(new un.Vector3).copyFrom(A.direction),origin:(new un.Vector3).copyFrom(A.origin),hit:void 0}),k=A.hit?o(o({},A.hit),{hitPoint:(new un.Vector3).copyFrom(A.hit.hitPoint),normal:(new un.Vector3).copyFrom(A.hit.normal),worldNormal:(new un.Vector3).copyFrom(A.hit.worldNormal)}):void 0;if(A.type===T.InputEventType.DOWN){this.internalState[E].BUTTON_DOWN=!0;for(var B=0;B<this.subscriptions[E].BUTTON_DOWN.length;B++)(_t=this.subscriptions[E].BUTTON_DOWN[B]).useRaycast?O.hit=k:O.hit=void 0,_t.fn(O);k&&k.entityId&&N.engine&&(Pt=(Ft=N.engine.entities[k.entityId])&&Ft.getComponentOrNull(Ii))&&(O.hit=k,Pt.callback(O))}else{for(this.internalState[E].BUTTON_DOWN=!1,B=0;B<this.subscriptions[E].BUTTON_UP.length;B++){var _t;(_t=this.subscriptions[E].BUTTON_UP[B]).useRaycast?O.hit=k:O.hit=void 0,_t.fn(O)}var Ft,Pt;k&&k.entityId&&N.engine&&(Pt=(Ft=N.engine.entities[k.entityId])&&Ft.getComponentOrNull(Oi))&&(O.hit=k,Pt.callback(O))}}},e.prototype.getSubscriptionId=function(T,A,E){for(var O=0;O<this.subscriptions[A][T].length;O++)if(this.subscriptions[A][T][O].fn===E)return O;return-1},e.prototype.getPointerById=function(A){if(A<0||A>=this.buttonIdMapping.length)return null;var E=this.buttonIdMapping[A];return E===T.ActionButton.ANY?null:E},e}();T.CLASS_ID=void 0,(Ei=T.CLASS_ID||(T.CLASS_ID={}))[Ei.TRANSFORM=1]="TRANSFORM",Ei[Ei.UUID_CALLBACK=8]="UUID_CALLBACK",Ei[Ei.BOX_SHAPE=16]="BOX_SHAPE",Ei[Ei.SPHERE_SHAPE=17]="SPHERE_SHAPE",Ei[Ei.PLANE_SHAPE=18]="PLANE_SHAPE",Ei[Ei.CONE_SHAPE=19]="CONE_SHAPE",Ei[Ei.CYLINDER_SHAPE=20]="CYLINDER_SHAPE",Ei[Ei.TEXT_SHAPE=21]="TEXT_SHAPE",Ei[Ei.NFT_SHAPE=22]="NFT_SHAPE",Ei[Ei.UI_WORLD_SPACE_SHAPE=23]="UI_WORLD_SPACE_SHAPE",Ei[Ei.UI_SCREEN_SPACE_SHAPE=24]="UI_SCREEN_SPACE_SHAPE",Ei[Ei.UI_CONTAINER_RECT=25]="UI_CONTAINER_RECT",Ei[Ei.UI_CONTAINER_STACK=26]="UI_CONTAINER_STACK",Ei[Ei.UI_TEXT_SHAPE=27]="UI_TEXT_SHAPE",Ei[Ei.UI_INPUT_TEXT_SHAPE=28]="UI_INPUT_TEXT_SHAPE",Ei[Ei.UI_IMAGE_SHAPE=29]="UI_IMAGE_SHAPE",Ei[Ei.UI_SLIDER_SHAPE=30]="UI_SLIDER_SHAPE",Ei[Ei.CIRCLE_SHAPE=31]="CIRCLE_SHAPE",Ei[Ei.BILLBOARD=32]="BILLBOARD",Ei[Ei.ANIMATION=33]="ANIMATION",Ei[Ei.FONT=34]="FONT",Ei[Ei.UI_FULLSCREEN_SHAPE=40]="UI_FULLSCREEN_SHAPE",Ei[Ei.UI_BUTTON_SHAPE=41]="UI_BUTTON_SHAPE",Ei[Ei.GLTF_SHAPE=54]="GLTF_SHAPE",Ei[Ei.OBJ_SHAPE=55]="OBJ_SHAPE",Ei[Ei.AVATAR_SHAPE=56]="AVATAR_SHAPE",Ei[Ei.BASIC_MATERIAL=64]="BASIC_MATERIAL",Ei[Ei.PBR_MATERIAL=65]="PBR_MATERIAL",Ei[Ei.HIGHLIGHT_ENTITY=66]="HIGHLIGHT_ENTITY",Ei[Ei.SOUND=67]="SOUND",Ei[Ei.TEXTURE=68]="TEXTURE",Ei[Ei.VIDEO_CLIP=70]="VIDEO_CLIP",Ei[Ei.VIDEO_TEXTURE=71]="VIDEO_TEXTURE",Ei[Ei.AVATAR_TEXTURE=72]="AVATAR_TEXTURE",Ei[Ei.AUDIO_CLIP=200]="AUDIO_CLIP",Ei[Ei.AUDIO_SOURCE=201]="AUDIO_SOURCE",Ei[Ei.AUDIO_STREAM=202]="AUDIO_STREAM",Ei[Ei.GIZMOS=203]="GIZMOS",Ei[Ei.SMART_ITEM=204]="SMART_ITEM",Ei[Ei.AVATAR_MODIFIER_AREA=205]="AVATAR_MODIFIER_AREA",Ei[Ei.AVATAR_ATTACH=206]="AVATAR_ATTACH",Ei[Ei.CAMERA_MODE_AREA=207]="CAMERA_MODE_AREA",Ei[Ei.NAME=300]="NAME",Ei[Ei.LOCKED_ON_EDIT=301]="LOCKED_ON_EDIT",Ei[Ei.VISIBLE_ON_EDIT=302]="VISIBLE_ON_EDIT",T.AvatarModifiers=void 0,(Ci=T.AvatarModifiers||(T.AvatarModifiers={})).HIDE_AVATARS="HIDE_AVATARS",Ci.DISABLE_PASSPORTS="DISABLE_PASSPORTS";var Ni,ki=function(A){function n(T){var E=A.call(this)||this;return E.area=T.area,E.modifiers=T.modifiers,E}return i(n,A),r([le.field,s("design:type",Object)],n.prototype,"area",void 0),r([le.field,s("design:type",Array)],n.prototype,"modifiers",void 0),r([P("engine.avatarModifierArea",T.CLASS_ID.AVATAR_MODIFIER_AREA),s("design:paramtypes",[Object])],n)}(le),Pi=function(A){function n(T){void 0===T&&(T={});var E=A.call(this)||this;return E.position=T.position||un.Vector3.Zero(),E.rotation=T.rotation||un.Quaternion.Identity,E.scale=T.scale||new un.Vector3(1,1,1),E}return i(n,A),Object.defineProperty(n.prototype,"eulerAngles",{get:function(){return this.rotation.eulerAngles},enumerable:!1,configurable:!0}),n.prototype.lookAt=function(T,A){void 0===A&&(A=un.MathTmp.staticUp);var E=new un.Matrix;return un.Matrix.LookAtLHToRef(this.position,T,A,E),E.invert(),un.Quaternion.FromRotationMatrixToRef(E,this.rotation),this},n.prototype.rotate=function(T,A){return this.rotation.multiplyInPlace(this.rotation.angleAxis(A,T)),this},n.prototype.translate=function(T){return this.position.addInPlace(T),this},r([le.field,s("design:type",un.Vector3)],n.prototype,"position",void 0),r([le.field,s("design:type",un.Quaternion)],n.prototype,"rotation",void 0),r([le.field,s("design:type",un.Vector3)],n.prototype,"scale",void 0),r([P("engine.transform",T.CLASS_ID.TRANSFORM),s("design:paramtypes",[Object])],n)}(le);T.AttachToAvatarAnchorPointId=void 0,(Ni=T.AttachToAvatarAnchorPointId||(T.AttachToAvatarAnchorPointId={}))[Ni.Position=0]="Position",Ni[Ni.NameTag=1]="NameTag",Ni[Ni.LeftHand=2]="LeftHand",Ni[Ni.RightHand=3]="RightHand";var zi,Mi=function(A){function n(E){void 0===E&&(E={});var O=A.call(this)||this;return O.avatarId=E.avatarId||"",O.anchorPointId=E.anchorPointId||T.AttachToAvatarAnchorPointId.Position,O}return i(n,A),r([le.field,s("design:type",String)],n.prototype,"avatarId",void 0),r([le.field,s("design:type",Number)],n.prototype,"anchorPointId",void 0),r([le.field,s("design:type",String)],n.prototype,"avatarSceneId",void 0),r([P("engine.transform",T.CLASS_ID.AVATAR_ATTACH),s("design:paramtypes",[Object])],n)}(le),Bi=function(A){function n(T,E,O){void 0===T&&(T=!0),void 0===E&&(E=!0),void 0===O&&(O=!0);var k=A.call(this)||this;return k.x=!0,k.y=!0,k.z=!0,k.x=T,k.y=E,k.z=O,k}return i(n,A),r([le.field,s("design:type",Boolean)],n.prototype,"x",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"y",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"z",void 0),r([P("engine.billboard",T.CLASS_ID.BILLBOARD),s("design:paramtypes",[Boolean,Boolean,Boolean])],n)}(le),Di=function(T){function e(){var A=null!==T&&T.apply(this,arguments)||this;return A.withCollisions=!0,A.isPointerBlocker=!0,A.visible=!0,A}return i(e,T),r([le.field,s("design:type",Boolean)],e.prototype,"withCollisions",void 0),r([le.field,s("design:type",Boolean)],e.prototype,"isPointerBlocker",void 0),r([le.field,s("design:type",Boolean)],e.prototype,"visible",void 0),e}(le),Li=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return i(n,A),r([le.field,s("design:type",Array)],n.prototype,"uvs",void 0),r([N("engine.shape",T.CLASS_ID.BOX_SHAPE)],n)}(Di),Ui=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return i(n,A),r([N("engine.shape",T.CLASS_ID.SPHERE_SHAPE)],n)}(Di),Hi=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"segments",void 0),r([le.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",T.CLASS_ID.CIRCLE_SHAPE)],n)}(Di),ji=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.width=1,T.height=1,T}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"width",void 0),r([le.field,s("design:type",Number)],n.prototype,"height",void 0),r([le.field,s("design:type",Array)],n.prototype,"uvs",void 0),r([N("engine.shape",T.CLASS_ID.PLANE_SHAPE)],n)}(Di),Vi=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.radiusTop=0,T.radiusBottom=1,T.segmentsHeight=1,T.segmentsRadial=36,T.openEnded=!1,T.radius=null,T.arc=360,T}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"radiusTop",void 0),r([le.field,s("design:type",Number)],n.prototype,"radiusBottom",void 0),r([le.field,s("design:type",Number)],n.prototype,"segmentsHeight",void 0),r([le.field,s("design:type",Number)],n.prototype,"segmentsRadial",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"openEnded",void 0),r([le.field,s("design:type",Object)],n.prototype,"radius",void 0),r([le.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",T.CLASS_ID.CONE_SHAPE)],n)}(Di),Wi=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.radiusTop=1,T.radiusBottom=1,T.segmentsHeight=1,T.segmentsRadial=36,T.openEnded=!1,T.radius=null,T.arc=360,T}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"radiusTop",void 0),r([le.field,s("design:type",Number)],n.prototype,"radiusBottom",void 0),r([le.field,s("design:type",Number)],n.prototype,"segmentsHeight",void 0),r([le.field,s("design:type",Number)],n.prototype,"segmentsRadial",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"openEnded",void 0),r([le.field,s("design:type",Object)],n.prototype,"radius",void 0),r([le.field,s("design:type",Number)],n.prototype,"arc",void 0),r([N("engine.shape",T.CLASS_ID.CYLINDER_SHAPE)],n)}(Di),Gi=function(A){function n(T){var E=A.call(this)||this;return E.src=T,E}return i(n,A),r([Di.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.shape",T.CLASS_ID.GLTF_SHAPE),s("design:paramtypes",[String])],n)}(Di);T.PictureFrameStyle=void 0,(zi=T.PictureFrameStyle||(T.PictureFrameStyle={}))[zi.Classic=0]="Classic",zi[zi.Baroque_Ornament=1]="Baroque_Ornament",zi[zi.Diamond_Ornament=2]="Diamond_Ornament",zi[zi.Minimal_Wide=3]="Minimal_Wide",zi[zi.Minimal_Grey=4]="Minimal_Grey",zi[zi.Blocky=5]="Blocky",zi[zi.Gold_Edges=6]="Gold_Edges",zi[zi.Gold_Carved=7]="Gold_Carved",zi[zi.Gold_Wide=8]="Gold_Wide",zi[zi.Gold_Rounded=9]="Gold_Rounded",zi[zi.Metal_Medium=10]="Metal_Medium",zi[zi.Metal_Wide=11]="Metal_Wide",zi[zi.Metal_Slim=12]="Metal_Slim",zi[zi.Metal_Rounded=13]="Metal_Rounded",zi[zi.Pins=14]="Pins",zi[zi.Minimal_Black=15]="Minimal_Black",zi[zi.Minimal_White=16]="Minimal_White",zi[zi.Tape=17]="Tape",zi[zi.Wood_Slim=18]="Wood_Slim",zi[zi.Wood_Wide=19]="Wood_Wide",zi[zi.Wood_Twigs=20]="Wood_Twigs",zi[zi.Canvas=21]="Canvas",zi[zi.None=22]="None";var qi,Xi=function(A){function n(E,O){void 0===O&&(O={});var k=A.call(this)||this;k.src=E;var B=new un.Color3(.6404918,.611472,.8584906),_t=T.PictureFrameStyle.Classic;return"r"in O?B=O:null!==O&&(O.color&&(B=O.color),O.style&&(_t=O.style)),k.color=B,k.style=_t,k}return i(n,A),r([Di.readonly,s("design:type",String)],n.prototype,"src",void 0),r([Di.readonly,s("design:type",Number)],n.prototype,"style",void 0),r([le.field,s("design:type",un.Color3)],n.prototype,"color",void 0),r([N("engine.shape",T.CLASS_ID.NFT_SHAPE),s("design:paramtypes",[String,Object])],n)}(Di),Yi=function(A){function n(T,E){var O=A.call(this)||this,k=new RegExp("data:[a-z-]+/[a-z-]+;base64");if((T.length>2048||k.test(T))&&c(" Base64 textures will be deprecated in version 7 of decentraland-ecs"),O.src=T,E)for(var B in E)O[B]=E[B];return O}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"src",void 0),r([le.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([le.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([le.readonly,s("design:type",Boolean)],n.prototype,"hasAlpha",void 0),r([N("engine.texture",T.CLASS_ID.TEXTURE),s("design:paramtypes",[String,Object])],n)}(le),$i=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.states=[],T}return i(n,A),n.prototype.addClip=function(T){var A=this;return this.states.push(T),T.onChange((function(){A.dirty=!0})),T.owner=this,this},n.prototype.getClip=function(T){for(var A=0;A<this.states.length;A++){var E=this.states[A];if(E.clip===T)return E}var O=new Si(T);return this.addClip(O),O},n.prototype.stop=function(T){if(T)T.playing=!1,T.shouldReset=!0;else for(var A=0;A<this.states.length;A++){var E=this.states[A];this.stop(E)}},n.prototype.play=function(T,A){void 0===A&&(A=!1);for(var E=0;E<this.states.length;E++){var O=this.states[E];O.layer===T.layer&&T!==O&&this.pause(O)}A&&(T.shouldReset=!0),T.playing=!0,T.dirty=!0,T.data.nonce=Math.random()},n.prototype.pause=function(T){if(T)T.playing=!1;else for(var A=0;A<this.states.length;A++){var E=this.states[A];this.pause(E)}},r([le.readonly,s("design:type",Array)],n.prototype,"states",void 0),r([P("engine.animator",T.CLASS_ID.ANIMATION)],n)}(Di),Ji=function(A){function n(T){var E=A.call(this)||this;return E.src=T,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.shape",T.CLASS_ID.OBJ_SHAPE),s("design:paramtypes",[String])],n)}(Di),Qi=function(A){function n(T){void 0===T&&(T="");var E=A.call(this)||this;return E.src=T,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"src",void 0),r([N("engine.font",T.CLASS_ID.FONT),s("design:paramtypes",[String])],n)}(le);T.Fonts=void 0,(qi=T.Fonts||(T.Fonts={})).SanFrancisco="builtin:SF-UI-Text-Regular SDF",qi.SanFrancisco_Heavy="builtin:SF-UI-Text-Heavy SDF",qi.SanFrancisco_Semibold="builtin:SF-UI-Text-Semibold SDF",qi.LiberationSans="builtin:LiberationSans SDF",qi.SansSerif="SansSerif",qi.SansSerif_Heavy="SansSerif_Heavy",qi.SansSerif_Bold="SansSerif_Bold",qi.SansSerif_SemiBold="SansSerif_SemiBold";var Zi,Ki=function(A){function n(T){var E=A.call(this)||this;return E.outlineWidth=0,E.outlineColor=new un.Color3(1,1,1),E.color=new un.Color3(1,1,1),E.fontSize=10,E.opacity=1,E.value="",E.lineSpacing="0px",E.lineCount=0,E.textWrapping=!1,E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0,E.shadowColor=new un.Color3(1,1,1),E.hTextAlign="center",E.vTextAlign="center",E.width=1,E.height=1,E.paddingTop=0,E.paddingRight=0,E.paddingBottom=0,E.paddingLeft=0,E.billboard=!1,E.visible=!0,T&&(E.value=T),E}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([le.field,s("design:type",un.Color3)],n.prototype,"outlineColor",void 0),r([le.field,s("design:type",un.Color3)],n.prototype,"color",void 0),r([le.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([le.component,s("design:type",Qi)],n.prototype,"font",void 0),r([le.field,s("design:type",Number)],n.prototype,"opacity",void 0),r([le.field,s("design:type",String)],n.prototype,"value",void 0),r([le.field,s("design:type",String)],n.prototype,"lineSpacing",void 0),r([le.field,s("design:type",Number)],n.prototype,"lineCount",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([le.field,s("design:type",un.Color3)],n.prototype,"shadowColor",void 0),r([le.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([le.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([le.field,s("design:type",Number)],n.prototype,"width",void 0),r([le.field,s("design:type",Number)],n.prototype,"height",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"billboard",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"visible",void 0),r([P("engine.text",T.CLASS_ID.TEXT_SHAPE),s("design:paramtypes",[String])],n)}(le);T.TransparencyMode=void 0,(Zi=T.TransparencyMode||(T.TransparencyMode={}))[Zi.OPAQUE=0]="OPAQUE",Zi[Zi.ALPHA_TEST=1]="ALPHA_TEST",Zi[Zi.ALPHA_BLEND=2]="ALPHA_BLEND",Zi[Zi.ALPHA_TEST_AND_BLEND=3]="ALPHA_TEST_AND_BLEND",Zi[Zi.AUTO=4]="AUTO";var to,eo=function(A){function n(){var E=null!==A&&A.apply(this,arguments)||this;return E.alphaTest=.5,E.castShadows=!0,E.transparencyMode=T.TransparencyMode.AUTO,E}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"alphaTest",void 0),r([le.field,s("design:type",Object)],n.prototype,"albedoColor",void 0),r([le.field,s("design:type",un.Color3)],n.prototype,"emissiveColor",void 0),r([le.field,s("design:type",Number)],n.prototype,"metallic",void 0),r([le.field,s("design:type",Number)],n.prototype,"roughness",void 0),r([le.field,s("design:type",un.Color3)],n.prototype,"reflectivityColor",void 0),r([le.field,s("design:type",Number)],n.prototype,"directIntensity",void 0),r([le.field,s("design:type",Number)],n.prototype,"microSurface",void 0),r([le.field,s("design:type",Number)],n.prototype,"emissiveIntensity",void 0),r([le.field,s("design:type",Number)],n.prototype,"specularIntensity",void 0),r([le.component,s("design:type",Object)],n.prototype,"albedoTexture",void 0),r([le.component,s("design:type",Object)],n.prototype,"alphaTexture",void 0),r([le.component,s("design:type",Object)],n.prototype,"emissiveTexture",void 0),r([le.component,s("design:type",Object)],n.prototype,"bumpTexture",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"castShadows",void 0),r([le.field,s("design:type",Number)],n.prototype,"transparencyMode",void 0),r([N("engine.material",T.CLASS_ID.PBR_MATERIAL)],n)}(le),no=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.alphaTest=.5,T.castShadows=!0,T}return i(n,A),r([le.component,s("design:type",Object)],n.prototype,"texture",void 0),r([le.field,s("design:type",Number)],n.prototype,"alphaTest",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"castShadows",void 0),r([N("engine.material",T.CLASS_ID.BASIC_MATERIAL)],n)}(le),io=function(T){function e(A){var E=T.call(this)||this;if(E.uuid=f("UUID"),!A||!("apply"in A)||!("call"in A))throw new Error("Callback is not a function");return E.callback=A,E}return i(e,T),e.uuidEvent=function(T,A){if(delete T[A]){var E=A+"_"+Math.random();T[E]=void 0,Object.defineProperty(T,E,o(o({},Object.getOwnPropertyDescriptor(T,E)),{enumerable:!1})),Object.defineProperty(T,A.toString(),{get:function(){return this[E]},set:function(T){var O=this[E];if(T){if(!(T instanceof e))throw new Error("value is not an OnUUIDEvent");this.data[A]=T.uuid}else this.data[A]=null;if(this[E]=T,T!==O){this.dirty=!0;for(var k=0;k<this.subscriptions.length;k++)this.subscriptions[k](A,T,O)}},enumerable:!0})}},e.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type}},r([le.field,s("design:type",Function)],e.prototype,"callback",void 0),e}(le),oo=function(A){function n(){var E=null!==A&&A.apply(this,arguments)||this;return E.button=T.ActionButton.ANY,E.hoverText="Interact",E.distance=10,E.showFeedback=!0,E}return i(n,A),n.prototype.toJSON=function(){return{uuid:this.uuid,type:this.type,button:this.button,hoverText:this.hoverText,distance:this.distance,showFeedback:this.showFeedback}},r([le.field,s("design:type",String)],n.prototype,"button",void 0),r([le.field,s("design:type",String)],n.prototype,"hoverText",void 0),r([le.field,s("design:type",Number)],n.prototype,"distance",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"showFeedback",void 0),n}(io),ro=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.type="onPointerLock",T}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onPointerLock",T.CLASS_ID.UUID_CALLBACK)],n)}(io),so=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.type="onAnimationEnd",T}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onAnimationEnd",T.CLASS_ID.UUID_CALLBACK)],n)}(io),ao=function(A){function n(){return null!==A&&A.apply(this,arguments)||this}return i(n,A),r([P("engine.smartItem",T.CLASS_ID.SMART_ITEM)],n)}(le),co=function(A){function n(T){var E=A.call(this)||this;return E.url=T,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"url",void 0),r([N("engine.VideoClip",T.CLASS_ID.VIDEO_CLIP),s("design:paramtypes",[String])],n)}(le);T.VideoStatus=void 0,(to=T.VideoStatus||(T.VideoStatus={}))[to.NONE=0]="NONE",to[to.ERROR=1]="ERROR",to[to.LOADING=2]="LOADING",to[to.READY=3]="READY",to[to.PLAYING=4]="PLAYING",to[to.BUFFERING=5]="BUFFERING";var lo,uo=function(A){function n(E,O){var k=A.call(this)||this;if(k.volume=1,k.playbackRate=1,k.loop=!1,k.seek=-1,k._position=-1,k._videoLength=-1,k._status=T.VideoStatus.NONE,k.playing=!1,!(E instanceof co))throw new Error("Trying to create VideoTexture(VideoClip) with an invalid VideoClip");if(k.videoClipId=D(E),O)for(var B in O)k[B]=O[B];return k}return i(n,A),n.prototype.play=function(){this.playing=!0},n.prototype.pause=function(){this.playing=!1},n.prototype.reset=function(){this.seekTime(0),this.pause()},n.prototype.seekTime=function(T){this.seek=T,this.dirty=!0,this.data.nonce=Math.random()},n.prototype.toJSON=function(){if(this.seek>=0){var T=JSON.parse(JSON.stringify(A.prototype.toJSON.call(this)));return this.seek=-1,T}return A.prototype.toJSON.call(this)},n.prototype.update=function(A){A.videoClipId===this.videoClipId&&(this._status=A.videoStatus||T.VideoStatus.NONE,this._videoLength=A.totalVideoLength,this._position=A.currentOffset)},Object.defineProperty(n.prototype,"position",{get:function(){return this._position},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"videoLength",{get:function(){return this._videoLength},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"status",{get:function(){return this._status},enumerable:!1,configurable:!0}),r([le.readonly,s("design:type",String)],n.prototype,"videoClipId",void 0),r([le.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([le.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([le.field,s("design:type",Number)],n.prototype,"volume",void 0),r([le.field,s("design:type",Number)],n.prototype,"playbackRate",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([le.field,s("design:type",Number)],n.prototype,"seek",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([N("engine.VideoTexture",T.CLASS_ID.VIDEO_TEXTURE),s("design:paramtypes",[co,Object])],n)}(le),ho=function(A){function n(T){var E=A.call(this)||this;return E.area=T.area,E.cameraMode=T.cameraMode,E}return i(n,A),r([le.field,s("design:type",Object)],n.prototype,"area",void 0),r([le.field,s("design:type",Number)],n.prototype,"cameraMode",void 0),r([P("engine.cameraModeArea",T.CLASS_ID.CAMERA_MODE_AREA),s("design:paramtypes",[Object])],n)}(le),po=function(A){function n(T,E){var O=A.call(this)||this;if(O.userId=T,E)for(var k in E)O[k]=E[k];return O}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"userId",void 0),r([le.readonly,s("design:type",Number)],n.prototype,"samplingMode",void 0),r([le.readonly,s("design:type",Number)],n.prototype,"wrap",void 0),r([le.readonly,s("design:type",Boolean)],n.prototype,"hasAlpha",void 0),r([N("engine.texture",T.CLASS_ID.AVATAR_TEXTURE),s("design:paramtypes",[String,Object])],n)}(le),fo=function(){function e(){var A=this;this.position=new un.Vector3,this.rotation=new un.Quaternion,this.feetPosition=new un.Vector3,this.worldPosition=new un.Vector3,this.lastEventPosition={x:0,y:0,z:0},this.lastEventWorldPosition={x:0,y:0,z:0},this.lastEventRotation={x:0,y:0,z:0,w:1},this._playerHeight=1.6,this._cameraMode=T.CameraMode.ThirdPerson,"undefined"!=typeof dcl&&(dcl.subscribe("positionChanged"),dcl.subscribe("rotationChanged"),dcl.subscribe("cameraModeChanged"),dcl.onEvent((function(T){switch(T.type){case"positionChanged":A.positionChanged(T.data);break;case"rotationChanged":A.rotationChanged(T.data);break;case"cameraModeChanged":A.cameraModeChanged(T.data)}}))),Object.defineProperty(this.position,"x",{get:function(){return A.lastEventPosition.x}}),Object.defineProperty(this.position,"y",{get:function(){return A.lastEventPosition.y}}),Object.defineProperty(this.position,"z",{get:function(){return A.lastEventPosition.z}}),Object.defineProperty(this.worldPosition,"x",{get:function(){return A.lastEventWorldPosition.x}}),Object.defineProperty(this.worldPosition,"y",{get:function(){return A.lastEventWorldPosition.y}}),Object.defineProperty(this.worldPosition,"z",{get:function(){return A.lastEventWorldPosition.z}}),Object.defineProperty(this.feetPosition,"x",{get:function(){return A.lastEventPosition.x}}),Object.defineProperty(this.feetPosition,"y",{get:function(){return A.lastEventPosition.y-A.playerHeight}}),Object.defineProperty(this.feetPosition,"z",{get:function(){return A.lastEventPosition.z}}),Object.defineProperty(this.rotation,"x",{get:function(){return A.lastEventRotation.x}}),Object.defineProperty(this.rotation,"y",{get:function(){return A.lastEventRotation.y}}),Object.defineProperty(this.rotation,"z",{get:function(){return A.lastEventRotation.z}}),Object.defineProperty(this.rotation,"w",{get:function(){return A.lastEventRotation.w}})}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playerHeight",{get:function(){return this._playerHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraMode",{get:function(){return this._cameraMode},enumerable:!1,configurable:!0}),e.prototype.positionChanged=function(T){this.lastEventPosition=T.position,this.lastEventWorldPosition=T.cameraPosition,this._playerHeight=T.playerHeight},e.prototype.rotationChanged=function(T){this.lastEventRotation=T.quaternion},e.prototype.cameraModeChanged=function(T){this._cameraMode=T.cameraMode},e}();!function(T){T.HitFirst="rqhf",T.HitAll="rqha"}(lo||(lo={}));var yo,go=function(){function t(){this.queries={}}return Object.defineProperty(t,"instance",{get:function(){return t.ensureInstance(),t._instance},enumerable:!1,configurable:!0}),t.ensureInstance=function(){t._instance||(t._instance=new t)},t.prototype.getRayFromCamera=function(T){var A=fo.instance.rotation,E=un.Matrix.Identity();A.toRotationMatrix(E);var O=un.Vector3.TransformCoordinates(un.Vector3.Forward(),E);return{origin:fo.instance.position,direction:O,distance:T}},t.prototype.getRayFromPositions=function(T,A){var E=A.subtract(T),O=E.length();return{origin:T,direction:E.normalize(),distance:O}},t.prototype.hitFirst=function(T,A,E){var O="number"==typeof E?lo.HitFirst+E:m();this.queries[O]=A,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:O,queryType:"HitFirst",ray:T})},t.prototype.hitAll=function(T,A,E){var O="number"==typeof E?lo.HitAll+E:m();this.queries[O]=A,"undefined"!=typeof dcl&&dcl.query("raycast",{queryId:O,queryType:"HitAll",ray:T})},t.prototype.hitFirstAvatar=function(T,A){c("not implemented yet")},t.prototype.hitAllAvatars=function(T,A){c("not implemented yet")},t.prototype.handleRaycastHitFirstResponse=function(T){this.queries[T.payload.queryId](T.payload.payload),delete this.queries[T.payload.queryId]},t.prototype.handleRaycastHitAllResponse=function(T){this.queries[T.payload.queryId](T.payload.payload),delete this.queries[T.payload.queryId]},t}(),mo=function(){function t(){}return t.prototype.activate=function(T){T.eventManager.addListener(He,this,(function(T){"HitFirst"===T.payload.queryType?go.instance.handleRaycastHitFirstResponse(T):"HitAll"===T.payload.queryType&&go.instance.handleRaycastHitAllResponse(T)})),"undefined"!=typeof dcl&&dcl.subscribe("raycastResponse")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("raycastResponse")},t}(),vo=function(){function t(){}return t.prototype.activate=function(T){T.eventManager.addListener(Ve,this,(function(T){Fi.instance.handlePointerEvent(T.payload)})),"undefined"!=typeof dcl&&(dcl.subscribe("pointerUp"),dcl.subscribe("pointerDown"),dcl.subscribe("actionButtonEvent"))},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&(dcl.unsubscribe("pointerUp"),dcl.unsubscribe("pointerDown"),dcl.unsubscribe("actionButtonEvent"))},t}(),bo=function(){function t(){this.handlerMap={}}return t.prototype.activate=function(T){T.eventManager.addListener(Ue,this,this.handleEvent),T.eventManager.addListener(Ft,this,this.componentAdded),T.eventManager.addListener(_t,this,this.componentRemoved),"undefined"!=typeof dcl&&dcl.subscribe("uuidEvent")},t.prototype.deactivate=function(){"undefined"!=typeof dcl&&dcl.unsubscribe("uuidEvent")},t.prototype.onAddEntity=function(T){for(var A in T.components){var E=T.components[A];E instanceof io&&(this.handlerMap[E.uuid]=E)}},t.prototype.onRemoveEntity=function(T){for(var A in T.components){var E=T.components[A];E instanceof io&&delete this.handlerMap[E.uuid]}},t.prototype.componentAdded=function(T){if(T.entity.isAddedToEngine()){var A=T.entity.components[T.componentName];A instanceof io&&(this.handlerMap[A.uuid]=A)}},t.prototype.componentRemoved=function(T){T.entity.isAddedToEngine()&&T.component instanceof io&&delete this.handlerMap[T.component.uuid]},t.prototype.handleEvent=function(T){if(T.uuid in this.handlerMap){var A=this.handlerMap[T.uuid];A&&A.callback&&"call"in A.callback&&A.callback(T.payload)}},t}(),wo=new mo,To=new vo,xo=new bo,Ao=function(A){function n(T){var E=A.call(this)||this;return E.loop=!1,E.volume=1,E.url=T,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"url",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([le.field,s("design:type",String)],n.prototype,"loadingCompleteEventId",void 0),r([le.field,s("design:type",Number)],n.prototype,"volume",void 0),r([N("engine.AudioClip",T.CLASS_ID.AUDIO_CLIP),s("design:paramtypes",[String])],n)}(le),_o=function(A){function n(T){var E=A.call(this)||this;if(E.audioClip=T,E.loop=!1,E.volume=1,E.playing=!1,E.pitch=1,E.playedAtTimestamp=Date.now(),!(T instanceof Ao))throw new Error("Trying to create AudioSource(AudioClip) with an invalid AudioClip");return E.audioClipId=D(T),E}return i(n,A),n.prototype.playOnce=function(){return this.playing=!0,this.dirty=!0,this.playedAtTimestamp=Date.now(),this.data.nonce=Math.random(),this},r([le.readonly,s("design:type",String)],n.prototype,"audioClipId",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"loop",void 0),r([le.field,s("design:type",Number)],n.prototype,"volume",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([le.field,s("design:type",Number)],n.prototype,"pitch",void 0),r([le.field,s("design:type",Number)],n.prototype,"playedAtTimestamp",void 0),r([P("engine.AudioSource",T.CLASS_ID.AUDIO_SOURCE),s("design:paramtypes",[Ao])],n)}(le),So=function(A){function n(T){var E=A.call(this)||this;return E.playing=!1,E.volume=1,E.url=T,E.playing=!0,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"url",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"playing",void 0),r([le.field,s("design:type",Number)],n.prototype,"volume",void 0),r([P("engine.AudioStream",T.CLASS_ID.AUDIO_STREAM),s("design:paramtypes",[String])],n)}(le);T.Gizmo=void 0,(yo=T.Gizmo||(T.Gizmo={})).MOVE="MOVE",yo.ROTATE="ROTATE",yo.SCALE="SCALE",yo.NONE="NONE";var Eo,Co=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.type="gizmoEvent",T}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.gizmoEvent",T.CLASS_ID.UUID_CALLBACK)],n)}(io),Io=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.position=!0,T.rotation=!0,T.scale=!0,T.cycle=!0,T.localReference=!1,T}return i(n,A),r([le.field,s("design:type",Boolean)],n.prototype,"position",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"rotation",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"scale",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"cycle",void 0),r([le.field,s("design:type",String)],n.prototype,"selectedGizmo",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"localReference",void 0),r([P("engine.gizmos",T.CLASS_ID.GIZMOS)],n)}(le),Ro=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onFocus",xo.handlerMap[E.uuid]=E,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onFocus",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(io),Oo=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onTextSubmit",xo.handlerMap[E.uuid]=E,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onTextSubmit",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(io),Fo=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onBlur",xo.handlerMap[E.uuid]=E,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onBlur",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(io),No=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onEnter",xo.handlerMap[E.uuid]=E,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onEnter",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(io),ko=function(A){function n(T){var E=A.call(this,T)||this;return E.type="onChange",xo.handlerMap[E.uuid]=E,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onChange",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(io),Po=function(A){function n(T,E){var O=A.call(this,T)||this;return O.type="onClick",xo.handlerMap[O.uuid]=O,E&&(O.showFeedback=!(!1===E.showFeedback),E.button&&(O.button=E.button),E.hoverText&&(O.hoverText=E.hoverText),E.distance&&(O.distance=E.distance)),O}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.onClick",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(oo),zo=function(A){function n(T,E){var O=A.call(this,T)||this;return O.type="pointerDown",xo.handlerMap[O.uuid]=O,E&&(O.showFeedback=!(!1===E.showFeedback),E.button&&(O.button=E.button),E.hoverText&&(O.hoverText=E.hoverText),E.distance&&(O.distance=E.distance)),O}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerDown",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(oo),Mo=function(A){function n(T,E){var O=A.call(this,T)||this;return O.type="pointerUp",xo.handlerMap[O.uuid]=O,E&&(O.showFeedback=!(!1===E.showFeedback),E.button&&(O.button=E.button),E.hoverText&&(O.hoverText=E.hoverText),E.distance&&(O.distance=E.distance)),O}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerUp",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(oo),Bo=function(A){function n(T,E){var O=A.call(this,T)||this;return O.type="pointerHoverEnter",xo.handlerMap[O.uuid]=O,E&&E.distance&&(O.distance=E.distance),O}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerHoverEnter",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function,Object])],n)}(oo),Do=function(A){function n(T){var E=A.call(this,T)||this;return E.type="pointerHoverExit",xo.handlerMap[E.uuid]=E,E.distance=160,E}return i(n,A),r([le.readonly,s("design:type",String)],n.prototype,"type",void 0),r([P("engine.pointerHoverExit",T.CLASS_ID.UUID_CALLBACK),s("design:paramtypes",[Function])],n)}(oo),Lo=function(T){function e(A){var E=T.call(this)||this;return E.name=null,E.visible=!0,E.opacity=1,E.hAlign="center",E.vAlign="center",E.width="100px",E.height="50px",E.positionX="0px",E.positionY="0px",E.isPointerBlocker=!0,A&&(E._parent=A,E.data.parentComponent=D(A)),E}return i(e,T),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentComponent",{get:function(){return this.data.parentComponent},enumerable:!1,configurable:!0}),r([le.field,s("design:type",Object)],e.prototype,"name",void 0),r([le.field,s("design:type",Boolean)],e.prototype,"visible",void 0),r([le.field,s("design:type",Number)],e.prototype,"opacity",void 0),r([le.field,s("design:type",String)],e.prototype,"hAlign",void 0),r([le.field,s("design:type",String)],e.prototype,"vAlign",void 0),r([le.uiValue,s("design:type",Object)],e.prototype,"width",void 0),r([le.uiValue,s("design:type",Object)],e.prototype,"height",void 0),r([le.uiValue,s("design:type",Object)],e.prototype,"positionX",void 0),r([le.uiValue,s("design:type",Object)],e.prototype,"positionY",void 0),r([le.field,s("design:type",Boolean)],e.prototype,"isPointerBlocker",void 0),e}(le),Uo=function(A){function n(){return A.call(this,null)||this}return i(n,A),r([N("engine.shape",T.CLASS_ID.UI_FULLSCREEN_SHAPE),s("design:paramtypes",[])],n)}(Lo),Ho=function(A){function n(){return A.call(this,null)||this}return i(n,A),r([N("engine.shape",T.CLASS_ID.UI_WORLD_SPACE_SHAPE),s("design:paramtypes",[])],n)}(Lo),jo=function(A){function n(){return A.call(this,null)||this}return i(n,A),r([N("engine.shape",T.CLASS_ID.UI_SCREEN_SPACE_SHAPE),s("design:paramtypes",[])],n)}(Lo),Vo=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.thickness=0,T.color=un.Color4.Clear(),T.alignmentUsesSize=!0,T}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"thickness",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"color",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"alignmentUsesSize",void 0),r([N("engine.shape",T.CLASS_ID.UI_CONTAINER_RECT)],n)}(Lo);T.UIStackOrientation=void 0,(Eo=T.UIStackOrientation||(T.UIStackOrientation={}))[Eo.VERTICAL=0]="VERTICAL",Eo[Eo.HORIZONTAL=1]="HORIZONTAL";var Wo=function(A){function n(){var E=null!==A&&A.apply(this,arguments)||this;return E.adaptWidth=!0,E.adaptHeight=!0,E.color=un.Color4.Clear(),E.stackOrientation=T.UIStackOrientation.VERTICAL,E.spacing=0,E}return i(n,A),r([le.field,s("design:type",Boolean)],n.prototype,"adaptWidth",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"adaptHeight",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"color",void 0),r([le.field,s("design:type",Number)],n.prototype,"stackOrientation",void 0),r([le.field,s("design:type",Number)],n.prototype,"spacing",void 0),r([N("engine.shape",T.CLASS_ID.UI_CONTAINER_STACK)],n)}(Lo),Go=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.fontSize=10,T.fontWeight="normal",T.thickness=0,T.cornerRadius=0,T.color=un.Color4.White(),T.background=un.Color4.White(),T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0,T.shadowColor=un.Color4.Black(),T.text="button",T}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([le.field,s("design:type",String)],n.prototype,"fontWeight",void 0),r([le.field,s("design:type",Number)],n.prototype,"thickness",void 0),r([le.field,s("design:type",Number)],n.prototype,"cornerRadius",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"color",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"background",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"shadowColor",void 0),r([le.field,s("design:type",String)],n.prototype,"text",void 0),r([N("engine.shape",T.CLASS_ID.UI_BUTTON_SHAPE)],n)}(Lo),qo=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.outlineWidth=0,T.outlineColor=un.Color4.White(),T.color=un.Color4.White(),T.fontSize=10,T.fontAutoSize=!1,T.value="",T.lineSpacing=0,T.lineCount=0,T.adaptWidth=!1,T.adaptHeight=!1,T.textWrapping=!1,T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0,T.shadowColor=un.Color4.Black(),T.hTextAlign="left",T.vTextAlign="bottom",T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"outlineColor",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"color",void 0),r([le.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"fontAutoSize",void 0),r([le.component,s("design:type",Qi)],n.prototype,"font",void 0),r([le.field,s("design:type",String)],n.prototype,"value",void 0),r([le.field,s("design:type",Number)],n.prototype,"lineSpacing",void 0),r([le.field,s("design:type",Number)],n.prototype,"lineCount",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"adaptWidth",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"adaptHeight",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"shadowColor",void 0),r([le.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([le.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([N("engine.shape",T.CLASS_ID.UI_TEXT_SHAPE)],n)}(Lo),Xo=function(A){function n(T){var E=A.call(this,T)||this;return E.outlineWidth=0,E.outlineColor=un.Color4.Black(),E.color=un.Color4.Clear(),E.fontSize=10,E.value="",E.placeholder="",E.margin=10,E.hTextAlign="left",E.vTextAlign="bottom",E.focusedBackground=un.Color4.Black(),E.textWrapping=!1,E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0,E.shadowColor=un.Color4.White(),E.paddingTop=0,E.paddingRight=0,E.paddingBottom=0,E.paddingLeft=0,E.onTextSubmit=null,E.onChanged=null,E.onFocus=null,E.onBlur=null,E.onTextChanged=new ko((function(T){var A=T.value,O=A.value,k=A.isSubmit,B=E.dirty;if(E.value=O,E.dirty=B,k&&E.onTextSubmit){var _t={text:O};E.onTextSubmit.callback(_t)}else if(!k&&E.onChanged){var Ft={value:O,pointerId:T.pointerId};E.onChanged.callback(Ft)}})),E}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"outlineWidth",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"outlineColor",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"color",void 0),r([le.field,s("design:type",Number)],n.prototype,"fontSize",void 0),r([le.component,s("design:type",Qi)],n.prototype,"font",void 0),r([le.field,s("design:type",String)],n.prototype,"value",void 0),r([le.field,s("design:type",String)],n.prototype,"placeholder",void 0),r([le.field,s("design:type",Number)],n.prototype,"margin",void 0),r([le.field,s("design:type",String)],n.prototype,"hTextAlign",void 0),r([le.field,s("design:type",String)],n.prototype,"vTextAlign",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"focusedBackground",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"textWrapping",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowBlur",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowOffsetX",void 0),r([le.field,s("design:type",Number)],n.prototype,"shadowOffsetY",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"shadowColor",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([io.uuidEvent,s("design:type",ko)],n.prototype,"onTextChanged",void 0),r([io.uuidEvent,s("design:type",Object)],n.prototype,"onFocus",void 0),r([io.uuidEvent,s("design:type",Object)],n.prototype,"onBlur",void 0),r([N("engine.shape",T.CLASS_ID.UI_INPUT_TEXT_SHAPE),s("design:paramtypes",[Object])],n)}(Lo),Yo=function(A){function n(T,E){var O=A.call(this,T)||this;return O.sourceLeft=0,O.sourceTop=0,O.sourceWidth=1,O.sourceHeight=1,O.paddingTop=0,O.paddingRight=0,O.paddingBottom=0,O.paddingLeft=0,O.sizeInPixels=!0,O.onClick=null,O.source=E,O}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"sourceLeft",void 0),r([le.field,s("design:type",Number)],n.prototype,"sourceTop",void 0),r([le.field,s("design:type",Number)],n.prototype,"sourceWidth",void 0),r([le.field,s("design:type",Number)],n.prototype,"sourceHeight",void 0),r([le.component,s("design:type",Yi)],n.prototype,"source",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"sizeInPixels",void 0),r([io.uuidEvent,s("design:type",Object)],n.prototype,"onClick",void 0),r([N("engine.shape",T.CLASS_ID.UI_IMAGE_SHAPE),s("design:paramtypes",[Lo,Yi])],n)}(Lo),$o=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.valueX=0,T.valueY=0,T.backgroundColor=un.Color4.Clear(),T.isHorizontal=!1,T.isVertical=!1,T.paddingTop=0,T.paddingRight=0,T.paddingBottom=0,T.paddingLeft=0,T.onChanged=null,T}return i(n,A),r([le.field,s("design:type",Number)],n.prototype,"valueX",void 0),r([le.field,s("design:type",Number)],n.prototype,"valueY",void 0),r([le.field,s("design:type",un.Color4)],n.prototype,"backgroundColor",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"isHorizontal",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"isVertical",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingTop",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingRight",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingBottom",void 0),r([le.field,s("design:type",Number)],n.prototype,"paddingLeft",void 0),r([io.uuidEvent,s("design:type",Object)],n.prototype,"onChanged",void 0),r([N("engine.shape",T.CLASS_ID.UI_SLIDER_SHAPE)],n)}(Lo),Jo=function(A){function n(){var T=null!==A&&A.apply(this,arguments)||this;return T.useDummyModel=!1,T.talking=!1,T}var E;return i(n,A),E=n,n.Dummy=function(){var T=new E;return T.useDummyModel=!0,T},r([le.field,s("design:type",String)],n.prototype,"id",void 0),r([le.field,s("design:type",String)],n.prototype,"name",void 0),r([le.field,s("design:type",String)],n.prototype,"expressionTriggerId",void 0),r([le.field,s("design:type",Number)],n.prototype,"expressionTriggerTimestamp",void 0),r([le.field,s("design:type",String)],n.prototype,"bodyShape",void 0),r([le.field,s("design:type",Array)],n.prototype,"wearables",void 0),r([le.field,s("design:type",Object)],n.prototype,"skinColor",void 0),r([le.field,s("design:type",Object)],n.prototype,"hairColor",void 0),r([le.field,s("design:type",Object)],n.prototype,"eyeColor",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"useDummyModel",void 0),r([le.field,s("design:type",Boolean)],n.prototype,"talking",void 0),E=r([P("engine.avatarShape",T.CLASS_ID.AVATAR_SHAPE)],n)}(le),Qo=null,Zo=null,Ko=null;function Ri(){return Ko||(Ko=new Le),Ko}var tr=function(){function t(){var T=this;this.messageQueue=[],this.connected=!1,this.flushing=!1,function(){if(!Zo){(Zo=dcl.loadModule("@decentraland/CommunicationsController",{})).then((function(T){Qo=T}));var T=Ri();dcl.subscribe("comms"),dcl.onEvent((function(A){"comms"===A.type&&T.notifyObservers(A.data)}))}return Zo}().then((function(){T.connected=!0,T.flush()}))}return t.prototype.on=function(T,A){return Ri().add((function(E){try{var O=JSON.parse(E.message);O.message===T&&A(O.payload,E.sender)}catch(E){dcl.error("Error parsing comms message "+(E.message||""),E)}}))},t.prototype.sendRaw=function(T){this.messageQueue.push(T),this.connected&&this.flush()},t.prototype.emit=function(T,A){var E=JSON.stringify({message:T,payload:A});this.sendRaw(E),Ri().notifyObservers({message:E,sender:"self"})},t.prototype.flush=function(){var T=this;if(0!==this.messageQueue.length&&this.connected&&Qo&&!this.flushing){var A=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(Qo.rpcHandle,"send",[A]).then((function(A){T.flushing=!1,T.flush()}),(function(A){T.flushing=!1,y("Error flushing MessageBus",A)}))}},t}(),er=new Se("scene");er.uuid="0";var nr=new Ce(er);N.engine=nr,"undefined"!=typeof dcl&&(nr.addSystem(new cn(dcl),1/0),mt(dcl)),nr.addSystem(xo),nr.addSystem(To),nr.addSystem(wo),T.AVATAR_OBSERVABLE="AVATAR_OBSERVABLE",T.Angle=un.Angle,T.AnimationState=Si,T.Animator=$i,T.Arc2=un.Arc2,T.AttachToAvatar=Mi,T.Attachable=A,T.AudioClip=Ao,T.AudioSource=_o,T.AudioStream=So,T.AvatarModifierArea=ki,T.AvatarShape=Jo,T.AvatarTexture=po,T.Axis=un.Axis,T.BasicMaterial=no,T.BezierCurve=un.BezierCurve,T.Billboard=Bi,T.BoxShape=Li,T.Camera=fo,T.CameraModeArea=ho,T.CircleShape=Hi,T.Color3=un.Color3,T.Color4=un.Color4,T.Component=P,T.ComponentAdded=Ft,T.ComponentGroup=ve,T.ComponentRemoved=_t,T.ConeShape=Vi,T.Curve3=un.Curve3,T.CylinderShape=Wi,T.DEG2RAD=un.DEG2RAD,T.DisposableComponent=N,T.DisposableComponentCreated=Kt,T.DisposableComponentRemoved=ee,T.DisposableComponentUpdated=ne,T.Engine=Ce,T.Entity=Se,T.Epsilon=un.Epsilon,T.EventConstructor=x,T.EventManager=k,T.Font=Qi,T.Frustum=un.Frustum,T.GLTFShape=Gi,T.Gizmos=Io,T.GlobalPointerDown=Ii,T.GlobalPointerUp=Oi,T.Input=Fi,T.Material=eo,T.Matrix=un.Matrix,T.MessageBus=tr,T.MultiObserver=Pe,T.NFTShape=Xi,T.OBJShape=Ji,T.Observable=Le,T.ObservableComponent=le,T.Observer=Y,T.ObserverEventState=Ne,T.OnAnimationEnd=so,T.OnBlur=Fo,T.OnChanged=ko,T.OnClick=Po,T.OnEnter=No,T.OnFocus=Ro,T.OnGizmoEvent=Co,T.OnPointerDown=zo,T.OnPointerHoverEnter=Bo,T.OnPointerHoverExit=Do,T.OnPointerLock=ro,T.OnPointerUUIDEvent=oo,T.OnPointerUp=Mo,T.OnTextSubmit=Oo,T.OnUUIDEvent=io,T.Orientation=un.Orientation,T.ParentChanged=Pt,T.Path2=un.Path2,T.Path3D=un.Path3D,T.PhysicsCast=go,T.Plane=un.Plane,T.PlaneShape=ji,T.PointerEvent=Ve,T.PointerEventComponent=Ke,T.PointerEventSystem=vo,T.Quaternion=un.Quaternion,T.RAD2DEG=un.RAD2DEG,T.RaycastEventSystem=mo,T.RaycastResponse=He,T.Scalar=un.Scalar,T.Shape=Di,T.Size=un.Size,T.SmartItem=ao,T.Space=un.Space,T.SphereShape=Ui,T.Subscription=en,T.TextShape=Ki,T.Texture=Yi,T.ToGammaSpace=un.ToGammaSpace,T.ToLinearSpace=un.ToLinearSpace,T.Transform=Pi,T.UIButton=Go,T.UICanvas=jo,T.UIContainerRect=Vo,T.UIContainerStack=Wo,T.UIFullScreen=Uo,T.UIImage=Yo,T.UIInputText=Xo,T.UIScrollRect=$o,T.UIShape=Lo,T.UIText=qo,T.UIValue=Lt,T.UIWorldSpace=Ho,T.UUIDEvent=Ue,T.UUIDEventSystem=bo,T.Vector2=un.Vector2,T.Vector3=un.Vector3,T.Vector4=un.Vector4,T.VideoClip=co,T.VideoTexture=uo,T._initEventObservables=mt,T.buildArray=function(T,A){for(var E=[],O=0;O<T;++O)E.push(A());return E},T.engine=nr,T.error=y,T.executeTask=G,T.getComponentClassId=L,T.getComponentId=D,T.getComponentName=F,T.getMessageObserver=Ri,T.isDisposableComponent=U,T.log=c,T.newId=f,T.onCameraModeChangedObservable=We,T.onEnterScene=Xe,T.onEnterSceneObservable=qe,T.onIdleStateChangedObservable=Ge,T.onLeaveScene=$e,T.onLeaveSceneObservable=Ye,T.onPlayerClickedObservable=an,T.onPlayerConnectedObservable=on,T.onPlayerDisconnectedObservable=rn,T.onPlayerExpressionObservable=Qe,T.onPointerLockedStateChange=Ze,T.onProfileChanged=nn,T.onRealmChangedObservable=sn,T.onSceneReadyObservable=Je,T.onVideoEvent=tn,T.openExternalURL=function(T){"undefined"!=typeof dcl?dcl.openExternalUrl(T):y("ERROR: openExternalURL dcl is undefined")},T.openNFTDialog=function(T,A){if(void 0===A&&(A=null),"undefined"!=typeof dcl){var E=T.match(/ethereum:\/\/(.+)\/(.+)/);if(!E||E.length<3)return;dcl.openNFTDialog(E[1],E[2],A)}else y("ERROR: openNFTDialog dcl is undefined")},T.pointerEventSystem=To,T.raycastEventSystem=wo,T.teleportTo=function(T){var A;A=[T],void 0===Re&&"undefined"!=typeof dcl&&(Re=dcl.loadModule("@decentraland/UserActionModule",{})),void 0!==Re&&"undefined"!=typeof dcl&&Re.then((function(T){dcl.callRpc(T.rpcHandle,"requestTeleport",A)}))},T.uuid=m,T.uuidEventSystem=xo,Object.defineProperty(T,"__esModule",{value:!0})}(this.self=this.self||{}),function(T,A){"object"==typeof exports&&"undefined"!=typeof module?A(exports):"function"==typeof define&&define.amd?define("@dcl/ui-scene-utils",["exports"],A):A((T="undefined"!=typeof globalThis?globalThis:T||self)["ui-utils"]={})}(this,(function(T){
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var e=function(T,A){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,A){T.__proto__=A}||function(T,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(T[E]=A[E])})(T,A)};function i(T,A){function o(){this.constructor=T}e(T,A),T.prototype=null===A?Object.create(A):(o.prototype=A.prototype,new o)}var o=function(){return(o=Object.assign||function(T){for(var A,E=1,O=arguments.length;E<O;E++)for(var k in A=arguments[E])Object.prototype.hasOwnProperty.call(A,k)&&(T[k]=A[k]);return T}).apply(this,arguments)};function n(T,A){var E={};for(var O in T)Object.prototype.hasOwnProperty.call(T,O)&&A.indexOf(O)<0&&(E[O]=T[O]);if(null!=T&&"function"==typeof Object.getOwnPropertySymbols){var k=0;for(O=Object.getOwnPropertySymbols(T);k<O.length;k++)A.indexOf(O[k])<0&&Object.prototype.propertyIsEnumerable.call(T,O[k])&&(E[O[k]]=T[O[k]])}return E}function r(T){var A="function"==typeof Symbol&&Symbol.iterator,E=A&&T[A],O=0;if(E)return E.call(T);if(T&&"number"==typeof T.length)return{next:function(){return T&&O>=T.length&&(T=void 0),{value:T&&T[O++],done:!T}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}var A=function(){function t(A,E){var k=this;O.createAndAddToEngine(),this.elapsedTime=0,this.targetTime=A,this.onTimeReachedCallback=E,this.onTargetTimeReached=function(A){k.onTimeReachedCallback(),A.removeComponent(T)}}var T;return T=t,t.prototype.setCallback=function(T){this.onTimeReachedCallback=T},T=function(T,A,E,O){var k,B=arguments.length,_t=B<3?A:null===O?O=Object.getOwnPropertyDescriptor(A,E):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_t=Reflect.decorate(T,A,E,O);else for(var Ft=T.length-1;Ft>=0;Ft--)(k=T[Ft])&&(_t=(B<3?k(_t):B>3?k(A,E,_t):k(A,E))||_t);return B>3&&_t&&Object.defineProperty(A,E,_t),_t}([Component("UItimerDelay")],t)}(),E=engine.getComponentGroup(A),O=function(){function t(){t._instance=this}return t.createAndAddToEngine=function(){return null==this._instance&&(this._instance=new t,engine.addSystem(this._instance)),this._instance},t.prototype.update=function(T){var O,k;try{for(var B=r(E.entities),_t=B.next();!_t.done;_t=B.next()){var Ft=_t.value,Pt=Ft.getComponent(A);Pt.elapsedTime+=T,Pt.elapsedTime>=Pt.targetTime&&Pt.onTargetTimeReached(Ft)}}catch(T){O={error:T}}finally{try{_t&&!_t.done&&(k=B.return)&&k.call(B)}finally{if(O)throw O.error}}},t._instance=null,t}(),k=new UICanvas;k.visible=!0;var B=new Font(Fonts.SanFrancisco),_t=new Font(Fonts.SanFrancisco_Heavy),Ft=new Texture("https://decentraland.org/images/ui/light-atlas-v3.png"),Pt=new Texture("https://decentraland.org/images/ui/dark-atlas-v3.png"),Lt=new UIText(k);Lt.vAlign="center",Lt.hAlign="center",Lt.hTextAlign="center",Lt.vTextAlign="center",Lt.font=B,Lt.fontSize=60,Lt.color=new Color4(0,0,0,1),Lt.visible=!1,Lt.positionY=80;var Ut=new UIImage(k,Ft);Ut.hAlign="center",Ut.vAlign="center",Ut.width=400,Ut.height=250,Ut.visible=!1;var Yt,Zt,Kt,ee,ne=function(T){function e(A,E,O,_t,Ft,Pt,Lt){var Ut=T.call(this)||this;return Ut.canvas=k,Ut.valueAsNum=A,Ut.uiText=new UIText(k),Ut.fixedDigits=Lt||null,Ut.uiText.value=Ut.toFixedLengthString(A),Ut.uiText.hAlign="right",Ut.uiText.vAlign="bottom",Ut.uiText.positionX=E||0,Ut.uiText.positionY=O||0,Ut.uiText.fontSize=Ft||25,Ut.uiText.font=B,Ut.uiText.vTextAlign="center",Ut.uiText.hTextAlign="center",Ut.uiText.color=_t||Color4.White(),Ut.uiText.outlineColor=Color4.Black(),Ut.uiText.outlineWidth=Pt?0:.1,Ut}return i(e,T),e.prototype.read=function(){return this.valueAsNum},e.prototype.increase=function(T){this.valueAsNum+=T||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.decrease=function(T){this.valueAsNum-=T||1,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.set=function(T){this.valueAsNum=T,this.uiText.value=this.toFixedLengthString(this.valueAsNum)},e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.toFixedLengthString=function(T){var A=T.toString();if(!this.fixedDigits)return A;for(var E=A.length-this.fixedDigits;E<0;)A="0".concat(A),E+=1;return E>0&&(A=T.toPrecision(this.fixedDigits)),A},e}(Entity);(Yt=T.PromptStyles||(T.PromptStyles={})).LIGHT="light",Yt.DARK="dark",Yt.LIGHTLARGE="lightlarge",Yt.DARKLARGE="darklarge",Yt.LIGHTSLANTED="lightslanted",Yt.DARKSLANTED="darkslanted",(Zt=T.BarStyles||(T.BarStyles={})).ROUNDBLACK="roundblack",Zt.ROUNDWHITE="roundwhite",Zt.ROUNDSILVER="roundsilver",Zt.ROUNDGOLD="roundgold",Zt.SQUAREBLACK="squareblack",Zt.SQUAREWHITE="squarewhite",Zt.SQUARESILVER="squaresilver",Zt.SQUAREGOLD="squaregold",(Kt=T.ButtonStyles||(T.ButtonStyles={})).E="e",Kt.F="f",Kt.DARK="dark",Kt.RED="red",Kt.ROUNDBLACK="roundblack",Kt.ROUNDWHITE="roundwhite",Kt.ROUNDSILVER="roundsilver",Kt.ROUNDGOLD="roundgold",Kt.SQUAREBLACK="squareblack",Kt.SQUAREWHITE="squarewhite",Kt.SQUARESILVER="squaresilver",Kt.SQUAREGOLD="squaregold",(ee=T.SwitchStyles||(T.SwitchStyles={})).ROUNDGREEN="roundgreen",ee.ROUNDRED="roundred",ee.SQUAREGREEN="squaregreen",ee.SQUARERED="squarered";var le={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},ve={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},Se={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:662},Ce={sourceWidth:174,sourceHeight:46,sourceLeft:512,sourceTop:612},Ie={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:458},Re={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:457},Fe={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:494},Ne={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:493},Pe={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:531},Le={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:531},Ue={sourceWidth:128,sourceHeight:32,sourceLeft:512,sourceTop:567},He={sourceWidth:128,sourceHeight:32,sourceLeft:646,sourceTop:567},Ve={sourceWidth:26,sourceHeight:26,sourceLeft:697,sourceTop:611},We={sourceWidth:26,sourceHeight:26,sourceLeft:733,sourceTop:611},Ge={sourceWidth:416,sourceHeight:352,sourceLeft:501,sourceTop:12},qe={sourceWidth:480,sourceHeight:384,sourceLeft:7,sourceTop:12},Xe={sourceWidth:486,sourceHeight:326,sourceLeft:7,sourceTop:413},Ye={closeW:{sourceWidth:32,sourceHeight:32,sourceLeft:942,sourceTop:306},closeD:{sourceWidth:32,sourceHeight:32,sourceLeft:986,sourceTop:306},closeWLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:512,sourceTop:381},closeDLarge:{sourceWidth:64,sourceHeight:64,sourceLeft:583,sourceTop:381},closeWNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:252},closeDNoBack:{sourceWidth:24,sourceHeight:24,sourceLeft:946,sourceTop:214},closeWNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:214},closeDNoBackLarge:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:260},FDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:4},FWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:4},EDark:{sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:40},EWhite:{sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:40},Timer:{sourceWidth:24,sourceHeight:32.2,sourceLeft:718,sourceTop:388},TimerLarge:{sourceWidth:48,sourceHeight:68,sourceLeft:662,sourceTop:386},ClickWhite:{sourceWidth:32,sourceHeight:48,sourceLeft:799,sourceTop:389},ClickDark:{sourceWidth:32,sourceHeight:48,sourceLeft:757,sourceTop:389}},$e={sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:76},Je={sourceWidth:24,sourceHeight:24,sourceLeft:987,sourceTop:104},Qe={sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:76},Ze={sourceWidth:24,sourceHeight:24,sourceLeft:958,sourceTop:104},tn={sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:132},nn={sourceWidth:32,sourceHeight:32,sourceLeft:987,sourceTop:168},on={sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:132},rn={sourceWidth:32,sourceHeight:32,sourceLeft:950,sourceTop:168},sn={sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:454},an={sourceWidth:64,sourceHeight:32,sourceLeft:853,sourceTop:454},cn={sourceWidth:64,sourceHeight:32,sourceLeft:923,sourceTop:454},ln={sourceWidth:64,sourceHeight:32,sourceLeft:783,sourceTop:501},un={sourceWidth:64,sourceHeight:32,sourceLeft:852,sourceTop:501},hn={sourceWidth:64,sourceHeight:32,sourceLeft:921,sourceTop:501};function S(T,A){T.sourceWidth=A.sourceWidth,T.sourceHeight=A.sourceHeight,T.sourceLeft=A.sourceLeft?A.sourceLeft:0,T.sourceTop=A.sourceTop?A.sourceTop:0}function C(T){var A=-10-4*T;return A>-65?A:-65}var pn=function(A){function o(E,O,B,_t,Pt,Lt,Ut){var Yt=A.call(this)||this;if(Yt.canvas=k,Yt.valueAsNum=E>1?1:E,Yt.fullWidth=Lt?128*Lt:128,Yt.background=new UIImage(k,Ft),Yt.background.width=Lt?128*Lt:128,Yt.background.height=Lt?32*Lt:32,Yt.background.hAlign="right",Yt.background.vAlign="bottom",Yt.background.positionX=O||0,Yt.background.positionY=B||0,Pt)switch(Pt){case T.BarStyles.ROUNDBLACK:S(Yt.background,Ie);break;case T.BarStyles.ROUNDWHITE:S(Yt.background,Fe);break;case T.BarStyles.ROUNDSILVER:S(Yt.background,Pe);break;case T.BarStyles.ROUNDGOLD:S(Yt.background,Ue);break;case T.BarStyles.SQUAREBLACK:S(Yt.background,Re);break;case T.BarStyles.SQUAREWHITE:S(Yt.background,Ne);break;case T.BarStyles.SQUARESILVER:S(Yt.background,Le);break;case T.BarStyles.SQUAREGOLD:S(Yt.background,He)}else S(Yt.background,Pe);return Yt.background.sourceWidth=128,Yt.background.sourceHeight=32,Yt.background.visible=!0,Yt.bar=new UIContainerRect(Yt.background),Yt.bar.color=_t||Color4.Red(),Yt.bar.thickness=0,Yt.bar.hAlign="left",Yt.bar.vAlign="center",Yt.bar.positionX=Lt?2.55*Lt:2.55,Yt.bar.positionY=0,Yt.bar.height=Lt?32*Lt-7.5*Lt:24.5,Yt.bar.width=Lt?Yt.fullWidth*Yt.valueAsNum-5.1*Lt:Yt.fullWidth*Yt.valueAsNum-5.1,Ut&&Yt.hide(),Yt}return i(o,A),o.prototype.read=function(){return this.valueAsNum},o.prototype.increase=function(T){this.valueAsNum+=T||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.decrease=function(T){this.valueAsNum-=T||.1,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.set=function(T){this.valueAsNum=T,this.bar.width=this.fullWidth*this.valueAsNum-6},o.prototype.hide=function(){this.background.visible=!1,this.bar.visible=!1},o.prototype.show=function(){this.background.visible=!0,this.bar.visible=!0},o}(Entity),dn=function(T){function e(A,E,O,B,_t,Ft){var Pt=T.call(this)||this;Pt.canvas=k;var Lt=new Texture(A);return Pt.image=new UIImage(k,Lt),Pt.image.hAlign="right",Pt.image.vAlign="bottom",Pt.image.positionX=E||0,Pt.image.positionY=O||0,Pt.image.width=B||64,Pt.image.height=_t||64,Pt.image.sourceLeft=Ft&&Ft.sourceLeft?Ft.sourceLeft:0,Pt.image.sourceTop=Ft&&Ft.sourceTop?Ft.sourceTop:0,Pt.image.sourceWidth=Ft&&Ft.sourceWidth?Ft.sourceWidth:B||64,Pt.image.sourceHeight=Ft&&Ft.sourceHeight?Ft.sourceHeight:_t||64,Pt}return i(e,T),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(T){var E=this;if(this.image.visible=!0,T){var O=new Entity;engine.addEntity(O),O.addComponentOrReplace(new A(T,(function(){E.hide()})))}},e}(Entity),fn=function(T){function e(A,E,O,B,_t,Ft){var Pt=T.call(this)||this;Pt.canvas=k;var Lt=new Texture(A);return Pt.image=new UIImage(k,Lt),Pt.image.hAlign="right",Pt.image.vAlign="bottom",Pt.image.positionX=E||0,Pt.image.positionY=O||0,Pt.image.width=B||32,Pt.image.height=_t||32,Pt.image.sourceLeft=Ft&&Ft.sourceLeft?Ft.sourceLeft:0,Pt.image.sourceTop=Ft&&Ft.sourceTop?Ft.sourceTop:0,Pt.image.sourceWidth=Ft?Ft.sourceWidth:B||32,Pt.image.sourceHeight=Ft?Ft.sourceHeight:_t||32,Pt}return i(e,T),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(T){var E=this;if(this.image.visible=!0,T){var O=new Entity;engine.addEntity(O),O.addComponentOrReplace(new A(T,(function(){E.hide()})))}},e}(Entity),yn=function(T){function e(A,E,O,B,_t,Ft){var Pt=T.call(this)||this;Pt.canvas=k;var Lt=new Texture(A);return Pt.image=new UIImage(k,Lt),Pt.image.hAlign="right",Pt.image.vAlign="bottom",Pt.image.positionX=E||0,Pt.image.positionY=O||0,Pt.image.width=B||128,Pt.image.height=_t||128,Pt.image.sourceLeft=Ft&&Ft.sourceLeft?Ft.sourceLeft:0,Pt.image.sourceTop=Ft&&Ft.sourceTop?Ft.sourceTop:0,Pt.image.sourceWidth=Ft?Ft.sourceWidth:B||128,Pt.image.sourceHeight=Ft?Ft.sourceHeight:_t||128,Pt}return i(e,T),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(T){var E=this;if(this.image.visible=!0,T){var O=new Entity;engine.addEntity(O),O.addComponentOrReplace(new A(T,(function(){E.hide()})))}},e}(Entity),gn=function(T){function e(E,O,B,_t,Ft,Pt,Lt,Ut){var Yt=T.call(this)||this;Yt.canvas=k;var Zt=new Texture(E);if(Yt.image=new UIImage(k,Zt),Yt.image.hAlign="center",Yt.image.vAlign="center",Yt.image.positionX=_t||0,Yt.image.positionY=Ft||0,Yt.image.width=Pt||512,Yt.image.height=Lt||512,Yt.image.sourceLeft=Ut&&Ut.sourceLeft?Ut.sourceLeft:0,Yt.image.sourceTop=Ut&&Ut.sourceTop?Ut.sourceTop:0,Yt.image.sourceWidth=Ut?Ut.sourceWidth:Pt||512,Yt.image.sourceHeight=Ut?Ut.sourceHeight:Lt||512,Yt.image.visible=!B,-1!=O){var Kt=new Entity;engine.addEntity(Kt),Kt.addComponentOrReplace(new A(O||3,(function(){Yt.hide()})))}return Yt}return i(e,T),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(T){var E=this;if(this.image.visible=!0,T){var O=new Entity;engine.addEntity(O),O.addComponentOrReplace(new A(T,(function(){E.hide()})))}},e}(Entity),mn=function(T){function e(A,E,O,_t){var Lt=T.call(this)||this;Lt.canvas=k,Lt.background=Ut,Lt.UIOpenTime=+Date.now(),Lt.onAccept=E||null;var Yt=_t?Pt:Ft;return Ut.source=Yt,Ut.width=400,Ut.height=250,Ut.positionY=0,S(Ut,Ge),Ut.visible=!0,Lt.closeIcon=new UIImage(Ut,Yt),Lt.closeIcon.positionX=175,Lt.closeIcon.positionY=100,Lt.closeIcon.width=32,Lt.closeIcon.height=32,S(Lt.closeIcon,_t?Ye.closeW:Ye.closeD),Lt.closeIcon.onClick=new OnClick((function(){Lt.close()})),Lt.text=new UIText(Ut),Lt.text.value=A,Lt.text.adaptWidth=!1,Lt.text.textWrapping=!0,Lt.text.width=380,Lt.text.hAlign="center",Lt.text.vAlign="top",Lt.text.positionX=0,Lt.text.positionY=-65,Lt.text.fontSize=24,Lt.text.font=B,Lt.text.vTextAlign="center",Lt.text.hTextAlign="center",Lt.text.color=_t?Color4.White():Color4.Black(),Lt.button=new UIImage(Ut,Yt),Lt.button.positionX=0,Lt.button.positionY=-60,Lt.button.width=174,Lt.button.height=46,S(Lt.button,le),Lt.icon=new UIImage(Lt.button,1==_t?Pt:Ft),Lt.icon.width=26,Lt.icon.height=26,Lt.icon.hAlign="center",Lt.icon.vAlign="center",Lt.icon.isPointerBlocker=!1,S(Lt.icon,Ve),Lt.icon.positionX=C(O?O.length:2),Lt.buttonLabel=new UIText(Lt.button),Lt.buttonLabel.value=O||"Ok",Lt.buttonLabel.hTextAlign="center",Lt.buttonLabel.vTextAlign="center",Lt.buttonLabel.positionX=30,Lt.buttonLabel.fontSize=18,Lt.buttonLabel.font=B,Lt.buttonLabel.color=Color4.White(),Lt.buttonLabel.isPointerBlocker=!1,Lt.button.onClick=new OnClick((function(){Lt.accept()})),Lt.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(T){Lt.button.visible&&+Date.now()-Lt.UIOpenTime>100&&Lt.accept()})),Lt}return i(e,T),e.prototype.close=function(){Ut.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.close()},e.prototype.hide=function(){Ut.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1},e.prototype.show=function(){Ut.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0},e}(Entity),vn=function(T){function e(A,E,O,Lt,Yt,Zt,Kt){var ee=T.call(this)||this;ee.canvas=k,ee.background=Ut,ee.UIOpenTime=+Date.now(),ee.onAccept=O,ee.onReject=Lt||null;var ne=Kt?Pt:Ft;return Ut.source=ne,Ut.width=480,Ut.height=384,S(Ut,qe),Ut.visible=!0,ee.closeIcon=new UIImage(Ut,ne),ee.closeIcon.positionX=215,ee.closeIcon.positionY=164,ee.closeIcon.width=32,ee.closeIcon.height=32,S(ee.closeIcon,Kt?Ye.closeW:Ye.closeD),ee.closeIcon.onClick=new OnClick((function(){ee.close()})),ee.title=new UIText(Ut),ee.title.value=A,ee.title.adaptWidth=!1,ee.title.textWrapping=!0,ee.title.width=380,ee.title.hAlign="center",ee.title.vAlign="top",ee.title.positionX=0,ee.title.positionY=-20,ee.title.font=_t,ee.title.fontSize=24,ee.title.vTextAlign="center",ee.title.hTextAlign="center",ee.title.color=Kt?Color4.White():Color4.Black(),ee.text=new UIText(Ut),ee.text.value=E,ee.text.adaptWidth=!1,ee.text.textWrapping=!0,ee.text.width=380,ee.text.hAlign="center",ee.text.vAlign="top",ee.text.positionX=0,ee.text.positionY=-145,ee.text.fontSize=24,ee.text.font=B,ee.text.vTextAlign="center",ee.text.hTextAlign="center",ee.text.color=Kt?Color4.White():Color4.Black(),ee.buttonE=new UIImage(Ut,ne),ee.buttonE.positionX=-100,ee.buttonE.positionY=-120,ee.buttonE.width=174,ee.buttonE.height=46,S(ee.buttonE,le),ee.buttonEIcon=new UIImage(ee.buttonE,1==Kt?Pt:Ft),ee.buttonEIcon.width=26,ee.buttonEIcon.height=26,ee.buttonEIcon.hAlign="center",ee.buttonEIcon.vAlign="center",ee.buttonEIcon.isPointerBlocker=!1,S(ee.buttonEIcon,Ve),ee.buttonEIcon.positionX=C(Yt?Yt.length:2),ee.buttonELabel=new UIText(ee.buttonE),ee.buttonELabel.value=Yt||"Ok",ee.buttonELabel.hTextAlign="center",ee.buttonELabel.vTextAlign="center",ee.buttonELabel.positionX=30,ee.buttonELabel.fontSize=18,ee.buttonELabel.font=B,ee.buttonELabel.color=Color4.White(),ee.buttonELabel.isPointerBlocker=!1,ee.buttonE.onClick=new OnClick((function(){ee.accept()})),ee.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(T){ee.buttonE.visible&&+Date.now()-ee.UIOpenTime>100&&ee.accept()})),ee.buttonF=new UIImage(Ut,ne),ee.buttonF.positionX=100,ee.buttonF.positionY=-120,ee.buttonF.width=174,ee.buttonF.height=46,S(ee.buttonF,ve),ee.buttonFIcon=new UIImage(ee.buttonF,1==Kt?Pt:Ft),ee.buttonFIcon.width=26,ee.buttonFIcon.height=26,ee.buttonFIcon.hAlign="center",ee.buttonFIcon.vAlign="center",ee.buttonFIcon.isPointerBlocker=!1,S(ee.buttonFIcon,We),ee.buttonFIcon.positionX=C(Zt?Zt.length:6),ee.buttonFLabel=new UIText(ee.buttonF),ee.buttonFLabel.value=Zt||"Cancel",ee.buttonFLabel.hTextAlign="center",ee.buttonFLabel.vTextAlign="center",ee.buttonFLabel.positionX=30,ee.buttonFLabel.fontSize=18,ee.buttonFLabel.font=B,ee.buttonFLabel.color=Color4.White(),ee.buttonFLabel.isPointerBlocker=!1,ee.buttonF.onClick=new OnClick((function(){ee.reject()})),ee.FButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(T){ee.buttonF.visible&&+Date.now()-ee.UIOpenTime>100&&ee.reject()})),ee}return i(e,T),e.prototype.close=function(){Ut.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.title.visible=!1},e.prototype.accept=function(){this.onAccept&&this.onAccept(),this.close()},e.prototype.reject=function(){this.onReject&&this.onReject(),this.close()},e.prototype.hide=function(){Ut.visible=!1,this.closeIcon.visible=!1,this.buttonE.visible=!1,this.buttonF.visible=!1,this.text.visible=!1,this.buttonELabel.visible=!1,this.buttonFLabel.visible=!1,this.buttonEIcon.visible=!1,this.buttonFIcon.visible=!1},e.prototype.show=function(){Ut.visible=!0,this.closeIcon.visible=!0,this.buttonE.visible=!0,this.buttonF.visible=!0,this.text.visible=!0,this.buttonELabel.visible=!0,this.buttonFLabel.visible=!0,this.buttonEIcon.visible=!0,this.buttonFIcon.visible=!0},e}(Entity),bn=function(T){function e(A,E,O,Lt,Yt){var Zt=T.call(this)||this;Zt.canvas=k,Zt.background=Ut,Zt.UIOpenTime=+Date.now(),Zt.onAccept=E;var Kt=Yt?Pt:Ft;Ut.source=Kt,Ut.width=400,Ut.height=250,S(Ut,Ge),Ut.visible=!0,Zt.text=new UIText(Ut),Zt.text.value=A,Zt.text.adaptWidth=!1,Zt.text.textWrapping=!0,Zt.text.width=320,Zt.text.hAlign="center",Zt.text.vAlign="top",Zt.text.positionX=0,Zt.text.positionY=-20,Zt.text.fontSize=24,Zt.text.font=_t,Zt.text.vTextAlign="center",Zt.text.hTextAlign="center",Zt.text.color=Yt?Color4.White():Color4.Black(),Zt.closeIcon=new UIImage(Ut,Kt),Zt.closeIcon.positionX=175,Zt.closeIcon.positionY=100,Zt.closeIcon.width=32,Zt.closeIcon.height=32,S(Zt.closeIcon,Yt?Ye.closeW:Ye.closeD),Zt.closeIcon.onClick=new OnClick((function(){Zt.hide()})),Zt.button=new UIImage(Ut,Kt),Zt.button.positionX=0,Zt.button.positionY=-60,Zt.button.width=174,Zt.button.height=46,S(Zt.button,le),Zt.icon=new UIImage(Zt.button,1==Yt?Pt:Ft),Zt.icon.width=26,Zt.icon.height=26,Zt.icon.hAlign="center",Zt.icon.vAlign="center",Zt.icon.isPointerBlocker=!1,S(Zt.icon,Ve),Zt.icon.positionX=C(O?O.length:6),Zt.buttonLabel=new UIText(Zt.button),Zt.buttonLabel.value=O||"Submit",Zt.buttonLabel.hTextAlign="center",Zt.buttonLabel.vTextAlign="center",Zt.buttonLabel.positionX=30,Zt.buttonLabel.fontSize=18,Zt.buttonLabel.font=B,Zt.buttonLabel.color=Color4.White(),Zt.buttonLabel.isPointerBlocker=!1,Zt.fillInBox=new UIInputText(Ut),Zt.fillInBox.color=Color4.Black(),Zt.fillInBox.font=B,Zt.fillInBox.width=312,Zt.fillInBox.height=46,Zt.fillInBox.positionX=0,Zt.fillInBox.positionY=15,Zt.fillInBox.placeholder=Lt||"Fill in",Zt.fillInBox.hTextAlign="center",Zt.fillInBox.vTextAlign="center",Zt.fillInBox.fontSize=22;var ee="";return Zt.fillInBox.onChanged=new OnChanged((function(T){ee=T.value})),Zt.fillInBox.onTextSubmit=new OnTextSubmit((function(T){Zt.accept(ee)})),Zt.button.onClick=new OnClick((function(){Zt.accept(ee)})),Zt.EButtonAction=Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(T){Zt.button.visible&&+Date.now()-Zt.UIOpenTime>100&&Zt.accept(ee)})),Zt}return i(e,T),e.prototype.close=function(){Ut.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1},e.prototype.accept=function(T){this.onAccept(T),this.close()},e.prototype.hide=function(){Ut.visible=!1,this.closeIcon.visible=!1,this.button.visible=!1,this.text.visible=!1,this.buttonLabel.visible=!1,this.fillInBox.visible=!1},e.prototype.show=function(){Ut.visible=!0,this.closeIcon.visible=!0,this.button.visible=!0,this.text.visible=!0,this.buttonLabel.visible=!0,this.fillInBox.visible=!0},e}(Entity),wn=function(A){function o(E,O,B,_t){var Lt=A.call(this)||this;switch(Lt.elements=[],Lt.texture=Ft,Lt.darkTheme=!1,Lt.background=new UIImage(k,Ft),Lt.closeIcon=new UIImage(Lt.background,Lt.texture),Lt.UIOpenTime=0,Lt.canvas=k,Lt.UIOpenTime=+Date.now(),Lt.background=new UIImage(k,Ft),Lt.background.hAlign="center",Lt.background.vAlign="center",E||(E=T.PromptStyles.LIGHT),E){case T.PromptStyles.LIGHT:Lt.texture=Ft,S(Lt.background,Ge),S(Lt.closeIcon,Ye.closeD),Lt.closeIcon.positionX=O?O/2-25:175,Lt.closeIcon.positionY=B?B/2-25:145;break;case T.PromptStyles.DARK:Lt.texture=Pt,Lt.darkTheme=!0,S(Lt.background,Ge),S(Lt.closeIcon,Ye.closeW),Lt.closeIcon.positionX=O?O/2-25:175,Lt.closeIcon.positionY=B?B/2-25:145;break;case T.PromptStyles.LIGHTLARGE:Lt.texture=Ft,S(Lt.background,qe),S(Lt.closeIcon,Ye.closeD),Lt.closeIcon.positionX=O?O/2-25:215,Lt.closeIcon.positionY=B?B/2-25:165;break;case T.PromptStyles.DARKLARGE:Lt.texture=Pt,Lt.darkTheme=!0,S(Lt.background,qe),S(Lt.closeIcon,Ye.closeW),Lt.closeIcon.positionX=O?O/2-25:215,Lt.closeIcon.positionY=B?B/2-25:165;break;case T.PromptStyles.LIGHTSLANTED:Lt.texture=Ft,S(Lt.background,Xe),S(Lt.closeIcon,Ye.closeD),Lt.closeIcon.positionX=O?O/2-25:215,Lt.closeIcon.positionY=B?B/2-25:138;break;case T.PromptStyles.DARKSLANTED:Lt.texture=Pt,Lt.darkTheme=!0,S(Lt.background,Xe),S(Lt.closeIcon,Ye.closeW),Lt.closeIcon.positionX=O?O/2-25:215,Lt.closeIcon.positionY=B?B/2-25:138;break;default:Lt.texture=new Texture(E),Lt.closeIcon.visible=!1}return Lt.background.source=Lt.texture,Lt.background.width=O||Lt.background.sourceWidth,Lt.background.height=B||Lt.background.sourceHeight,Lt.background.visible=!0,Lt.closeIcon.width=32,Lt.closeIcon.height=32,Lt.closeIcon.source=Lt.texture,Lt.closeIcon.onClick=new OnClick((function(){Lt.hide()})),_t&&Lt.hide(),Lt}return i(o,A),o.prototype.hide=function(){var T,A;this.background.visible=!1,this.closeIcon.visible=!1;try{for(var E=r(this.elements),O=E.next();!O.done;O=E.next())O.value.hide()}catch(A){T={error:A}}finally{try{O&&!O.done&&(A=E.return)&&A.call(E)}finally{if(T)throw T.error}}},o.prototype.show=function(){var T,A;this.background.visible=!0,this.closeIcon.visible=!0;try{for(var E=r(this.elements),O=E.next();!O.done;O=E.next())O.value.show()}catch(A){T={error:A}}finally{try{O&&!O.done&&(A=E.return)&&A.call(E)}finally{if(T)throw T.error}}},o.prototype.addText=function(T,A,E,O,k){var B=new Sn(this,T,A,E,this.darkTheme,O||void 0,k||void 0);return this.elements.push(B),B},o.prototype.addButton=function(T,A,E,O,k){var B=new Tn(this,this.texture,this.UIOpenTime,T,A,E,O,k||void 0);return this.elements.push(B),B},o.prototype.addCheckbox=function(T,A,E,O,k,B,_t){var Ft=new xn(this,this.texture,this.darkTheme,T,A,E,O||void 0,k||void 0,B||void 0,_t||void 0);return this.elements.push(Ft),Ft},o.prototype.addSwitch=function(T,A,E,O,k,B,_t){var Ft=new An(this,this.texture,this.darkTheme,T,A,E,O||void 0,k||void 0,B||void 0,_t||void 0);return this.elements.push(Ft),Ft},o.prototype.addIcon=function(T,A,E,O,k,B){var _t=new Texture(T),Ft=new _n(this,_t,A,E,O||void 0,k||void 0,B||void 0);return this.elements.push(Ft),Ft},o.prototype.addTextBox=function(T,A,E,O){var k=new En(this,T,A,E||void 0,O||void 0);return this.elements.push(k),k},o}(Entity),Tn=function(A){function o(E,O,k,_t,Ft,Pt,Lt,Ut){var Yt=A.call(this)||this;if(Yt.icon=null,Yt.image=new UIImage(E.background,O),Yt.image.positionX=Ft,Yt.image.positionY=Pt,Yt.image.width=174,Yt.image.height=46,Yt.label=new UIText(Yt.image),Ut)switch(Ut){case T.ButtonStyles.E:S(Yt.image,le),Yt.label.positionX=25,Yt.icon=new UIImage(Yt.image,O),Yt.icon.width=26,Yt.icon.height=26,Yt.icon.hAlign="center",Yt.icon.vAlign="center",Yt.icon.isPointerBlocker=!1,S(Yt.icon,Ve),Yt.icon.positionX=C(_t.length);break;case T.ButtonStyles.F:S(Yt.image,ve),Yt.label.positionX=25,Yt.icon=new UIImage(Yt.image,O),Yt.icon.width=26,Yt.icon.height=26,Yt.icon.hAlign="center",Yt.icon.vAlign="center",Yt.icon.isPointerBlocker=!1,S(Yt.icon,We),Yt.icon.positionX=C(_t.length);break;case T.ButtonStyles.RED:S(Yt.image,Se);break;case T.ButtonStyles.DARK:S(Yt.image,Ce);break;case T.ButtonStyles.ROUNDBLACK:S(Yt.image,Ie);break;case T.ButtonStyles.ROUNDWHITE:S(Yt.image,Fe);break;case T.ButtonStyles.ROUNDSILVER:S(Yt.image,Pe);break;case T.ButtonStyles.ROUNDGOLD:S(Yt.image,Ue);break;case T.ButtonStyles.SQUAREBLACK:S(Yt.image,Re);break;case T.ButtonStyles.SQUAREWHITE:S(Yt.image,Ne);break;case T.ButtonStyles.SQUARESILVER:S(Yt.image,Le);break;case T.ButtonStyles.SQUAREGOLD:S(Yt.image,He);break;default:S(Yt.image,Pe)}else S(Yt.image,Pe);return Yt.label.value=_t,Yt.label.hTextAlign="center",Yt.label.vTextAlign="center",Yt.label.fontSize=20,Yt.label.font=B,Yt.label.color=Ut==T.ButtonStyles.ROUNDWHITE||Ut==T.ButtonStyles.SQUAREWHITE?Color4.Black():Color4.White(),Yt.label.isPointerBlocker=!1,Yt.image.onClick=new OnClick((function(){Lt()})),Ut==T.ButtonStyles.E?Input.instance.subscribe("BUTTON_DOWN",ActionButton.PRIMARY,!1,(function(T){Yt.image.visible&&+Date.now()-k>100&&Lt()})):Ut==T.ButtonStyles.F&&Input.instance.subscribe("BUTTON_DOWN",ActionButton.SECONDARY,!1,(function(T){Yt.image.visible&&+Date.now()-k>100&&Lt()})),Yt}return i(o,A),o.prototype.hide=function(){this.image.visible=!1},o.prototype.show=function(){this.image.visible=!0},o.prototype.grayOut=function(){this.label.color=Color4.Gray(),this.image.isPointerBlocker=!1,this.icon&&(this.icon.visible=!1)},o.prototype.enable=function(){this.label.color=Color4.White(),this.image.isPointerBlocker=!0,this.icon&&(this.icon.visible=!0)},o}(Entity),xn=function(T){function e(A,E,O,k,_t,Ft,Pt,Lt,Ut,Yt){var Zt=T.call(this)||this;return Zt.checked=!!Yt,Zt.darkTheme=O,Zt.large=Ut||!1,Zt.image=new UIImage(A.background,E),Zt.image.positionX=_t,Zt.image.positionY=Ft,Zt.image.width=Ut?32:24,Zt.image.height=Ut?32:24,0==Zt.checked?Zt.uncheck():Zt.check(),Zt.label=new UIText(Zt.image),Zt.label.positionX=Ut?40:30,Zt.label.color=O?Color4.White():Color4.Black(),Zt.label.value=k,Zt.label.hTextAlign="left",Zt.label.vTextAlign="center",Zt.label.fontSize=20,Zt.label.font=B,Zt.label.isPointerBlocker=!1,Zt.image.onClick=new OnClick((function(){0==Zt.checked?Zt.check():Zt.uncheck(),Zt.checked?Pt&&Pt():Lt&&Lt()})),Zt}return i(e,T),e.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},e.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},e.prototype.uncheck=function(){this.checked=!1,this.darkTheme?this.large?S(this.image,tn):S(this.image,$e):this.large?S(this.image,on):S(this.image,Qe)},e.prototype.check=function(){this.checked=!0,this.darkTheme?this.large?S(this.image,nn):S(this.image,Je):this.large?S(this.image,rn):S(this.image,Ze)},e}(Entity),An=function(A){function o(E,O,k,_t,Ft,Pt,Lt,Ut,Yt,Zt){var Kt=A.call(this)||this;return Kt.checked=!!Zt,Kt.darkTheme=k,Kt.style=Yt||T.SwitchStyles.ROUNDGREEN,Kt.image=new UIImage(E.background,O),Kt.image.positionX=Ft,Kt.image.positionY=Pt,Kt.image.width=64,Kt.image.height=32,0==Kt.checked?Kt.check():Kt.uncheck(),Kt.label=new UIText(Kt.image),Kt.label.positionX=80,Kt.label.color=k?Color4.White():Color4.Black(),Kt.label.value=_t,Kt.label.hTextAlign="left",Kt.label.vTextAlign="center",Kt.label.fontSize=20,Kt.label.font=B,Kt.label.isPointerBlocker=!1,Kt.image.onClick=new OnClick((function(){0==Kt.checked?Kt.check():Kt.uncheck(),Kt.checked?Lt&&Lt():Ut&&Ut()})),Kt}return i(o,A),o.prototype.hide=function(){this.image.visible=!1,this.label.visible=!1},o.prototype.show=function(){this.image.visible=!0,this.label.visible=!0},o.prototype.check=function(){switch(this.checked=!0,this.style){case T.SwitchStyles.ROUNDGREEN:S(this.image,cn);break;case T.SwitchStyles.ROUNDRED:S(this.image,an);break;case T.SwitchStyles.SQUAREGREEN:S(this.image,hn);break;case T.SwitchStyles.SQUARERED:S(this.image,un)}},o.prototype.uncheck=function(){this.checked=!1,this.style==T.SwitchStyles.ROUNDGREEN||this.style==T.SwitchStyles.ROUNDRED?S(this.image,sn):S(this.image,ln)},o}(Entity),_n=function(T){function e(A,E,O,k,B,_t,Ft){var Pt=T.call(this)||this;return Pt.image=new UIImage(A.background,E),Pt.image.positionX=O,Pt.image.positionY=k,Pt.image.width=B||128,Pt.image.height=_t||128,Pt.image.sourceLeft=Ft&&Ft.sourceLeft?Ft.sourceLeft:0,Pt.image.sourceTop=Ft&&Ft.sourceTop?Ft.sourceTop:0,Pt.image.sourceWidth=Ft&&Ft.sourceWidth?Ft.sourceWidth:B||128,Pt.image.sourceHeight=Ft&&Ft.sourceHeight?Ft.sourceHeight:_t||128,Pt}return i(e,T),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity),Sn=function(T){function e(A,E,O,k,B,_t,Ft){var Pt=T.call(this)||this;return Pt.text=new UIText(A.background),Pt.text.value=E,Pt.text.positionX=O||0,Pt.text.positionY=k||0,Pt.text.hTextAlign="center",Pt.text.color=_t||(B?Color4.White():Color4.Black()),Pt.text.fontSize=Ft||15,Pt}return i(e,T),e.prototype.hide=function(){this.text.visible=!1},e.prototype.show=function(){this.text.visible=!0},e}(Entity),En=function(T){function e(A,E,O,k,_t){var Ft=T.call(this)||this;return Ft.currentText="",Ft.fillInBox=new UIInputText(A.background),Ft.fillInBox.color=Color4.Black(),Ft.fillInBox.font=B,Ft.fillInBox.width=312,Ft.fillInBox.height=46,Ft.fillInBox.positionX=E,Ft.fillInBox.positionY=O,Ft.fillInBox.placeholder=k||"Fill in",Ft.fillInBox.hTextAlign="center",Ft.fillInBox.vTextAlign="center",Ft.fillInBox.fontSize=22,Ft.fillInBox.onChanged=new OnChanged((function(T){Ft.fillInBox&&!Ft.fillInBox.visible||(Ft.currentText=T.value,_t&&_t(Ft.currentText))})),Ft.fillInBox.onTextSubmit=new OnTextSubmit((function(T){Ft.fillInBox&&!Ft.fillInBox.visible||(Ft.currentText=T.text,_t&&_t(Ft.currentText))})),Ft}return i(e,T),e.prototype.hide=function(){this.fillInBox.visible=!1},e.prototype.show=function(){this.fillInBox.visible=!0},e}(Entity),Cn=function(T){function e(A,E,O,_t,Ft,Pt){var Lt=T.call(this)||this;return Lt.canvas=k,Lt.uiText=new UIText(k),Lt.uiText.value=A,Lt.uiText.hAlign="right",Lt.uiText.vAlign="bottom",Lt.uiText.positionX=E||0,Lt.uiText.positionY=O||0,Lt.uiText.fontSize=Ft||25,Lt.uiText.font=B,Lt.uiText.vTextAlign="center",Lt.uiText.hTextAlign="center",Lt.uiText.color=_t||Color4.White(),Lt.uiText.outlineColor=Color4.Black(),Lt.uiText.outlineWidth=Pt?0:.1,Lt}return i(e,T),e.prototype.hide=function(){this.uiText.visible=!1},e.prototype.show=function(){this.uiText.visible=!0},e.prototype.set=function(T){this.uiText.value=T,this.uiText.visible=!0},e}(Entity),In=function(T){function e(E,O,B,_t){var Pt=T.call(this)||this;if(Pt.canvas=k,Pt.image=new UIImage(k,Ft),Pt.image.hAlign="center",Pt.image.vAlign="center",Pt.image.positionX=O||0,Pt.image.positionY=B?B+80:80,Pt.image.width=_t?48*_t:48,Pt.image.height=_t?64*_t:64,S(Pt.image,Ye.TimerLarge),E&&0!=E){var Lt=new Entity;engine.addEntity(Lt),Lt.addComponentOrReplace(new A(E||3,(function(){Pt.hide()})))}return Pt}return i(e,T),e.prototype.hide=function(){this.image.visible=!1},e.prototype.show=function(){this.image.visible=!0},e}(Entity);function q(T){return T&&"object"==typeof T&&!Array.isArray(T)}function j(T,A){var E=o({},T);return q(T)&&q(A)&&Object.keys(A).forEach((function(O){var k,B;q(A[O])?O in T?E[O]=j(T[O],A[O]):E=o(o({},E),((k={})[O]=A[O],k)):E=o(o({},E),((B={})[O]=A[O],B))})),E}var Rn=function(){function t(T,A){this.shape=T,A&&this.setProperties(A)}return t.prototype.setProperties=function(T){var A,E;try{for(var O=r(Object.keys(T)),k=O.next();!k.done;k=O.next()){var B=k.value;this.shape[B]=T[B]}}catch(T){A={error:T}}finally{try{k&&!k.done&&(E=O.return)&&E.call(O)}finally{if(A)throw A.error}}},t.prototype.getProperty=function(T){return this.shape[T]},t}(),On=function(T){function e(A,E){var O,k,B,_t,Ft=T.call(this,new UIInputText(A),o(o({},E),{placeholder:null!==(O=null==E?void 0:E.placeholder)&&void 0!==O?O:null==E?void 0:E.value,placeholderColor:null!==(k=null==E?void 0:E.placeholderColor)&&void 0!==k?k:null==E?void 0:E.color,onFocus:new OnFocus((function(){var T;Ft.isInputFocused=!0,null===(T=null==E?void 0:E.onFocus)||void 0===T||T.call(E)})),onBlur:new OnBlur((function(){var T,A;Ft.isInputFocused=!1,""===Ft.inputValue&&void 0!==Ft.placeholder?(Ft.setInputValue(Ft.placeholder),null===(T=null==E?void 0:E.onBlur)||void 0===T||T.call(E,!0)):null===(A=null==E?void 0:E.onBlur)||void 0===A||A.call(E,!1)})),onChanged:new OnChanged((function(T){var A,O=T.value;if(Ft.shape.visible)if(Ft.inputValue=O,O===Ft.placeholder)Ft.shape.placeholderColor=Ft.placeholderColor;else if(""===O&&(Ft.shape.placeholderColor=Ft.color,Ft.shape.placeholder=""),Ft.isInputFocused||""===O){var k=null!==(A=null==E?void 0:E.waitTime)&&void 0!==A?A:e.DEFAULT_WAIT_TIME;setTimeout((function(){var T;Ft.inputValue===O&&(null===(T=null==E?void 0:E.onChanged)||void 0===T||T.call(E,O))}),k)}})),onTextSubmit:new OnTextSubmit((function(T){var A=T.text,O=A.substr(0,A.length-1),k=null==E?void 0:E.onTextSubmit;k?k(O):setTimeout((function(){return Ft.shape.placeholder=O}),0)}))}))||this;return Ft.inputValue="",Ft.isInputFocused=!1,Ft.placeholder=Ft.shape.placeholder,Ft.color=Ft.shape.color,Ft.placeholderColor=Ft.shape.placeholderColor,Ft.inputValue=null!==(B=null==E?void 0:E.value)&&void 0!==B?B:null!==(_t=null==E?void 0:E.placeholder)&&void 0!==_t?_t:"",Ft.isInputFocused=!1,Ft}return i(e,T),e.prototype.getValue=function(){return this.inputValue},e.prototype.isFocused=function(){return this.isInputFocused},e.prototype.setInputValue=function(T){var A=this.isInputFocused;this.isInputFocused=!1,this.shape.placeholder="",this.inputValue=this.shape.placeholder=T,this.isInputFocused=A},e.prototype.reset=function(){this.setInputValue(this.placeholder)},e.prototype.hide=function(){this.setProperties({visible:!1})},e.prototype.show=function(){this.setProperties({visible:!0}),this.setInputValue(this.inputValue)},e.DEFAULT_WAIT_TIME=650,e}(Rn),Fn=function(T){function e(A,E){var O=T.call(this,new UIContainerRect(A),o({isPointerBlocker:!0},E))||this,k=new UIImage(O.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));return k.width="100%",k.height="100%",k.sourceWidth=1,k.sourceHeight=1,k.isPointerBlocker=!0,O.image=k,(null==E?void 0:E.onClick)&&O.setOnClick(E.onClick),O}return i(e,T),e.prototype.performClick=function(){var T;null===(T=this.image.onClick)||void 0===T||T.callback({})},e.prototype.setOnClick=function(T){this.image.onClick=new OnClick(T)},e.prototype.clearOnClick=function(){this.image.onClick=null},e}(Rn),Nn=function(T){function e(A,E){var O=T.call(this,new UIContainerRect(A),o({width:"100%",vAlign:"top",visible:!1},E))||this;O.config=o(o({},e.DEFAULTS),E);var k=new Fn(O.shape,{width:"100%",height:"100%",color:Color4.Clear()});O.clickableContainer=k;var B=new UIImage(k.shape,new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="));B.width=B.height=O.config.imageSize,B.hAlign="left",B.positionX=10,B.vAlign="center",O.image=B;var _t=new UIText(k.shape);_t.vAlign="top",_t.hAlign="left",_t.vTextAlign="top",_t.fontSize=O.config.topFontSize,_t.color=O.config.topTextColor,_t.positionX=55,_t.positionY=-10,_t.isPointerBlocker=!1,O.topLeftText=_t;var Ft=new UIText(k.shape);Ft.vAlign="top",Ft.hAlign="right",Ft.vTextAlign="top",Ft.hTextAlign="right",Ft.fontSize=_t.fontSize,Ft.color=_t.color,Ft.isPointerBlocker=!1,Ft.positionX=-10,Ft.positionY=_t.positionY,O.topRightText=Ft;var Pt=new UIText(k.shape);Pt.vAlign="bottom",Pt.hAlign="left",Pt.vTextAlign="bottom",Pt.fontSize=O.config.bottomFontSize,Pt.color=O.config.bottomTextColor,Pt.positionX=_t.positionX,Pt.positionY=10,Pt.isPointerBlocker=!1,O.bottomLeftText=Pt;var Lt=new UIText(k.shape);return Lt.vAlign="bottom",Lt.hAlign="right",Lt.vTextAlign="bottom",Lt.hTextAlign="right",Lt.fontSize=Pt.fontSize,Lt.color=Pt.color,Lt.isPointerBlocker=!1,Lt.positionX=Ft.positionX,Lt.positionY=Pt.positionY,O.bottomRightText=Lt,O}return i(e,T),e.prototype.setOption=function(T,A){this.image.visible=!1,this.topRightText.visible=!1,this.bottomLeftText.visible=!1,this.bottomRightText.visible=!1,T.image?(this.image.source=new Texture(T.image.src),this.image.sourceWidth=T.image.sourceWidth,this.image.sourceHeight=T.image.sourceHeight,this.image.visible=!0,this.topLeftText.positionX=this.config.imageSize+20):this.topLeftText.positionX=10,"string"==typeof T.visualText?(this.topLeftText.value=T.visualText,this.topLeftText.vAlign=this.topLeftText.vTextAlign="center",this.topLeftText.positionY=0):"text"in T.visualText?(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=T.visualText.text,this.bottomLeftText.value=T.visualText.subText,this.bottomLeftText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX):"bottomLeft"in T.visualText&&(this.topLeftText.vAlign=this.topLeftText.vTextAlign="top",this.topLeftText.positionY=-10,this.topLeftText.value=T.visualText.topLeft,this.topRightText.value=T.visualText.topRight,this.bottomLeftText.value=T.visualText.bottomLeft,this.bottomRightText.value=T.visualText.bottomRight,this.topRightText.visible=!0,this.bottomLeftText.visible=!0,this.bottomRightText.visible=!0,this.bottomLeftText.positionX=this.topLeftText.positionX),A?this.clickableContainer.setOnClick(A):this.clickableContainer.clearOnClick()},e.prototype.setProperties=function(A){T.prototype.setProperties.call(this,A)},e.prototype.getProperty=function(A){return T.prototype.getProperty.call(this,A)},e.prototype.performClick=function(){this.clickableContainer.performClick()},e.DEFAULTS={topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},e}(Rn),kn=function(T){function e(A,E,O,k){var B=T.call(this,new UIContainerRect(A),o({},O))||this;B.onSuccessfulSelection=k,B.uiOptions=[],B.options={},O.visible,O.opacity,O.hAlign,O.vAlign,O.positionX,O.positionY;var _t=n(O,["visible","opacity","hAlign","vAlign","positionX","positionY"]);B.config=j(e.DEFAULTS,_t),B.setProperties({width:B.config.width,height:B.config.initialHeight,color:B.config.borderColor}),B.setItems(E.items,E.dropdownDefaultItemIds);var Pt=new UIContainerRect(B.shape);Pt.color=B.config.backgroundColor,Pt.width=B.config.width-2*B.config.borderSize,Pt.height=B.config.initialHeight-2*B.config.borderSize,B.insideContainer=Pt;var Lt=new On(Pt,{vAlign:"top",hTextAlign:"left",vTextAlign:"center",width:"92%",fontSize:B.config.search.fontSize,placeholder:B.config.search.placeholder.defaultText,placeholderColor:B.config.search.placeholder.textColor,color:B.config.search.textColor,focusedBackground:Color4.Clear(),background:Color4.Clear(),height:.95*B.config.initialHeight,onBlur:function(){return B.close()},onTextSubmit:function(){B.uiOptions[0].getProperty("visible")?B.uiOptions[0].performClick():B.close()},onChanged:function(T){if(B.hideAllOptions(),T===B.config.search.placeholder.defaultText||""===T)B.showDefaultOptions();else{var A=T.toLowerCase(),E=[];for(var O in B.options){var k=B.options[O];if(k.searchBy.toLowerCase().indexOf(A)>=0&&(E.push(k),E.length===B.config.options.maxVisibleOptions))break}E.length>0?B.showOptions(E):B.showErrorMessage("Sorry, we can't find \""+T+'"')}}});B.inputText=Lt;for(var Ut=0;Ut<B.config.options.maxVisibleOptions;Ut++){var Yt=new Nn(Pt,o(o({},B.config.options),{height:B.config.initialHeight,positionY:-B.config.initialHeight-B.config.initialHeight*Ut,color:Ut%2==0?B.config.options.oddBackgroundColor:Pt.color}));B.uiOptions.push(Yt)}var Zt=new UIImage(Pt,Ft);Zt.onClick=new OnClick((function(){return B.close()})),Zt.sourceTop=305,Zt.sourceLeft=985,Zt.sourceWidth=Zt.sourceHeight=35,Zt.width=Zt.height=18,Zt.hAlign="right",Zt.vAlign="top",Zt.positionX=-12,Zt.positionY=-12,Zt.visible=Zt.isPointerBlocker=!0;var Kt=new UIText(Pt);return Kt.height=20,Kt.visible=!1,Kt.width="92%",Kt.hTextAlign="center",Kt.vAlign="bottom",Kt.positionY=20,Kt.fontSize=B.config.errorMessage.fontSize,Kt.color=B.config.errorMessage.textColor,B.errorMessage=Kt,B}return i(e,T),e.prototype.open=function(){this.setProperties({visible:!0}),this.showDefaultOptions()},e.prototype.close=function(){this.setProperties({visible:!1}),this.inputText.reset()},e.prototype.setItems=function(T,A){this.options=T.reduce((function(T,A){var E;return A.searchBy=null!==(E=A.searchBy)&&void 0!==E?E:"string"==typeof A.visualText?A.visualText:"text"in A.visualText?A.visualText.text:A.visualText.topLeft,T[A.id]=A,T}),{}),A?this.setDropdownDefaults(A):this.defaultOptions=A,this.hideAllOptions()},e.prototype.setDropdownDefaults=function(T){var A,E;try{for(var O=r(T),k=O.next();!k.done;k=O.next()){var B=k.value;if(!(B in this.options))return void error("Couldn't find an option with id '"+B+"'. Will not set new defaults")}}catch(T){A={error:T}}finally{try{k&&!k.done&&(E=O.return)&&E.call(O)}finally{if(A)throw A.error}}this.defaultOptions=T},e.prototype.showDefaultOptions=function(){var T,A=this;if(this.defaultOptions)T=this.defaultOptions.map((function(T){return A.options[T]})).slice(0,this.config.options.maxVisibleOptions);else for(var E in T=[],this.options)if(T.push(this.options[E]),T.length===this.config.options.maxVisibleOptions)break;this.showOptions(T)},e.prototype.showOptions=function(T){var A=this;this.resizeHeight(this.config.initialHeight*T.length+2*this.config.borderSize),T.forEach((function(T,E){var O=A.uiOptions[E];O.setOption(T,(function(){A.onSuccessfulSelection(T),A.setProperties({visible:!1})})),O.setProperties({visible:!0})})),this.errorMessage.visible=!1},e.prototype.hideAllOptions=function(){this.uiOptions.forEach((function(T){return T.setProperties({visible:!1})}))},e.prototype.showErrorMessage=function(T){this.errorMessage.visible=!0,this.errorMessage.value=T,this.resizeHeight(60)},e.prototype.resizeHeight=function(T){this.setProperties({height:this.config.initialHeight+T}),this.insideContainer.height=this.config.initialHeight+T-2*this.config.borderSize},e.DEFAULTS={borderColor:Color4.FromInts(232,236,253,255),backgroundColor:Color4.White(),borderSize:2,width:300,initialHeight:60,search:{fontSize:16,textColor:Color4.FromInts(24,26,70,255),placeholder:{defaultText:"Click to search",textColor:Color4.FromInts(118,120,181,200)}},options:{maxVisibleOptions:5,oddBackgroundColor:Color4.FromInts(246,246,255,255),topFontSize:14,bottomFontSize:14,imageSize:36,topTextColor:Color4.FromInts(14,16,60,255),bottomTextColor:Color4.FromInts(117,120,181,255)},errorMessage:{fontSize:13,textColor:Color4.FromInts(125,127,157,255)}},e}(Rn),Pn=function(T){function e(A,E,O,k){var B=T.call(this,new UIContainerRect(A),o({},O))||this;B.onSuccessfulSelection=k,O.visible,O.opacity,O.hAlign,O.vAlign,O.positionX,O.positionY;var _t=n(O,["visible","opacity","hAlign","vAlign","positionX","positionY"]);B.config=j(kn.DEFAULTS,_t),B.setProperties({width:B.config.width,height:B.config.initialHeight,color:B.config.borderColor});var Ft=new Fn(B.shape,{color:B.config.backgroundColor,width:B.config.width-2*B.config.borderSize,height:B.config.initialHeight-2*B.config.borderSize,onClick:function(){return B.uiSearchPrompt.open()}}),Pt=new Nn(Ft.shape,o(o({},B.config.options),{height:B.config.initialHeight,color:Color4.Clear(),width:B.config.width-2*B.config.borderSize-20,visible:!0,hAlign:"left",isPointerBlocker:!1})),Lt=new UIText(Ft.shape);if(Lt.value="Click to select an option",Lt.fontSize=B.config.search.fontSize,Lt.color=B.config.search.placeholder.textColor,Lt.vTextAlign=Lt.hTextAlign="center",Lt.positionX=-B.config.borderSize-10,Lt.isPointerBlocker=!1,Lt.opacity=Lt.color.a,B.initialText=Lt,null==E?void 0:E.initialItemId){var Ut=E.items.filter((function(T){return T.id===E.initialItemId}))[0];Ut&&(Pt.setOption(Ut),B.initialText.visible=!1)}var Yt=new Texture("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAgMAAADXB5lNAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAN5AAADeQELGyzWAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAAlQTFRF////AAAAAAAAflGpXQAAAAJ0Uk5TAICbK04YAAAAeklEQVQ4je3PsRXEMAgE0VFCEapG9agaiiDRVXkJxlpq8IYT/AfwTbZ/ssPUEJgGZ2hYDTmgSIAiDoqsdskBRQIUcVBktXdO/jeVuBDPMBpRyEMUEhVMiUKKSOQlEokrmBKJXARsJWAqAaYEjEbAVgJmtGDewmjEt9wfISOqAUzY2sAAAAAASUVORK5CYII="),Zt=new UIImage(Ft.shape,Yt);return Zt.sourceWidth=Zt.sourceHeight=64,Zt.height=15,Zt.width=12,Zt.hAlign="right",Zt.vAlign="center",Zt.positionX=-10,Zt.visible=!0,Zt.isPointerBlocker=!1,B.uiSearchPrompt=new kn(B.shape,E,o(o({},O),{visible:!1,vAlign:"top",initialHeight:B.config.initialHeight-2*B.config.borderSize}),(function(T){Pt.setOption(T),B.initialText.visible=!1,B.onSuccessfulSelection(T)})),B}return i(e,T),e.prototype.open=function(){this.setProperties({visible:!0})},e.prototype.close=function(){this.setProperties({visible:!1})},e.prototype.setSearchItems=function(T,A){this.uiSearchPrompt.setItems(T,A)},e.prototype.setSearchDropdownDefaults=function(T){this.uiSearchPrompt.setDropdownDefaults(T)},e}(Rn);T.CenterImage=gn,T.CornerLabel=Cn,T.CustomPrompt=wn,T.CustomPromptButton=Tn,T.CustomPromptCheckBox=xn,T.CustomPromptIcon=_n,T.CustomPromptSwitch=An,T.CustomPromptText=Sn,T.CustomPromptTextBox=En,T.FillInPrompt=bn,T.LargeIcon=yn,T.LoadingIcon=In,T.MediumIcon=dn,T.OkPrompt=mn,T.OptionPrompt=vn,T.SFFont=B,T.SFHeavyFont=_t,T.SmallIcon=fn,T.UIBar=pn,T.UICounter=ne,T.UISearchPrompt=kn,T.UISelectBox=Pn,T.canvas=k,T.darkTheme=Pt,T.displayAnnouncement=function(T,E,O,k,B){Lt.visible=!0,Lt.value=T,Lt.color=O||Color4.Yellow(),Lt.fontSize=k||50,Lt.font=_t,Lt.outlineColor=Color4.Black(),Lt.outlineWidth=B?0:.1,Lt.adaptWidth=!1,Lt.textWrapping=!0,Lt.width=900;var Ft=new Entity;engine.addEntity(Ft),-1!=E&&Ft.addComponentOrReplace(new A(E||3,(function(){Lt.visible=!1})))},T.hideAnnouncements=function(){Lt.visible=!1},T.lightTheme=Ft,Object.defineProperty(T,"__esModule",{value:!0})})),function(T,A){"object"==typeof exports&&"undefined"!=typeof module?A(exports):"function"==typeof define&&define.amd?define("eth-connect",["exports"],A):A((T="undefined"!=typeof globalThis?globalThis:T||self).ethconnect={})}(this,(function(T){function e(T){if(T.jsonrpc="2.0",!T.id||"number"!=typeof T.id||Math.floor(T.id)!==T.id)throw new Error(`Invalid RPC message(invalid id) message: ${JSON.stringify(T)}`);if(!T.method||"string"!=typeof T.method||0===T.method.trim().length)throw new Error(`Invalid RPC message(invalid method) message: ${JSON.stringify(T)}`);if(!T.params||"object"!=typeof T.params)throw new Error(`Invalid RPC message(invalid params) message: ${JSON.stringify(T)}`);return T}function n(T,A){return T(A={exports:{}},A.exports),A.exports}var A,E=n((function(T,A){function n(){let T,A;const E=new Promise(((O,k)=>{T=T=>{O(T),E.isPending=!1},A=T=>{k(T),E.isPending=!1}})).catch((T=>Promise.reject(T)));return E.resolve=T,E.reject=A,"finally"in E||(E.finally=T=>{E.then(T),E.catch(T)}),E.isPending=!0,E}Object.defineProperty(A,"__esModule",{value:!0}),A.future=n,A.default=n}));(A=E)&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")&&A.default;var O=E.future,k="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var B=a,_t=c;function h(T){if(B===setTimeout)return setTimeout(T,0);if((B===a||!B)&&setTimeout)return B=setTimeout,setTimeout(T,0);try{return B(T,0)}catch(A){try{return B.call(null,T,0)}catch(A){return B.call(this,T,0)}}}"function"==typeof k.setTimeout&&(B=setTimeout),"function"==typeof k.clearTimeout&&(_t=clearTimeout);var Ft,Pt=[],Lt=!1,Ut=-1;function m(){Lt&&Ft&&(Lt=!1,Ft.length?Pt=Ft.concat(Pt):Ut=-1,Pt.length&&y())}function y(){if(!Lt){var T=h(m);Lt=!0;for(var A=Pt.length;A;){for(Ft=Pt,Pt=[];++Ut<A;)Ft&&Ft[Ut].run();Ut=-1,A=Pt.length}Ft=null,Lt=!1,function(T){if(_t===clearTimeout)return clearTimeout(T);if((_t===c||!_t)&&clearTimeout)return _t=clearTimeout,clearTimeout(T);try{_t(T)}catch(A){try{return _t.call(null,T)}catch(A){return _t.call(this,T)}}}(T)}}function w(T,A){this.fun=T,this.array=A}function v(){}w.prototype.run=function(){this.fun.apply(null,this.array)};var Yt=v,Zt=v,Kt=v,ee=v,ne=v,le=v,ve=v,Se=k.performance||{},Ce=Se.now||Se.mozNow||Se.msNow||Se.oNow||Se.webkitNow||function(){return(new Date).getTime()},Ie=new Date,Re={nextTick:function(T){var A=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)A[E-1]=arguments[E];Pt.push(new w(T,A)),1!==Pt.length||Lt||h(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Yt,addListener:Zt,once:Kt,off:ee,removeListener:ne,removeAllListeners:le,emit:ve,binding:function(T){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(T){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(T){var A=.001*Ce.call(Se),E=Math.floor(A),O=Math.floor(A%1*1e9);return T&&(E-=T[0],(O-=T[1])<0&&(E--,O+=1e9)),[E,O]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ie)/1e3}},Fe=n((function(T){!function(){var A="input is invalid type",E="object"==typeof window,O=E?window:{};O.JS_SHA3_NO_WINDOW&&(E=!1);var B=!E&&"object"==typeof self;!O.JS_SHA3_NO_NODE_JS&&"object"==typeof Re&&Re.versions&&Re.versions.node?O=k:B&&(O=self);var _t=!O.JS_SHA3_NO_COMMON_JS&&T.exports,Ft=!O.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,Pt="0123456789abcdef".split(""),Lt=[4,1024,262144,67108864],Ut=[0,8,16,24],Yt=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Zt=[224,256,384,512],Kt=[128,256],ee=["hex","buffer","arrayBuffer","array","digest"],ne={128:168,256:136};!O.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(T){return"[object Array]"===Object.prototype.toString.call(T)}),!Ft||!O.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(T){return"object"==typeof T&&T.buffer&&T.buffer.constructor===ArrayBuffer});for(var m=function(T,A,E){return function(O){return new C(T,A,T).update(O)[E]()}},y=function(T,A,E){return function(O,k){return new C(T,A,k).update(O)[E]()}},w=function(T,A,E){return function(A,O,k,B){return ve["cshake"+T].update(A,O,k,B)[E]()}},v=function(T,A,E){return function(A,O,k,B){return ve["kmac"+T].update(A,O,k,B)[E]()}},b=function(T,A,E,O){for(var k=0;k<ee.length;++k){var B=ee[k];T[B]=A(E,O,B)}return T},_=function(T,A){var E=m(T,A,"hex");return E.create=function(){return new C(T,A,T)},E.update=function(T){return E.create().update(T)},b(E,m,T,A)},le=[{name:"keccak",padding:[1,256,65536,16777216],bits:Zt,createMethod:_},{name:"sha3",padding:[6,1536,393216,100663296],bits:Zt,createMethod:_},{name:"shake",padding:[31,7936,2031616,520093696],bits:Kt,createMethod:function(T,A){var E=y(T,A,"hex");return E.create=function(E){return new C(T,A,E)},E.update=function(T,A){return E.create(A).update(T)},b(E,y,T,A)}},{name:"cshake",padding:Lt,bits:Kt,createMethod:function(T,A){var E=ne[T],O=w(T,0,"hex");return O.create=function(O,k,B){return k||B?new C(T,A,O).bytepad([k,B],E):ve["shake"+T].create(O)},O.update=function(T,A,E,k){return O.create(A,E,k).update(T)},b(O,w,T,A)}},{name:"kmac",padding:Lt,bits:Kt,createMethod:function(T,A){var E=ne[T],O=v(T,0,"hex");return O.create=function(O,k,B){return new I(T,A,k).bytepad(["KMAC",B],E).bytepad([O],E)},O.update=function(T,A,E,k){return O.create(T,E,k).update(A)},b(O,v,T,A)}}],ve={},Se=[],Ce=0;Ce<le.length;++Ce)for(var Ie=le[Ce],Fe=Ie.bits,Ne=0;Ne<Fe.length;++Ne){var Pe=Ie.name+"_"+Fe[Ne];if(Se.push(Pe),ve[Pe]=Ie.createMethod(Fe[Ne],Ie.padding),"sha3"!==Ie.name){var Le=Ie.name+Fe[Ne];Se.push(Le),ve[Le]=ve[Pe]}}function C(T,A,E){this.blocks=[],this.s=[],this.padding=A,this.outputBits=E,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(T<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=E>>5,this.extraBytes=(31&E)>>3;for(var O=0;O<50;++O)this.s[O]=0}function I(T,A,E){C.call(this,T,A,E)}C.prototype.update=function(T){if(this.finalized)throw new Error("finalize already called");var E,O=typeof T;if("string"!==O){if("object"!==O)throw new Error(A);if(null===T)throw new Error(A);if(Ft&&T.constructor===ArrayBuffer)T=new Uint8Array(T);else if(!(Array.isArray(T)||Ft&&ArrayBuffer.isView(T)))throw new Error(A);E=!0}for(var k,B,_t=this.blocks,Pt=this.byteCount,Lt=T.length,Yt=this.blockCount,Zt=0,Kt=this.s;Zt<Lt;){if(this.reset)for(this.reset=!1,_t[0]=this.block,k=1;k<Yt+1;++k)_t[k]=0;if(E)for(k=this.start;Zt<Lt&&k<Pt;++Zt)_t[k>>2]|=T[Zt]<<Ut[3&k++];else for(k=this.start;Zt<Lt&&k<Pt;++Zt)(B=T.charCodeAt(Zt))<128?_t[k>>2]|=B<<Ut[3&k++]:B<2048?(_t[k>>2]|=(192|B>>6)<<Ut[3&k++],_t[k>>2]|=(128|63&B)<<Ut[3&k++]):B<55296||B>=57344?(_t[k>>2]|=(224|B>>12)<<Ut[3&k++],_t[k>>2]|=(128|B>>6&63)<<Ut[3&k++],_t[k>>2]|=(128|63&B)<<Ut[3&k++]):(B=65536+((1023&B)<<10|1023&T.charCodeAt(++Zt)),_t[k>>2]|=(240|B>>18)<<Ut[3&k++],_t[k>>2]|=(128|B>>12&63)<<Ut[3&k++],_t[k>>2]|=(128|B>>6&63)<<Ut[3&k++],_t[k>>2]|=(128|63&B)<<Ut[3&k++]);if(this.lastByteIndex=k,k>=Pt){for(this.start=k-Pt,this.block=_t[Yt],k=0;k<Yt;++k)Kt[k]^=_t[k];P(Kt),this.reset=!0}else this.start=k}return this},C.prototype.encode=function(T,A){var E=255&T,O=1,k=[E];for(E=255&(T>>=8);E>0;)k.unshift(E),E=255&(T>>=8),++O;return A?k.push(O):k.unshift(O),this.update(k),k.length},C.prototype.encodeString=function(T){var E,O=typeof T;if("string"!==O){if("object"!==O)throw new Error(A);if(null===T)throw new Error(A);if(Ft&&T.constructor===ArrayBuffer)T=new Uint8Array(T);else if(!(Array.isArray(T)||Ft&&ArrayBuffer.isView(T)))throw new Error(A);E=!0}var k=0,B=T.length;if(E)k=B;else for(var _t=0;_t<T.length;++_t){var Pt=T.charCodeAt(_t);Pt<128?k+=1:Pt<2048?k+=2:Pt<55296||Pt>=57344?k+=3:(Pt=65536+((1023&Pt)<<10|1023&T.charCodeAt(++_t)),k+=4)}return k+=this.encode(8*k),this.update(T),k},C.prototype.bytepad=function(T,A){for(var E=this.encode(A),O=0;O<T.length;++O)E+=this.encodeString(T[O]);var k=A-E%A,B=[];return B.length=k,this.update(B),this},C.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var T=this.blocks,A=this.lastByteIndex,E=this.blockCount,O=this.s;if(T[A>>2]|=this.padding[3&A],this.lastByteIndex===this.byteCount)for(T[0]=T[E],A=1;A<E+1;++A)T[A]=0;for(T[E-1]|=2147483648,A=0;A<E;++A)O[A]^=T[A];P(O)}},C.prototype.toString=C.prototype.hex=function(){this.finalize();for(var T,A=this.blockCount,E=this.s,O=this.outputBlocks,k=this.extraBytes,B=0,_t=0,Ft="";_t<O;){for(B=0;B<A&&_t<O;++B,++_t)T=E[B],Ft+=Pt[T>>4&15]+Pt[15&T]+Pt[T>>12&15]+Pt[T>>8&15]+Pt[T>>20&15]+Pt[T>>16&15]+Pt[T>>28&15]+Pt[T>>24&15];_t%A==0&&(P(E),B=0)}return k&&(T=E[B],Ft+=Pt[T>>4&15]+Pt[15&T],k>1&&(Ft+=Pt[T>>12&15]+Pt[T>>8&15]),k>2&&(Ft+=Pt[T>>20&15]+Pt[T>>16&15])),Ft},C.prototype.arrayBuffer=function(){this.finalize();var T,A=this.blockCount,E=this.s,O=this.outputBlocks,k=this.extraBytes,B=0,_t=0,Ft=this.outputBits>>3;T=k?new ArrayBuffer(O+1<<2):new ArrayBuffer(Ft);for(var Pt=new Uint32Array(T);_t<O;){for(B=0;B<A&&_t<O;++B,++_t)Pt[_t]=E[B];_t%A==0&&P(E)}return k&&(Pt[B]=E[B],T=T.slice(0,Ft)),T},C.prototype.buffer=C.prototype.arrayBuffer,C.prototype.digest=C.prototype.array=function(){this.finalize();for(var T,A,E=this.blockCount,O=this.s,k=this.outputBlocks,B=this.extraBytes,_t=0,Ft=0,Pt=[];Ft<k;){for(_t=0;_t<E&&Ft<k;++_t,++Ft)T=Ft<<2,A=O[_t],Pt[T]=255&A,Pt[T+1]=A>>8&255,Pt[T+2]=A>>16&255,Pt[T+3]=A>>24&255;Ft%E==0&&P(O)}return B&&(T=Ft<<2,A=O[_t],Pt[T]=255&A,B>1&&(Pt[T+1]=A>>8&255),B>2&&(Pt[T+2]=A>>16&255)),Pt},I.prototype=new C,I.prototype.finalize=function(){return this.encode(this.outputBits,!0),C.prototype.finalize.call(this)};var P=function(T){var A,E,O,k,B,_t,Ft,Pt,Lt,Ut,Zt,Kt,ee,ne,le,ve,Se,Ce,Ie,Re,Fe,Ne,Pe,Le,Ue,He,Ve,We,Ge,qe,Xe,Ye,$e,Je,Qe,Ze,tn,nn,on,rn,sn,an,cn,ln,un,hn,pn,dn,fn,yn,gn,mn,vn,bn,wn,Tn,xn,An,_n,Sn,En,Cn,In;for(O=0;O<48;O+=2)k=T[0]^T[10]^T[20]^T[30]^T[40],B=T[1]^T[11]^T[21]^T[31]^T[41],_t=T[2]^T[12]^T[22]^T[32]^T[42],Ft=T[3]^T[13]^T[23]^T[33]^T[43],Pt=T[4]^T[14]^T[24]^T[34]^T[44],Lt=T[5]^T[15]^T[25]^T[35]^T[45],Ut=T[6]^T[16]^T[26]^T[36]^T[46],Zt=T[7]^T[17]^T[27]^T[37]^T[47],A=(Kt=T[8]^T[18]^T[28]^T[38]^T[48])^(_t<<1|Ft>>>31),E=(ee=T[9]^T[19]^T[29]^T[39]^T[49])^(Ft<<1|_t>>>31),T[0]^=A,T[1]^=E,T[10]^=A,T[11]^=E,T[20]^=A,T[21]^=E,T[30]^=A,T[31]^=E,T[40]^=A,T[41]^=E,A=k^(Pt<<1|Lt>>>31),E=B^(Lt<<1|Pt>>>31),T[2]^=A,T[3]^=E,T[12]^=A,T[13]^=E,T[22]^=A,T[23]^=E,T[32]^=A,T[33]^=E,T[42]^=A,T[43]^=E,A=_t^(Ut<<1|Zt>>>31),E=Ft^(Zt<<1|Ut>>>31),T[4]^=A,T[5]^=E,T[14]^=A,T[15]^=E,T[24]^=A,T[25]^=E,T[34]^=A,T[35]^=E,T[44]^=A,T[45]^=E,A=Pt^(Kt<<1|ee>>>31),E=Lt^(ee<<1|Kt>>>31),T[6]^=A,T[7]^=E,T[16]^=A,T[17]^=E,T[26]^=A,T[27]^=E,T[36]^=A,T[37]^=E,T[46]^=A,T[47]^=E,A=Ut^(k<<1|B>>>31),E=Zt^(B<<1|k>>>31),T[8]^=A,T[9]^=E,T[18]^=A,T[19]^=E,T[28]^=A,T[29]^=E,T[38]^=A,T[39]^=E,T[48]^=A,T[49]^=E,ne=T[0],le=T[1],hn=T[11]<<4|T[10]>>>28,pn=T[10]<<4|T[11]>>>28,We=T[20]<<3|T[21]>>>29,Ge=T[21]<<3|T[20]>>>29,Sn=T[31]<<9|T[30]>>>23,En=T[30]<<9|T[31]>>>23,an=T[40]<<18|T[41]>>>14,cn=T[41]<<18|T[40]>>>14,Je=T[2]<<1|T[3]>>>31,Qe=T[3]<<1|T[2]>>>31,ve=T[13]<<12|T[12]>>>20,Se=T[12]<<12|T[13]>>>20,dn=T[22]<<10|T[23]>>>22,fn=T[23]<<10|T[22]>>>22,qe=T[33]<<13|T[32]>>>19,Xe=T[32]<<13|T[33]>>>19,Cn=T[42]<<2|T[43]>>>30,In=T[43]<<2|T[42]>>>30,bn=T[5]<<30|T[4]>>>2,wn=T[4]<<30|T[5]>>>2,Ze=T[14]<<6|T[15]>>>26,tn=T[15]<<6|T[14]>>>26,Ce=T[25]<<11|T[24]>>>21,Ie=T[24]<<11|T[25]>>>21,yn=T[34]<<15|T[35]>>>17,gn=T[35]<<15|T[34]>>>17,Ye=T[45]<<29|T[44]>>>3,$e=T[44]<<29|T[45]>>>3,Le=T[6]<<28|T[7]>>>4,Ue=T[7]<<28|T[6]>>>4,Tn=T[17]<<23|T[16]>>>9,xn=T[16]<<23|T[17]>>>9,nn=T[26]<<25|T[27]>>>7,on=T[27]<<25|T[26]>>>7,Re=T[36]<<21|T[37]>>>11,Fe=T[37]<<21|T[36]>>>11,mn=T[47]<<24|T[46]>>>8,vn=T[46]<<24|T[47]>>>8,ln=T[8]<<27|T[9]>>>5,un=T[9]<<27|T[8]>>>5,He=T[18]<<20|T[19]>>>12,Ve=T[19]<<20|T[18]>>>12,An=T[29]<<7|T[28]>>>25,_n=T[28]<<7|T[29]>>>25,rn=T[38]<<8|T[39]>>>24,sn=T[39]<<8|T[38]>>>24,Ne=T[48]<<14|T[49]>>>18,Pe=T[49]<<14|T[48]>>>18,T[0]=ne^~ve&Ce,T[1]=le^~Se&Ie,T[10]=Le^~He&We,T[11]=Ue^~Ve&Ge,T[20]=Je^~Ze&nn,T[21]=Qe^~tn&on,T[30]=ln^~hn&dn,T[31]=un^~pn&fn,T[40]=bn^~Tn&An,T[41]=wn^~xn&_n,T[2]=ve^~Ce&Re,T[3]=Se^~Ie&Fe,T[12]=He^~We&qe,T[13]=Ve^~Ge&Xe,T[22]=Ze^~nn&rn,T[23]=tn^~on&sn,T[32]=hn^~dn&yn,T[33]=pn^~fn&gn,T[42]=Tn^~An&Sn,T[43]=xn^~_n&En,T[4]=Ce^~Re&Ne,T[5]=Ie^~Fe&Pe,T[14]=We^~qe&Ye,T[15]=Ge^~Xe&$e,T[24]=nn^~rn&an,T[25]=on^~sn&cn,T[34]=dn^~yn&mn,T[35]=fn^~gn&vn,T[44]=An^~Sn&Cn,T[45]=_n^~En&In,T[6]=Re^~Ne&ne,T[7]=Fe^~Pe&le,T[16]=qe^~Ye&Le,T[17]=Xe^~$e&Ue,T[26]=rn^~an&Je,T[27]=sn^~cn&Qe,T[36]=yn^~mn&ln,T[37]=gn^~vn&un,T[46]=Sn^~Cn&bn,T[47]=En^~In&wn,T[8]=Ne^~ne&ve,T[9]=Pe^~le&Se,T[18]=Ye^~Le&He,T[19]=$e^~Ue&Ve,T[28]=an^~Je&Ze,T[29]=cn^~Qe&tn,T[38]=mn^~ln&hn,T[39]=vn^~un&pn,T[48]=Cn^~bn&Tn,T[49]=In^~wn&xn,T[0]^=Yt[O],T[1]^=Yt[O+1]};if(_t)T.exports=ve;else for(Ce=0;Ce<Se.length;++Ce)O[Se[Ce]]=ve[Se[Ce]]}()}));Fe.keccak_224,Fe.keccak224,Fe.keccak_256;var Ne=Fe.keccak256;Fe.keccak_384,Fe.keccak384,Fe.keccak_512,Fe.keccak512,Fe.sha3_224,Fe.sha3_256,Fe.sha3_384,Fe.sha3_512,Fe.shake_128,Fe.shake128,Fe.shake_256,Fe.shake256,Fe.cshake_128,Fe.cshake128,Fe.cshake_256,Fe.cshake256,Fe.kmac_128,Fe.kmac128,Fe.kmac_256,Fe.kmac256;var Pe=n((function(T){!function(A){var E,O=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,k=Math.ceil,B=Math.floor,_t="[BigNumber Error] ",Ft=_t+"Number primitive has more than 15 significant digits: ",Pt=1e14,Lt=14,Ut=9007199254740991,Yt=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Zt=1e7,Kt=1e9;function d(T){var A=0|T;return T>0||T===A?A:A-1}function g(T){for(var A,E,O=1,k=T.length,B=T[0]+"";O<k;){for(A=T[O++]+"",E=Lt-A.length;E--;A="0"+A);B+=A}for(k=B.length;48===B.charCodeAt(--k););return B.slice(0,k+1||1)}function m(T,A){var E,O,k=T.c,B=A.c,_t=T.s,Ft=A.s,Pt=T.e,Lt=A.e;if(!_t||!Ft)return null;if(E=k&&!k[0],O=B&&!B[0],E||O)return E?O?0:-Ft:_t;if(_t!=Ft)return _t;if(E=_t<0,O=Pt==Lt,!k||!B)return O?0:!k^E?1:-1;if(!O)return Pt>Lt^E?1:-1;for(Ft=(Pt=k.length)<(Lt=B.length)?Pt:Lt,_t=0;_t<Ft;_t++)if(k[_t]!=B[_t])return k[_t]>B[_t]^E?1:-1;return Pt==Lt?0:Pt>Lt^E?1:-1}function y(T,A,E,O){if(T<A||T>E||T!==B(T))throw Error(_t+(O||"Argument")+("number"==typeof T?T<A||T>E?" out of range: ":" not an integer: ":" not a primitive number: ")+String(T))}function w(T){var A=T.c.length-1;return d(T.e/Lt)==A&&T.c[A]%2!=0}function v(T,A){return(T.length>1?T.charAt(0)+"."+T.slice(1):T)+(A<0?"e":"e+")+A}function b(T,A,E){var O,k;if(A<0){for(k=E+".";++A;k+=E);T=k+T}else if(++A>(O=T.length)){for(k=E,A-=O;--A;k+=E);T+=k}else A<O&&(T=T.slice(0,A)+"."+T.slice(A));return T}(E=function t(T){var A,E,ee,ne,le,ve,Se,Ce,Ie,Re,Fe=H.prototype={constructor:H,toString:null,valueOf:null},Ne=new H(1),Pe=20,Le=4,Ue=-7,He=21,Ve=-1e7,We=1e7,Ge=!1,qe=1,Xe=0,Ye={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},$e="0123456789abcdefghijklmnopqrstuvwxyz";function H(T,A){var k,_t,Pt,Yt,Zt,Kt,ne,le,ve=this;if(!(ve instanceof H))return new H(T,A);if(null==A){if(T&&!0===T._isBigNumber)return ve.s=T.s,void(!T.c||T.e>We?ve.c=ve.e=null:T.e<Ve?ve.c=[ve.e=0]:(ve.e=T.e,ve.c=T.c.slice()));if((Kt="number"==typeof T)&&0*T==0){if(ve.s=1/T<0?(T=-T,-1):1,T===~~T){for(Yt=0,Zt=T;Zt>=10;Zt/=10,Yt++);return void(Yt>We?ve.c=ve.e=null:(ve.e=Yt,ve.c=[T]))}le=String(T)}else{if(!O.test(le=String(T)))return ee(ve,le,Kt);ve.s=45==le.charCodeAt(0)?(le=le.slice(1),-1):1}(Yt=le.indexOf("."))>-1&&(le=le.replace(".","")),(Zt=le.search(/e/i))>0?(Yt<0&&(Yt=Zt),Yt+=+le.slice(Zt+1),le=le.substring(0,Zt)):Yt<0&&(Yt=le.length)}else{if(y(A,2,$e.length,"Base"),10==A)return W(ve=new H(T),Pe+ve.e+1,Le);if(le=String(T),Kt="number"==typeof T){if(0*T!=0)return ee(ve,le,Kt,A);if(ve.s=1/T<0?(le=le.slice(1),-1):1,H.DEBUG&&le.replace(/^0\.0*|\./,"").length>15)throw Error(Ft+T)}else ve.s=45===le.charCodeAt(0)?(le=le.slice(1),-1):1;for(k=$e.slice(0,A),Yt=Zt=0,ne=le.length;Zt<ne;Zt++)if(k.indexOf(_t=le.charAt(Zt))<0){if("."==_t){if(Zt>Yt){Yt=ne;continue}}else if(!Pt&&(le==le.toUpperCase()&&(le=le.toLowerCase())||le==le.toLowerCase()&&(le=le.toUpperCase()))){Pt=!0,Zt=-1,Yt=0;continue}return ee(ve,String(T),Kt,A)}Kt=!1,(Yt=(le=E(le,A,10,ve.s)).indexOf("."))>-1?le=le.replace(".",""):Yt=le.length}for(Zt=0;48===le.charCodeAt(Zt);Zt++);for(ne=le.length;48===le.charCodeAt(--ne););if(le=le.slice(Zt,++ne)){if(ne-=Zt,Kt&&H.DEBUG&&ne>15&&(T>Ut||T!==B(T)))throw Error(Ft+ve.s*T);if((Yt=Yt-Zt-1)>We)ve.c=ve.e=null;else if(Yt<Ve)ve.c=[ve.e=0];else{if(ve.e=Yt,ve.c=[],Zt=(Yt+1)%Lt,Yt<0&&(Zt+=Lt),Zt<ne){for(Zt&&ve.c.push(+le.slice(0,Zt)),ne-=Lt;Zt<ne;)ve.c.push(+le.slice(Zt,Zt+=Lt));Zt=Lt-(le=le.slice(Zt)).length}else Zt-=ne;for(;Zt--;le+="0");ve.c.push(+le)}}else ve.c=[ve.e=0]}function G(T,A,E,O){var k,B,_t,Ft,Pt;if(null==E?E=Le:y(E,0,8),!T.c)return T.toString();if(k=T.c[0],_t=T.e,null==A)Pt=g(T.c),Pt=1==O||2==O&&(_t<=Ue||_t>=He)?v(Pt,_t):b(Pt,_t,"0");else if(B=(T=W(new H(T),A,E)).e,Ft=(Pt=g(T.c)).length,1==O||2==O&&(A<=B||B<=Ue)){for(;Ft<A;Pt+="0",Ft++);Pt=v(Pt,B)}else if(A-=_t,Pt=b(Pt,B,"0"),B+1>Ft){if(--A>0)for(Pt+=".";A--;Pt+="0");}else if((A+=B-Ft)>0)for(B+1==Ft&&(Pt+=".");A--;Pt+="0");return T.s<0&&k?"-"+Pt:Pt}function z(T,A){for(var E,O=1,k=new H(T[0]);O<T.length;O++){if(!(E=new H(T[O])).s){k=E;break}A.call(k,E)&&(k=E)}return k}function J(T,A,E){for(var O=1,k=A.length;!A[--k];A.pop());for(k=A[0];k>=10;k/=10,O++);return(E=O+E*Lt-1)>We?T.c=T.e=null:E<Ve?T.c=[T.e=0]:(T.e=E,T.c=A),T}function W(T,A,E,O){var _t,Ft,Ut,Zt,Kt,ee,ne,le=T.c,ve=Yt;if(le){t:{for(_t=1,Zt=le[0];Zt>=10;Zt/=10,_t++);if((Ft=A-_t)<0)Ft+=Lt,Ut=A,ne=(Kt=le[ee=0])/ve[_t-Ut-1]%10|0;else if((ee=k((Ft+1)/Lt))>=le.length){if(!O)break t;for(;le.length<=ee;le.push(0));Kt=ne=0,_t=1,Ut=(Ft%=Lt)-Lt+1}else{for(Kt=Zt=le[ee],_t=1;Zt>=10;Zt/=10,_t++);ne=(Ut=(Ft%=Lt)-Lt+_t)<0?0:Kt/ve[_t-Ut-1]%10|0}if(O=O||A<0||null!=le[ee+1]||(Ut<0?Kt:Kt%ve[_t-Ut-1]),O=E<4?(ne||O)&&(0==E||E==(T.s<0?3:2)):ne>5||5==ne&&(4==E||O||6==E&&(Ft>0?Ut>0?Kt/ve[_t-Ut]:0:le[ee-1])%10&1||E==(T.s<0?8:7)),A<1||!le[0])return le.length=0,O?(A-=T.e+1,le[0]=ve[(Lt-A%Lt)%Lt],T.e=-A||0):le[0]=T.e=0,T;if(0==Ft?(le.length=ee,Zt=1,ee--):(le.length=ee+1,Zt=ve[Lt-Ft],le[ee]=Ut>0?B(Kt/ve[_t-Ut]%ve[Ut])*Zt:0),O)for(;;){if(0==ee){for(Ft=1,Ut=le[0];Ut>=10;Ut/=10,Ft++);for(Ut=le[0]+=Zt,Zt=1;Ut>=10;Ut/=10,Zt++);Ft!=Zt&&(T.e++,le[0]==Pt&&(le[0]=1));break}if(le[ee]+=Zt,le[ee]!=Pt)break;le[ee--]=0,Zt=1}for(Ft=le.length;0===le[--Ft];le.pop());}T.e>We?T.c=T.e=null:T.e<Ve&&(T.c=[T.e=0])}return T}function V(T){var A,E=T.e;return null===E?T.toString():(A=g(T.c),A=E<=Ue||E>=He?v(A,E):b(A,E,"0"),T.s<0?"-"+A:A)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(T){var A,E;if(null!=T){if("object"!=typeof T)throw Error(_t+"Object expected: "+T);if(T.hasOwnProperty(A="DECIMAL_PLACES")&&(y(E=T[A],0,Kt,A),Pe=E),T.hasOwnProperty(A="ROUNDING_MODE")&&(y(E=T[A],0,8,A),Le=E),T.hasOwnProperty(A="EXPONENTIAL_AT")&&((E=T[A])&&E.pop?(y(E[0],-Kt,0,A),y(E[1],0,Kt,A),Ue=E[0],He=E[1]):(y(E,-Kt,Kt,A),Ue=-(He=E<0?-E:E))),T.hasOwnProperty(A="RANGE"))if((E=T[A])&&E.pop)y(E[0],-Kt,-1,A),y(E[1],1,Kt,A),Ve=E[0],We=E[1];else{if(y(E,-Kt,Kt,A),!E)throw Error(_t+A+" cannot be zero: "+E);Ve=-(We=E<0?-E:E)}if(T.hasOwnProperty(A="CRYPTO")){if((E=T[A])!==!!E)throw Error(_t+A+" not true or false: "+E);if(E){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Ge=!E,Error(_t+"crypto unavailable");Ge=E}else Ge=E}if(T.hasOwnProperty(A="MODULO_MODE")&&(y(E=T[A],0,9,A),qe=E),T.hasOwnProperty(A="POW_PRECISION")&&(y(E=T[A],0,Kt,A),Xe=E),T.hasOwnProperty(A="FORMAT")){if("object"!=typeof(E=T[A]))throw Error(_t+A+" not an object: "+E);Ye=E}if(T.hasOwnProperty(A="ALPHABET")){if("string"!=typeof(E=T[A])||/^.?$|[+\-.\s]|(.).*\1/.test(E))throw Error(_t+A+" invalid: "+E);$e=E}}return{DECIMAL_PLACES:Pe,ROUNDING_MODE:Le,EXPONENTIAL_AT:[Ue,He],RANGE:[Ve,We],CRYPTO:Ge,MODULO_MODE:qe,POW_PRECISION:Xe,FORMAT:Ye,ALPHABET:$e}},H.isBigNumber=function(T){if(!T||!0!==T._isBigNumber)return!1;if(!H.DEBUG)return!0;var A,E,O=T.c,k=T.e,Ft=T.s;t:if("[object Array]"=={}.toString.call(O)){if((1===Ft||-1===Ft)&&k>=-Kt&&k<=Kt&&k===B(k)){if(0===O[0]){if(0===k&&1===O.length)return!0;break t}if((A=(k+1)%Lt)<1&&(A+=Lt),String(O[0]).length==A){for(A=0;A<O.length;A++)if((E=O[A])<0||E>=Pt||E!==B(E))break t;if(0!==E)return!0}}}else if(null===O&&null===k&&(null===Ft||1===Ft||-1===Ft))return!0;throw Error(_t+"Invalid BigNumber: "+T)},H.maximum=H.max=function(){return z(arguments,Fe.lt)},H.minimum=H.min=function(){return z(arguments,Fe.gt)},H.random=(ne=9007199254740992,le=Math.random()*ne&2097151?function(){return B(Math.random()*ne)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(T){var A,E,O,Ft,Pt,Ut=0,Zt=[],ee=new H(Ne);if(null==T?T=Pe:y(T,0,Kt),Ft=k(T/Lt),Ge)if(crypto.getRandomValues){for(A=crypto.getRandomValues(new Uint32Array(Ft*=2));Ut<Ft;)(Pt=131072*A[Ut]+(A[Ut+1]>>>11))>=9e15?(E=crypto.getRandomValues(new Uint32Array(2)),A[Ut]=E[0],A[Ut+1]=E[1]):(Zt.push(Pt%1e14),Ut+=2);Ut=Ft/2}else{if(!crypto.randomBytes)throw Ge=!1,Error(_t+"crypto unavailable");for(A=crypto.randomBytes(Ft*=7);Ut<Ft;)(Pt=281474976710656*(31&A[Ut])+1099511627776*A[Ut+1]+4294967296*A[Ut+2]+16777216*A[Ut+3]+(A[Ut+4]<<16)+(A[Ut+5]<<8)+A[Ut+6])>=9e15?crypto.randomBytes(7).copy(A,Ut):(Zt.push(Pt%1e14),Ut+=7);Ut=Ft/7}if(!Ge)for(;Ut<Ft;)(Pt=le())<9e15&&(Zt[Ut++]=Pt%1e14);for(Ft=Zt[--Ut],T%=Lt,Ft&&T&&(Pt=Yt[Lt-T],Zt[Ut]=B(Ft/Pt)*Pt);0===Zt[Ut];Zt.pop(),Ut--);if(Ut<0)Zt=[O=0];else{for(O=-1;0===Zt[0];Zt.splice(0,1),O-=Lt);for(Ut=1,Pt=Zt[0];Pt>=10;Pt/=10,Ut++);Ut<Lt&&(O-=Lt-Ut)}return ee.e=O,ee.c=Zt,ee}),H.sum=function(){for(var T=1,A=arguments,E=new H(A[0]);T<A.length;)E=E.plus(A[T++]);return E},E=function(){var T="0123456789";function e(T,A,E,O){for(var k,B,_t=[0],Ft=0,Pt=T.length;Ft<Pt;){for(B=_t.length;B--;_t[B]*=A);for(_t[0]+=O.indexOf(T.charAt(Ft++)),k=0;k<_t.length;k++)_t[k]>E-1&&(null==_t[k+1]&&(_t[k+1]=0),_t[k+1]+=_t[k]/E|0,_t[k]%=E)}return _t.reverse()}return function(E,O,k,B,_t){var Ft,Pt,Lt,Ut,Yt,Zt,Kt,ee,ne=E.indexOf("."),le=Pe,ve=Le;for(ne>=0&&(Ut=Xe,Xe=0,E=E.replace(".",""),Zt=(ee=new H(O)).pow(E.length-ne),Xe=Ut,ee.c=e(b(g(Zt.c),Zt.e,"0"),10,k,T),ee.e=ee.c.length),Lt=Ut=(Kt=e(E,O,k,_t?(Ft=$e,T):(Ft=T,$e))).length;0==Kt[--Ut];Kt.pop());if(!Kt[0])return Ft.charAt(0);if(ne<0?--Lt:(Zt.c=Kt,Zt.e=Lt,Zt.s=B,Kt=(Zt=A(Zt,ee,le,ve,k)).c,Yt=Zt.r,Lt=Zt.e),ne=Kt[Pt=Lt+le+1],Ut=k/2,Yt=Yt||Pt<0||null!=Kt[Pt+1],Yt=ve<4?(null!=ne||Yt)&&(0==ve||ve==(Zt.s<0?3:2)):ne>Ut||ne==Ut&&(4==ve||Yt||6==ve&&1&Kt[Pt-1]||ve==(Zt.s<0?8:7)),Pt<1||!Kt[0])E=Yt?b(Ft.charAt(1),-le,Ft.charAt(0)):Ft.charAt(0);else{if(Kt.length=Pt,Yt)for(--k;++Kt[--Pt]>k;)Kt[Pt]=0,Pt||(++Lt,Kt=[1].concat(Kt));for(Ut=Kt.length;!Kt[--Ut];);for(ne=0,E="";ne<=Ut;E+=Ft.charAt(Kt[ne++]));E=b(E,Lt,Ft.charAt(0))}return E}}(),A=function(){function t(T,A,E){var O,k,B,_t,Ft=0,Pt=T.length,Lt=A%Zt,Ut=A/Zt|0;for(T=T.slice();Pt--;)Ft=((k=Lt*(B=T[Pt]%Zt)+(O=Ut*B+(_t=T[Pt]/Zt|0)*Lt)%Zt*Zt+Ft)/E|0)+(O/Zt|0)+Ut*_t,T[Pt]=k%E;return Ft&&(T=[Ft].concat(T)),T}function e(T,A,E,O){var k,B;if(E!=O)B=E>O?1:-1;else for(k=B=0;k<E;k++)if(T[k]!=A[k]){B=T[k]>A[k]?1:-1;break}return B}function n(T,A,E,O){for(var k=0;E--;)T[E]-=k,k=T[E]<A[E]?1:0,T[E]=k*O+T[E]-A[E];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,A,E,O,k){var _t,Ft,Ut,Yt,Zt,Kt,ee,ne,le,ve,Se,Ce,Ie,Re,Fe,Ne,Pe,Le=T.s==A.s?1:-1,Ue=T.c,He=A.c;if(!(Ue&&Ue[0]&&He&&He[0]))return new H(T.s&&A.s&&(Ue?!He||Ue[0]!=He[0]:He)?Ue&&0==Ue[0]||!He?0*Le:Le/0:NaN);for(le=(ne=new H(Le)).c=[],Le=E+(Ft=T.e-A.e)+1,k||(k=Pt,Ft=d(T.e/Lt)-d(A.e/Lt),Le=Le/Lt|0),Ut=0;He[Ut]==(Ue[Ut]||0);Ut++);if(He[Ut]>(Ue[Ut]||0)&&Ft--,Le<0)le.push(1),Yt=!0;else{for(Re=Ue.length,Ne=He.length,Ut=0,Le+=2,(Zt=B(k/(He[0]+1)))>1&&(He=t(He,Zt,k),Ue=t(Ue,Zt,k),Ne=He.length,Re=Ue.length),Ie=Ne,Se=(ve=Ue.slice(0,Ne)).length;Se<Ne;ve[Se++]=0);Pe=He.slice(),Pe=[0].concat(Pe),Fe=He[0],He[1]>=k/2&&Fe++;do{if(Zt=0,(_t=e(He,ve,Ne,Se))<0){if(Ce=ve[0],Ne!=Se&&(Ce=Ce*k+(ve[1]||0)),(Zt=B(Ce/Fe))>1)for(Zt>=k&&(Zt=k-1),ee=(Kt=t(He,Zt,k)).length,Se=ve.length;1==e(Kt,ve,ee,Se);)Zt--,n(Kt,Ne<ee?Pe:He,ee,k),ee=Kt.length,_t=1;else 0==Zt&&(_t=Zt=1),ee=(Kt=He.slice()).length;if(ee<Se&&(Kt=[0].concat(Kt)),n(ve,Kt,Se,k),Se=ve.length,-1==_t)for(;e(He,ve,Ne,Se)<1;)Zt++,n(ve,Ne<Se?Pe:He,Se,k),Se=ve.length}else 0===_t&&(Zt++,ve=[0]);le[Ut++]=Zt,ve[0]?ve[Se++]=Ue[Ie]||0:(ve=[Ue[Ie]],Se=1)}while((Ie++<Re||null!=ve[0])&&Le--);Yt=null!=ve[0],le[0]||le.splice(0,1)}if(k==Pt){for(Ut=1,Le=le[0];Le>=10;Le/=10,Ut++);W(ne,E+(ne.e=Ut+Ft*Lt-1)+1,O,Yt)}else ne.e=Ft,ne.r=+Yt;return ne}}(),ve=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Se=/^([^.]+)\.$/,Ce=/^\.([^.]+)$/,Ie=/^-?(Infinity|NaN)$/,Re=/^\s*\+(?=[\w.])|^\s+|\s+$/g,ee=function(T,A,E,O){var k,B=E?A:A.replace(Re,"");if(Ie.test(B))T.s=isNaN(B)?null:B<0?-1:1;else{if(!E&&(B=B.replace(ve,(function(T,A,E){return k="x"==(E=E.toLowerCase())?16:"b"==E?2:8,O&&O!=k?T:A})),O&&(k=O,B=B.replace(Se,"$1").replace(Ce,"0.$1")),A!=B))return new H(B,k);if(H.DEBUG)throw Error(_t+"Not a"+(O?" base "+O:"")+" number: "+A);T.s=null}T.c=T.e=null},Fe.absoluteValue=Fe.abs=function(){var T=new H(this);return T.s<0&&(T.s=1),T},Fe.comparedTo=function(T,A){return m(this,new H(T,A))},Fe.decimalPlaces=Fe.dp=function(T,A){var E,O,k,B=this;if(null!=T)return y(T,0,Kt),null==A?A=Le:y(A,0,8),W(new H(B),T+B.e+1,A);if(!(E=B.c))return null;if(O=((k=E.length-1)-d(this.e/Lt))*Lt,k=E[k])for(;k%10==0;k/=10,O--);return O<0&&(O=0),O},Fe.dividedBy=Fe.div=function(T,E){return A(this,new H(T,E),Pe,Le)},Fe.dividedToIntegerBy=Fe.idiv=function(T,E){return A(this,new H(T,E),0,1)},Fe.exponentiatedBy=Fe.pow=function(T,A){var E,O,Ft,Pt,Ut,Yt,Zt,Kt,ee=this;if((T=new H(T)).c&&!T.isInteger())throw Error(_t+"Exponent not an integer: "+V(T));if(null!=A&&(A=new H(A)),Ut=T.e>14,!ee.c||!ee.c[0]||1==ee.c[0]&&!ee.e&&1==ee.c.length||!T.c||!T.c[0])return Kt=new H(Math.pow(+V(ee),Ut?2-w(T):+V(T))),A?Kt.mod(A):Kt;if(Yt=T.s<0,A){if(A.c?!A.c[0]:!A.s)return new H(NaN);(O=!Yt&&ee.isInteger()&&A.isInteger())&&(ee=ee.mod(A))}else{if(T.e>9&&(ee.e>0||ee.e<-1||(0==ee.e?ee.c[0]>1||Ut&&ee.c[1]>=24e7:ee.c[0]<8e13||Ut&&ee.c[0]<=9999975e7)))return Pt=ee.s<0&&w(T)?-0:0,ee.e>-1&&(Pt=1/Pt),new H(Yt?1/Pt:Pt);Xe&&(Pt=k(Xe/Lt+2))}for(Ut?(E=new H(.5),Yt&&(T.s=1),Zt=w(T)):Zt=(Ft=Math.abs(+V(T)))%2,Kt=new H(Ne);;){if(Zt){if(!(Kt=Kt.times(ee)).c)break;Pt?Kt.c.length>Pt&&(Kt.c.length=Pt):O&&(Kt=Kt.mod(A))}if(Ft){if(0===(Ft=B(Ft/2)))break;Zt=Ft%2}else if(W(T=T.times(E),T.e+1,1),T.e>14)Zt=w(T);else{if(0==(Ft=+V(T)))break;Zt=Ft%2}ee=ee.times(ee),Pt?ee.c&&ee.c.length>Pt&&(ee.c.length=Pt):O&&(ee=ee.mod(A))}return O?Kt:(Yt&&(Kt=Ne.div(Kt)),A?Kt.mod(A):Pt?W(Kt,Xe,Le,void 0):Kt)},Fe.integerValue=function(T){var A=new H(this);return null==T?T=Le:y(T,0,8),W(A,A.e+1,T)},Fe.isEqualTo=Fe.eq=function(T,A){return 0===m(this,new H(T,A))},Fe.isFinite=function(){return!!this.c},Fe.isGreaterThan=Fe.gt=function(T,A){return m(this,new H(T,A))>0},Fe.isGreaterThanOrEqualTo=Fe.gte=function(T,A){return 1===(A=m(this,new H(T,A)))||0===A},Fe.isInteger=function(){return!!this.c&&d(this.e/Lt)>this.c.length-2},Fe.isLessThan=Fe.lt=function(T,A){return m(this,new H(T,A))<0},Fe.isLessThanOrEqualTo=Fe.lte=function(T,A){return-1===(A=m(this,new H(T,A)))||0===A},Fe.isNaN=function(){return!this.s},Fe.isNegative=function(){return this.s<0},Fe.isPositive=function(){return this.s>0},Fe.isZero=function(){return!!this.c&&0==this.c[0]},Fe.minus=function(T,A){var E,O,k,B,_t=this,Ft=_t.s;if(A=(T=new H(T,A)).s,!Ft||!A)return new H(NaN);if(Ft!=A)return T.s=-A,_t.plus(T);var Ut=_t.e/Lt,Yt=T.e/Lt,Zt=_t.c,Kt=T.c;if(!Ut||!Yt){if(!Zt||!Kt)return Zt?(T.s=-A,T):new H(Kt?_t:NaN);if(!Zt[0]||!Kt[0])return Kt[0]?(T.s=-A,T):new H(Zt[0]?_t:3==Le?-0:0)}if(Ut=d(Ut),Yt=d(Yt),Zt=Zt.slice(),Ft=Ut-Yt){for((B=Ft<0)?(Ft=-Ft,k=Zt):(Yt=Ut,k=Kt),k.reverse(),A=Ft;A--;k.push(0));k.reverse()}else for(O=(B=(Ft=Zt.length)<(A=Kt.length))?Ft:A,Ft=A=0;A<O;A++)if(Zt[A]!=Kt[A]){B=Zt[A]<Kt[A];break}if(B&&(k=Zt,Zt=Kt,Kt=k,T.s=-T.s),(A=(O=Kt.length)-(E=Zt.length))>0)for(;A--;Zt[E++]=0);for(A=Pt-1;O>Ft;){if(Zt[--O]<Kt[O]){for(E=O;E&&!Zt[--E];Zt[E]=A);--Zt[E],Zt[O]+=Pt}Zt[O]-=Kt[O]}for(;0==Zt[0];Zt.splice(0,1),--Yt);return Zt[0]?J(T,Zt,Yt):(T.s=3==Le?-1:1,T.c=[T.e=0],T)},Fe.modulo=Fe.mod=function(T,E){var O,k,B=this;return T=new H(T,E),!B.c||!T.s||T.c&&!T.c[0]?new H(NaN):!T.c||B.c&&!B.c[0]?new H(B):(9==qe?(k=T.s,T.s=1,O=A(B,T,0,3),T.s=k,O.s*=k):O=A(B,T,0,qe),(T=B.minus(O.times(T))).c[0]||1!=qe||(T.s=B.s),T)},Fe.multipliedBy=Fe.times=function(T,A){var E,O,k,B,_t,Ft,Ut,Yt,Kt,ee,ne,le,ve,Se,Ce,Ie=this,Re=Ie.c,Fe=(T=new H(T,A)).c;if(!(Re&&Fe&&Re[0]&&Fe[0]))return!Ie.s||!T.s||Re&&!Re[0]&&!Fe||Fe&&!Fe[0]&&!Re?T.c=T.e=T.s=null:(T.s*=Ie.s,Re&&Fe?(T.c=[0],T.e=0):T.c=T.e=null),T;for(O=d(Ie.e/Lt)+d(T.e/Lt),T.s*=Ie.s,(Ut=Re.length)<(ee=Fe.length)&&(ve=Re,Re=Fe,Fe=ve,k=Ut,Ut=ee,ee=k),k=Ut+ee,ve=[];k--;ve.push(0));for(Se=Pt,Ce=Zt,k=ee;--k>=0;){for(E=0,ne=Fe[k]%Ce,le=Fe[k]/Ce|0,B=k+(_t=Ut);B>k;)E=((Yt=ne*(Yt=Re[--_t]%Ce)+(Ft=le*Yt+(Kt=Re[_t]/Ce|0)*ne)%Ce*Ce+ve[B]+E)/Se|0)+(Ft/Ce|0)+le*Kt,ve[B--]=Yt%Se;ve[B]=E}return E?++O:ve.splice(0,1),J(T,ve,O)},Fe.negated=function(){var T=new H(this);return T.s=-T.s||null,T},Fe.plus=function(T,A){var E,O=this,k=O.s;if(A=(T=new H(T,A)).s,!k||!A)return new H(NaN);if(k!=A)return T.s=-A,O.minus(T);var B=O.e/Lt,_t=T.e/Lt,Ft=O.c,Ut=T.c;if(!B||!_t){if(!Ft||!Ut)return new H(k/0);if(!Ft[0]||!Ut[0])return Ut[0]?T:new H(Ft[0]?O:0*k)}if(B=d(B),_t=d(_t),Ft=Ft.slice(),k=B-_t){for(k>0?(_t=B,E=Ut):(k=-k,E=Ft),E.reverse();k--;E.push(0));E.reverse()}for((k=Ft.length)-(A=Ut.length)<0&&(E=Ut,Ut=Ft,Ft=E,A=k),k=0;A;)k=(Ft[--A]=Ft[A]+Ut[A]+k)/Pt|0,Ft[A]=Pt===Ft[A]?0:Ft[A]%Pt;return k&&(Ft=[k].concat(Ft),++_t),J(T,Ft,_t)},Fe.precision=Fe.sd=function(T,A){var E,O,k,B=this;if(null!=T&&T!==!!T)return y(T,1,Kt),null==A?A=Le:y(A,0,8),W(new H(B),T,A);if(!(E=B.c))return null;if(O=(k=E.length-1)*Lt+1,k=E[k]){for(;k%10==0;k/=10,O--);for(k=E[0];k>=10;k/=10,O++);}return T&&B.e+1>O&&(O=B.e+1),O},Fe.shiftedBy=function(T){return y(T,-9007199254740991,Ut),this.times("1e"+T)},Fe.squareRoot=Fe.sqrt=function(){var T,E,O,k,B,_t=this,Ft=_t.c,Pt=_t.s,Lt=_t.e,Ut=Pe+4,Yt=new H("0.5");if(1!==Pt||!Ft||!Ft[0])return new H(!Pt||Pt<0&&(!Ft||Ft[0])?NaN:Ft?_t:1/0);if(0==(Pt=Math.sqrt(+V(_t)))||Pt==1/0?(((E=g(Ft)).length+Lt)%2==0&&(E+="0"),Pt=Math.sqrt(+E),Lt=d((Lt+1)/2)-(Lt<0||Lt%2),O=new H(E=Pt==1/0?"5e"+Lt:(E=Pt.toExponential()).slice(0,E.indexOf("e")+1)+Lt)):O=new H(Pt+""),O.c[0])for((Pt=(Lt=O.e)+Ut)<3&&(Pt=0);;)if(B=O,O=Yt.times(B.plus(A(_t,B,Ut,1))),g(B.c).slice(0,Pt)===(E=g(O.c)).slice(0,Pt)){if(O.e<Lt&&--Pt,"9999"!=(E=E.slice(Pt-3,Pt+1))&&(k||"4999"!=E)){+E&&(+E.slice(1)||"5"!=E.charAt(0))||(W(O,O.e+Pe+2,1),T=!O.times(O).eq(_t));break}if(!k&&(W(B,B.e+Pe+2,0),B.times(B).eq(_t))){O=B;break}Ut+=4,Pt+=4,k=1}return W(O,O.e+Pe+1,Le,T)},Fe.toExponential=function(T,A){return null!=T&&(y(T,0,Kt),T++),G(this,T,A,1)},Fe.toFixed=function(T,A){return null!=T&&(y(T,0,Kt),T=T+this.e+1),G(this,T,A)},Fe.toFormat=function(T,A,E){var O,k=this;if(null==E)null!=T&&A&&"object"==typeof A?(E=A,A=null):T&&"object"==typeof T?(E=T,T=A=null):E=Ye;else if("object"!=typeof E)throw Error(_t+"Argument not an object: "+E);if(O=k.toFixed(T,A),k.c){var B,Ft=O.split("."),Pt=+E.groupSize,Lt=+E.secondaryGroupSize,Ut=E.groupSeparator||"",Yt=Ft[0],Zt=Ft[1],Kt=k.s<0,ee=Kt?Yt.slice(1):Yt,ne=ee.length;if(Lt&&(B=Pt,Pt=Lt,Lt=B,ne-=B),Pt>0&&ne>0){for(B=ne%Pt||Pt,Yt=ee.substr(0,B);B<ne;B+=Pt)Yt+=Ut+ee.substr(B,Pt);Lt>0&&(Yt+=Ut+ee.slice(B)),Kt&&(Yt="-"+Yt)}O=Zt?Yt+(E.decimalSeparator||"")+((Lt=+E.fractionGroupSize)?Zt.replace(new RegExp("\\d{"+Lt+"}\\B","g"),"$&"+(E.fractionGroupSeparator||"")):Zt):Yt}return(E.prefix||"")+O+(E.suffix||"")},Fe.toFraction=function(T){var E,O,k,B,Ft,Pt,Ut,Zt,Kt,ee,ne,le,ve=this,Se=ve.c;if(null!=T&&(!(Ut=new H(T)).isInteger()&&(Ut.c||1!==Ut.s)||Ut.lt(Ne)))throw Error(_t+"Argument "+(Ut.isInteger()?"out of range: ":"not an integer: ")+V(Ut));if(!Se)return new H(ve);for(E=new H(Ne),Kt=O=new H(Ne),k=Zt=new H(Ne),le=g(Se),Ft=E.e=le.length-ve.e-1,E.c[0]=Yt[(Pt=Ft%Lt)<0?Lt+Pt:Pt],T=!T||Ut.comparedTo(E)>0?Ft>0?E:Kt:Ut,Pt=We,We=1/0,Ut=new H(le),Zt.c[0]=0;ee=A(Ut,E,0,1),1!=(B=O.plus(ee.times(k))).comparedTo(T);)O=k,k=B,Kt=Zt.plus(ee.times(B=Kt)),Zt=B,E=Ut.minus(ee.times(B=E)),Ut=B;return B=A(T.minus(O),k,0,1),Zt=Zt.plus(B.times(Kt)),O=O.plus(B.times(k)),Zt.s=Kt.s=ve.s,ne=A(Kt,k,Ft*=2,Le).minus(ve).abs().comparedTo(A(Zt,O,Ft,Le).minus(ve).abs())<1?[Kt,k]:[Zt,O],We=Pt,ne},Fe.toNumber=function(){return+V(this)},Fe.toPrecision=function(T,A){return null!=T&&y(T,1,Kt),G(this,T,A,2)},Fe.toString=function(T){var A,O=this,k=O.s,B=O.e;return null===B?k?(A="Infinity",k<0&&(A="-"+A)):A="NaN":(null==T?A=B<=Ue||B>=He?v(g(O.c),B):b(g(O.c),B,"0"):10===T?A=b(g((O=W(new H(O),Pe+B+1,Le)).c),O.e,"0"):(y(T,2,$e.length,"Base"),A=E(b(g(O.c),B,"0"),10,T,k,!0)),k<0&&O.c[0]&&(A="-"+A)),A},Fe.valueOf=Fe.toJSON=function(){return V(this)},Fe._isBigNumber=!0,null!=T&&H.set(T),H}()).default=E.BigNumber=E,T.exports?T.exports=E:(A||(A="undefined"!=typeof self&&self?self:window),A.BigNumber=E)}(this)})).BigNumber;const Le={ROUNDING_MODE:Pe.ROUND_DOWN};function M(T){return(new TextEncoder).encode(T)}function R(T){return"string"==typeof T?R(D(T)):(new TextDecoder).decode(T)}Pe.config(Le);const Ue="INVALID_ARGUMENT";function U(T,A="UNKNOWN_ERROR",E={}){let O=[];Object.keys(E).forEach((T=>{try{O.push(T+"="+JSON.stringify(E[T]))}catch(A){O.push(T+"="+JSON.stringify(E[T].toString()))}}));let k=T;O.length&&(T+=" ("+O.join(", ")+")");let B=new Error(T);return B.reason=k,B.code=A,Object.keys(E).forEach((function(T){B[T]=E[T]})),B}function D(T){if("string"!=typeof T)throw new Error("hexToBytes only accept strings, got: "+typeof T);if("0x"===T.substr(0,2))return D(T.substr(2));const A=new Uint8Array(Math.ceil(T.length/2));let E=0;for(let O=0;O<T.length;O+=2){const k=parseInt(T.substr(O,2),16);if(isNaN(k))throw new Error("Cannot read hex string:"+JSON.stringify(T));A[E]=k,E++}return A}function q(T){return Array.from(T).map((T=>T.toString(16).padStart(2,"0"))).join("")}function $(T,A){if("string"==typeof T){if(A&&"hex"===A.encoding&&"string"==typeof T){let A=T;A.length>2&&"0x"===A.substr(0,2)&&(A=A.substr(2));const E=D(A);return Ne(E)}return Ne(M(T))}return Ne(T)}let He={noether:"0",wei:"1",kwei:"1000",Kwei:"1000",babbage:"1000",femtoether:"1000",mwei:"1000000",Mwei:"1000000",lovelace:"1000000",picoether:"1000000",gwei:"1000000000",Gwei:"1000000000",shannon:"1000000000",nanoether:"1000000000",nano:"1000000000",szabo:"1000000000000",microether:"1000000000000",micro:"1000000000000",finney:"1000000000000000",milliether:"1000000000000000",milli:"1000000000000000",ether:"1000000000000000000",kether:"1000000000000000000000",grand:"1000000000000000000000",mether:"1000000000000000000000000",gether:"1000000000000000000000000000",tether:"1000000000000000000000000000000"};function H(T,A,E){return new Array(A-T.length+1).join(E||"0")+T}function G(T){return wt(T)&&T.name&&-1!==T.name.indexOf("(")?T.name:T.name+"("+J(!1,T.inputs||[]).join(",")+")"}function z(...T){const A=T.reduce(((T,A)=>T+A.length),0);var E=new Uint8Array(A);let O=0;for(let A of T)E.set(A,O),O+=A.length;return E}function J(T,A){const E=[];return A.forEach((function(A){if("object"==typeof A.components){if("tuple"!==A.type.substring(0,5))throw new Error("components found but type is not tuple; report on GitHub");var O="",k=A.type.indexOf("[");k>=0&&(O=A.type.substring(k));var B=J(T,A.components);bt(B)&&T?E.push("tuple("+B.join(",")+")"+O):T?E.push("("+B+")"):E.push("("+B.join(",")+")"+O)}else E.push(A.type)})),E}function W(T){let A=T.indexOf("("),E=T.indexOf(")");return-1!==A&&-1!==E?T.substr(0,A):T}function V(T){let A=T.indexOf("("),E=T.indexOf(")");return-1!==A&&-1!==E?T.substr(A+1,E-A-1).replace(" ",""):""}function K(T){return null==T?T:ot(T).toNumber()}function Z(T){return ot(T).toNumber()}function Y(T){return mt(T)?T.toString(10):""+T}function X(T){return"string"==typeof T&&!T.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(T)?"0x"+T:nt(T)}function Q(T){if("string"==typeof T)return T.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(T)?nt(T):"0x"+q(M(T));if(T instanceof Uint8Array)return"0x"+q(T);throw new Error(`toStringData: Error trying to convert ${T} (${typeof T}) to a hex string.`)}function tt(T){return"boolean"==typeof T?T:0!==ot(T).toNumber()}function et(T){let A=ot(T),E=A.toString(16);return A.isLessThan(0)?"-0x"+E.substr(1):"0x"+E}function nt(T){if(vt(T))return et(+T);if(mt(T))return et(T);if(yt(T)){const A=T;if(0===A.indexOf("-0x"))return et(A);if(0===A.indexOf("0x"))return A;if(!isFinite(A))return q(M(A))}if(T instanceof Uint8Array)return"0x"+q(T);if(bt(T)||wt(T))throw new Error("toHex can only be called with scalar values, not objects or arrays");return et(T)}function rt(T){let A=T?T.toLowerCase():"ether",E=He[A];if(void 0===E)throw new Error("This unit doesn't exists, please use the one of the following units"+JSON.stringify(He,null,2));return new Pe(E,10)}function ot(T){let A=T||0;return mt(A)?A:("string"==typeof A&&(A=A.trim()),"string"!=typeof A||0!==A.indexOf("0x")&&0!==A.indexOf("-0x")?A instanceof Uint8Array?new Pe(q(A),16):new Pe(A,10):new Pe(A.replace("0x","").toLowerCase(),16))}function it(T){return new Pe(new Array(T).fill("1").join(""),2)}function st(T,A=256){let E=ot(T).integerValue();return E.isLessThan(0)?it(A).plus(E).plus(1):E}function at(T,A){return"1"==H(T.toString(2),A,"0")[0]}function ct(T){if("string"!=typeof T)throw U("invalid address",Ue,{arg:"address",value:T});if(T.trim().match(/^(0x)?[0-9a-fA-F]{40}$/))return"0x"!==T.trim().substring(0,2)&&(T="0x"+T),ft(T);throw U("invalid address",Ue,{arg:"address",value:T})}function ut(T,A=256){if(at(T,A)){const E=it(A);return T.minus(E).minus(1)}return T}function lt(T){return/^0x[0-9a-f]{40}$/i.test(T)}function ht(T){return!!/^(0x)?[0-9a-f]{40}$/i.test(T)&&(!(!/^(0x)?[0-9a-f]{40}$/.test(T)&&!/^(0x)?[0-9A-F]{40}$/.test(T))||pt(T))}function pt(T){const A=T.replace("0x","");let E=$(A.toLowerCase());for(let T=0;T<40;T++)if(parseInt(E[T],16)>7&&A[T].toUpperCase()!==A[T]||parseInt(E[T],16)<=7&&A[T].toLowerCase()!==A[T])return!1;return!0}function ft(T){if(void 0===T)return"";const A=T.toLowerCase().replace("0x",""),E=$(A);let O="0x";for(let T=0;T<A.length;T++)parseInt(E[T],16)>7?O+=A[T].toUpperCase():O+=A[T];return O}function dt(T){if(!Array.isArray(T))throw new Error(`Value was not an array: ${JSON.stringify(T)}`);return T}function gt(T){return lt(T)?T:/^[0-9a-f]{40}$/.test(T)?"0x"+T:"0x"+H(nt(T).substr(2),40)}function mt(T){return T instanceof Pe}function yt(T){return"string"==typeof T||T&&T.constructor&&"String"===T.constructor.name}function wt(T){return null!==T&&!Array.isArray(T)&&"object"==typeof T}function vt(T){return"boolean"==typeof T}function bt(T){return Array.isArray(T)}var Ve,We,Ge;function Nt(A,E){if(!A)throw new Error("jsonrpc method should be specified!");if("string"!=typeof A)throw new Error(`jsonrpc must be a string, got ${typeof A}!`);return T.messageId++,{jsonrpc:"2.0",id:T.messageId,method:A,params:E||[]}}function xt(T){return Array.isArray(T)?T.every(e):e(T);function e(T){return!(!T||"error"in T||"2.0"!==T.jsonrpc||"number"!=typeof T.id||null==T.result&&void 0===T.result)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */function kt(T,A,E,O){var k,B=arguments.length,_t=B<3?A:null===O?O=Object.getOwnPropertyDescriptor(A,E):O;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_t=Reflect.decorate(T,A,E,O);else for(var Ft=T.length-1;Ft>=0;Ft--)(k=T[Ft])&&(_t=(B<3?k(_t):B>3?k(A,E,_t):k(A,E))||_t);return B>3&&_t&&Object.defineProperty(A,E,_t),_t}function Tt(T,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(T,A)}function At(T){return ot(T)}function Et(T){return void 0===T?"latest":Bt(T)}function Bt(T){return void 0===T||null==T?null:function(T){return"latest"===T||"pending"===T||"earliest"===T}(T)?T:nt(T)}function Ot(T){return T.from=T.from,T.from&&(T.from=jt(T.from)),T.to&&(T.to=jt(T.to)),void 0!==T.gasPrice&&(T.gasPrice=et(T.gasPrice)),void 0!==T.gas&&(T.gas=et(T.gas)),void 0!==T.value&&(T.value=et(T.value)),void 0!==T.nonce&&(T.nonce=et(T.nonce)),T.data&&!T.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(T.data)&&(T.data="0x"+T.data),T}function St(T){if("string"!=typeof T)throw new Error("The provided input for transactionId is not a string, got: "+JSON.stringify(T));if(0!==T.indexOf("0x"))throw new Error("TransactionID must start with 0x, got: "+JSON.stringify(T));if(66!==T.length)throw new Error("TransactionID must be a 32 byte hex, got: "+JSON.stringify(T));return T}function Ct(T){if("object"!=typeof T)throw new Error("Did not provide transaction options");if(!T.from)throw new Error('Missing "from" in transaction options');return T.from=jt(T.from),T.to&&(T.to=jt(T.to)),void 0!==T.gasPrice&&(T.gasPrice=et(T.gasPrice)),void 0!==T.gas&&(T.gas=et(T.gas)),void 0!==T.value&&(T.value=et(T.value)),void 0!==T.nonce&&(T.nonce=et(T.nonce)),T.data&&!T.data.startsWith("0x")&&/^[A-Za-z0-9]+$/.test(T.data)&&(T.data="0x"+T.data),T}function It(T){return T?(null!==T.blockNumber&&(T.blockNumber=Z(T.blockNumber)),null!==T.transactionIndex&&(T.transactionIndex=Z(T.transactionIndex)),T.nonce=Z(T.nonce),T.gas=Z(T.gas),T.gasPrice=ot(T.gasPrice),T.value=ot(T.value),T):null}function Mt(T){return T?(T.gasLimit=Z(T.gasLimit),T.gasUsed=Z(T.gasUsed),T.size=Z(T.size),T.timestamp=Z(T.timestamp),null!==T.number&&(T.number=Z(T.number)),T.difficulty=ot(T.difficulty),T.totalDifficulty=ot(T.totalDifficulty),bt(T.transactions)&&T.transactions.forEach((function(A,E){yt(A)||(T.transactions[E]=It(A)||T.transactions[E])})),T):null}function Rt(T){return T?(T.blockNumber&&(T.blockNumber=Z(T.blockNumber)),T.transactionIndex&&(T.transactionIndex=Z(T.transactionIndex)),T.logIndex&&(T.logIndex=Z(T.logIndex)),T):T}function jt(T){if(lt(T))return T;if(ht(T))return"0x"+T;throw new Error(`Invalid address: ${JSON.stringify(T)}`)}T.TransactionStatus=void 0,(Ve=T.TransactionStatus||(T.TransactionStatus={})).pending="pending",Ve.confirmed="confirmed",Ve.failed="failed",T.TransactionType=void 0,(We=T.TransactionType||(T.TransactionType={})).queued="queued",We.dropped="dropped",We.replaced="replaced",We.pending="pending",We.reverted="reverted",We.confirmed="confirmed",T.messageId=0;class qt{constructor(T){this.callName=T.callName,this.params=T.params||0,this.inputFormatter=T.inputFormatter||null,this.outputFormatter=T.outputFormatter}validateArgs(T){if(T.length!==this.params)throw A=this.callName,E=T.length,O=this.params,new Error(`Invalid number of input parameters to RPC method "${A}" given: ${E}, expected: ${O}`);var A,E,O}formatInput(T){return this.inputFormatter?this.inputFormatter.map((function(A,E){return A?A(T[E]):T[E]})):T}formatOutput(T){return null!==T?this.outputFormatter(T):null}toPayload(T){let A=this.formatInput(T);return this.validateArgs(A),{method:this.callName,params:A}}async execute(T,...A){let E=this.toPayload(A);if(!T)throw new Error("Missing RequestManager in method#exec");const O=await T.sendAsync(E);return this.formatOutput(O)}}class $t{constructor(T){this.getter=T.getter,this.outputFormatter=T.outputFormatter}formatOutput(T){return this.outputFormatter(T)}async execute(T,...A){const E=await T.sendAsync({method:this.getter,params:[]});return this.formatOutput(E)}}function Ht(T){return new Promise((A=>setTimeout(A,T)))}function Gt(A,E){const O=T.eth[E];if(!O)throw new Error(`Could not find the method/property named ${E.toString()}`);Object.defineProperty(A,E,{value:function(){return O.execute(this,...arguments)}})}T.eth=void 0,(Ge=T.eth||(T.eth={})).eth_getBalance=new qt({callName:"eth_getBalance",params:2,inputFormatter:[jt,Et],outputFormatter:At}),Ge.eth_getStorageAt=new qt({callName:"eth_getStorageAt",params:3,inputFormatter:[jt,nt,Et],outputFormatter:X}),Ge.eth_getCode=new qt({callName:"eth_getCode",params:2,inputFormatter:[jt,Et],outputFormatter:X}),Ge.eth_getBlockByHash=new qt({callName:"eth_getBlockByHash",params:2,inputFormatter:[Bt,function(T){return!!T}],outputFormatter:Mt}),Ge.eth_getBlockByNumber=new qt({callName:"eth_getBlockByNumber",params:2,inputFormatter:[Bt,function(T){return!!T}],outputFormatter:Mt}),Ge.eth_getUncleByBlockHashAndIndex=new qt({callName:"eth_getUncleByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),Ge.eth_getUncleByBlockNumberAndIndex=new qt({callName:"eth_getUncleByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:Mt}),Ge.eth_getBlockTransactionCountByHash=new qt({callName:"eth_getBlockTransactionCountByHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ge.eth_getBlockTransactionCountByNumber=new qt({callName:"eth_getBlockTransactionCountByNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ge.eth_getUncleCountByBlockHash=new qt({callName:"eth_getUncleCountByBlockHash",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ge.eth_getUncleCountByBlockNumber=new qt({callName:"eth_getUncleCountByBlockNumber",params:1,inputFormatter:[Bt],outputFormatter:Z}),Ge.eth_getTransactionByHash=new qt({callName:"eth_getTransactionByHash",params:1,inputFormatter:[St],outputFormatter:It}),Ge.eth_getTransactionByBlockHashAndIndex=new qt({callName:"eth_getTransactionByBlockHashAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),Ge.eth_getTransactionByBlockNumberAndIndex=new qt({callName:"eth_getTransactionByBlockNumberAndIndex",params:2,inputFormatter:[Bt,nt],outputFormatter:It}),Ge.eth_getTransactionReceipt=new qt({callName:"eth_getTransactionReceipt",params:1,inputFormatter:[St],outputFormatter:function(T){return T?(null!==T.blockNumber&&(T.blockNumber=Z(T.blockNumber)),null!==T.transactionIndex&&(T.transactionIndex=Z(T.transactionIndex)),T.cumulativeGasUsed=Z(T.cumulativeGasUsed),T.gasUsed=Z(T.gasUsed),T.logs&&bt(T.logs)&&(T.logs=T.logs.map((function(T){return Rt(T)}))),T.status=Z(T.status||""),T):null}}),Ge.eth_getTransactionCount=new qt({callName:"eth_getTransactionCount",params:2,inputFormatter:[jt,Et],outputFormatter:Z}),Ge.eth_sendRawTransaction=new qt({callName:"eth_sendRawTransaction",params:1,inputFormatter:[null],outputFormatter:X}),Ge.web3_sha3=new qt({callName:"web3_sha3",params:1,inputFormatter:[null],outputFormatter:X}),Ge.eth_sendTransaction=new qt({callName:"eth_sendTransaction",params:1,inputFormatter:[Ct],outputFormatter:X}),Ge.eth_sign=new qt({callName:"eth_sign",params:2,inputFormatter:[jt,null],outputFormatter:X}),Ge.eth_call=new qt({callName:"eth_call",params:2,inputFormatter:[Ot,Et],outputFormatter:X}),Ge.eth_estimateGas=new qt({callName:"eth_estimateGas",params:1,inputFormatter:[Ot],outputFormatter:Z}),Ge.eth_submitWork=new qt({callName:"eth_submitWork",params:3,inputFormatter:[null,null,null],outputFormatter:tt}),Ge.eth_getWork=new qt({callName:"eth_getWork",params:0,inputFormatter:[],outputFormatter:dt}),Ge.eth_coinbase=new $t({getter:"eth_coinbase",outputFormatter:gt}),Ge.eth_mining=new $t({getter:"eth_mining",outputFormatter:tt}),Ge.eth_hashrate=new $t({getter:"eth_hashrate",outputFormatter:Z}),Ge.eth_syncing=new $t({getter:"eth_syncing",outputFormatter:function(T){return T?(T.startingBlock=Z(T.startingBlock),T.currentBlock=Z(T.currentBlock),T.highestBlock=Z(T.highestBlock),T.knownStates&&(T.knownStates=Z(T.knownStates),T.pulledStates=Z(T.pulledStates)),T):T}}),Ge.eth_gasPrice=new $t({getter:"eth_gasPrice",outputFormatter:At}),Ge.eth_accounts=new $t({getter:"eth_accounts",outputFormatter:dt}),Ge.eth_blockNumber=new $t({getter:"eth_blockNumber",outputFormatter:Z}),Ge.eth_protocolVersion=new $t({getter:"eth_protocolVersion",outputFormatter:Z}),Ge.web3_clientVersion=new $t({getter:"web3_clientVersion",outputFormatter:Y}),Ge.net_version=new $t({getter:"net_version",outputFormatter:Y}),Ge.shh_version=new qt({callName:"shh_version",params:0,inputFormatter:[],outputFormatter:Z}),Ge.shh_post=new qt({callName:"shh_post",params:1,inputFormatter:[null],outputFormatter:tt}),Ge.personal_newAccount=new qt({callName:"personal_newAccount",params:1,inputFormatter:[null],outputFormatter:gt}),Ge.personal_importRawKey=new qt({callName:"personal_importRawKey",params:2,inputFormatter:[null,null],outputFormatter:gt}),Ge.personal_sign=new qt({callName:"personal_sign",params:3,inputFormatter:[Q,jt,null],outputFormatter:X}),Ge.personal_ecRecover=new qt({callName:"personal_ecRecover",params:2,inputFormatter:[Q,null],outputFormatter:gt}),Ge.personal_unlockAccount=new qt({callName:"personal_unlockAccount",params:3,inputFormatter:[jt,null,K],outputFormatter:tt}),Ge.personal_sendTransaction=new qt({callName:"personal_sendTransaction",params:2,inputFormatter:[Ct,null],outputFormatter:X}),Ge.personal_lockAccount=new qt({callName:"personal_lockAccount",params:1,inputFormatter:[jt],outputFormatter:tt}),Ge.personal_listAccounts=new $t({getter:"personal_listAccounts",outputFormatter:dt}),Ge.net_listening=new $t({getter:"net_listening",outputFormatter:tt}),Ge.net_peerCount=new $t({getter:"net_peerCount",outputFormatter:Z}),Ge.eth_newFilter=new qt({callName:"eth_newFilter",params:1,inputFormatter:[function(T){return T}],outputFormatter:nt}),Ge.eth_getLogs=new qt({callName:"eth_getLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Ge.eth_newBlockFilter=new qt({callName:"eth_newBlockFilter",params:0,inputFormatter:[],outputFormatter:nt}),Ge.eth_newPendingTransactionFilter=new qt({callName:"eth_newPendingTransactionFilter",params:0,inputFormatter:[],outputFormatter:nt}),Ge.eth_uninstallFilter=new qt({callName:"eth_uninstallFilter",params:1,inputFormatter:[nt],outputFormatter:tt}),Ge.eth_getFilterLogs=new qt({callName:"eth_getFilterLogs",params:1,inputFormatter:[nt],outputFormatter:dt}),Ge.eth_getFilterChanges=new qt({callName:"eth_getFilterChanges",params:1,inputFormatter:[nt],outputFormatter:dt}),Ge.eth_submitHashrate=new qt({callName:"eth_submitHashrate",params:2,inputFormatter:[null,null],outputFormatter:tt}),Ge.shh_newIdentity=new qt({callName:"shh_newIdentity",params:0,inputFormatter:[],outputFormatter:X}),Ge.shh_hasIdentity=new qt({callName:"shh_hasIdentity",params:1,inputFormatter:[null],outputFormatter:tt}),Ge.shh_newGroup=new qt({callName:"shh_newGroup",params:0,inputFormatter:[],outputFormatter:X}),Ge.shh_addToGroup=new qt({callName:"shh_addToGroup",params:1,inputFormatter:[null],outputFormatter:tt}),Ge.shh_newFilter=new qt({callName:"shh_newFilter",params:1,inputFormatter:[null],outputFormatter:nt}),Ge.shh_uninstallFilter=new qt({callName:"shh_uninstallFilter",params:1,inputFormatter:[null],outputFormatter:tt}),Ge.shh_getLogs=new qt({callName:"shh_getLogs",params:1,inputFormatter:[null],outputFormatter:dt}),Ge.shh_getFilterMessages=new qt({callName:"shh_getFilterMessages",params:1,inputFormatter:[null],outputFormatter:dt}),Ge.shh_getFilterChanges=new qt({callName:"shh_getFilterChanges",params:1,inputFormatter:[null],outputFormatter:dt}),Ge.shh_getMessages=new qt({callName:"shh_getMessages",params:1,inputFormatter:[null],outputFormatter:dt});class zt{constructor(T){this.provider=T,this.requests=new Map}async sendAsync(T){const A=await this.provider;if(!A)throw new Error("Provider not set or invalid");let E=Nt(T.method,T.params);const k=O();return this.requests.set(E.id,k),A.sendAsync(E,((T,A)=>{this.requests.delete(E.id),T?k.reject(T):xt(A)?k.resolve(A.result):k.reject(function(T){let A=T&&T.error&&T.error.message?T.error.message:"Invalid JSON RPC response: "+JSON.stringify(T);return new Error(A)}(A))})),k}setProvider(T){this.provider=T}async getConfirmedTransaction(T){const A=await this.waitForCompletion(T);if(this.isFailure(A))throw new Error(`Transaction "${T}" failed`);return A}async waitForCompletion(A,E){const O=St(A);if(await this.isTxDropped(O,E)){const A=await this.getTransactionAndReceipt(O);return Object.assign(Object.assign({},A),{status:T.TransactionStatus.failed})}for(;;){const A=await this.getTransactionAndReceipt(O);if(!this.isPending(A)&&A.receipt)return Object.assign(Object.assign({},A),{status:this.isFailure(A)?T.TransactionStatus.failed:T.TransactionStatus.confirmed});await Ht(2e3)}}async getTransaction(A){let E,O=null;const k=St(A);try{const T=(await this.eth_accounts())[0];T&&(O=await this.eth_getTransactionCount(T,"latest"))}catch(T){O=null}try{if(E=await this.eth_getTransactionByHash(k),null==E)return null}catch(T){return null}if(null==E.blockNumber){if(null!=O){if(E.nonce<O)return{hash:k,type:T.TransactionType.replaced,nonce:E.nonce};if(E.nonce>O)return{hash:k,type:T.TransactionType.queued,nonce:E.nonce}}return Object.assign({type:T.TransactionType.pending},E)}let B;try{if(B=await this.eth_getTransactionReceipt(k),null==B||0===B.status)return Object.assign({type:T.TransactionType.reverted},E)}catch(T){return null}return Object.assign(Object.assign({type:T.TransactionType.confirmed},E),{receipt:B})}async isTxDropped(T,A=15){let E=A;for(;E>0;){if(null!==await this.getTransactionAndReceipt(T))return!1;E-=1,await Ht(2e3)}return!0}async getTransactionAndReceipt(T){T=St(T);const[A,E]=await Promise.all([this.eth_getTransactionByHash(T),this.eth_getTransactionReceipt(T)]);return Object.assign(Object.assign({},A),{receipt:E})}isPending(T){return T&&null===T.blockNumber}isFailure(T){return T&&(!T.receipt||0===T.receipt.status)}}function Jt(T){return"slice"in T&&T.slice||(T.slice=function(){var A=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(T,A))}),T}function Wt(T){if(null==T)throw U("cannot convert null value to array",Ue,{arg:"value",value:T});if(T instanceof Uint8Array)return Jt(new Uint8Array(T));if("string"==typeof T){let O=T.match(/^(0x)?[0-9a-fA-F]*$/);if(!O)throw U("invalid hexidecimal string",Ue,{arg:"value",value:T});if("0x"!==O[1])throw U("hex string must have 0x prefix",Ue,{arg:"value",value:T});(T=T.substring(2)).length%2&&(T="0"+T);for(var A=[],E=0;E<T.length;E+=2)A.push(parseInt(T.substr(E,2),16));return Jt(new Uint8Array(A))}if(function(T){if(!T||parseInt(String(T.length))!=T.length||"string"==typeof T)return!1;for(var A=0;A<T.length;A++){var E=T[A];if(E<0||E>=256||parseInt(String(E))!=E)return!1}return!0}(T))return Jt(new Uint8Array(T));throw U("invalid arrayify value",void 0,{arg:"value",value:T,type:typeof T})}function Vt(T,A,E){Object.defineProperty(T,A,{enumerable:!0,value:E,writable:!1})}kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_clientVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"web3_sha3",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_peerCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"net_listening",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_protocolVersion",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_syncing",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_coinbase",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_mining",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_hashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_gasPrice",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_accounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_blockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBalance",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getStorageAt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionCount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockTransactionCountByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleCountByBlockNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getCode",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_sendRawTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_call",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_estimateGas",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getBlockByNumber",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByHash",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getTransactionReceipt",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockHashAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getUncleByBlockNumberAndIndex",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newBlockFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_newPendingTransactionFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getFilterLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getLogs",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_getWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitWork",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"eth_submitHashrate",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_post",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_version",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_hasIdentity",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_addToGroup",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_newFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_uninstallFilter",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getFilterChanges",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"shh_getMessages",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_unlockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_newAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_listAccounts",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_lockAccount",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_importRawKey",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sendTransaction",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_sign",void 0),kt([Gt,Tt("design:type",Function)],zt.prototype,"personal_ecRecover",void 0);const qe=new Pe(-1),Xe=new Pe(0),Ye=new Pe(1),$e=new Pe("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qt(T){return function(T,A){function n(A){return new Error('unexpected character "'+T[A]+'" at position '+A+' in "'+T+'"')}for(var E={type:"",name:"",state:{allowType:!0}},O=E,k=0;k<T.length;k++){var B=T[k];switch(B){case"(":if(!O.state.allowParams)throw n(k);O.state.allowType=!1,O.type=te(O.type),O.components=[{type:"",name:"",parent:O,state:{allowType:!0}}],O=O.components[0];break;case")":delete O.state,"indexed"===O.name&&(O.indexed=!0,O.name=""),O.type=te(O.type);var _t=O;if(!(O=O.parent))throw n(k);delete _t.parent,O.state.allowParams=!1,O.state.allowName=!0,O.state.allowArray=!0;break;case",":delete O.state,"indexed"===O.name&&(O.indexed=!0,O.name=""),O.type=te(O.type);var Ft={type:"",name:"",parent:O.parent,state:{allowType:!0}};O.parent.components.push(Ft),delete O.parent,O=Ft;break;case" ":O.state.allowType&&""!==O.type&&(O.type=te(O.type),delete O.state.allowType,O.state.allowName=!0,O.state.allowParams=!0),O.state.allowName&&""!==O.name&&("indexed"===O.name?(O.indexed=!0,O.name=""):O.state.allowName=!1);break;case"[":if(!O.state.allowArray)throw n(k);O.type+=B,O.state.allowArray=!1,O.state.allowName=!1,O.state.readArray=!0;break;case"]":if(!O.state.readArray)throw n(k);O.type+=B,O.state.readArray=!1,O.state.allowArray=!0,O.state.allowName=!0;break;default:if(O.state.allowType)O.type+=B,O.state.allowParams=!0,O.state.allowArray=!0;else if(O.state.allowName)O.name+=B,delete O.state.allowArray;else{if(!O.state.readArray)throw n(k);O.type+=B}}}if(O.parent)throw new Error("unexpected eof");return delete E.state,"indexed"===O.name&&(O.indexed=!0,O.name=""),E.type=te(E.type),E}(T)}function te(T){return T.match(/^uint($|[^1-9])/)?T="uint256"+T.substring(4):T.match(/^int($|[^1-9])/)&&(T="int256"+T.substring(3)),T}const Je=new RegExp(/^bytes([0-9]*)$/),Qe=new RegExp(/^(u?int)([0-9]*)$/),Ze=new RegExp(/^(.*)\[([0-9]*)\]$/),oe=function(T,A){var E=T.match(Qe);return E&&parseInt(E[2])<=48?A.toNumber():A};class ie{constructor(T,A,E,O="",k){this.coerceFunc=T,this.name=A,this.type=E,this.localName=O,this.dynamic=k}}class se extends ie{constructor(T){super(T.coerceFunc,T.name,T.type,void 0,T.dynamic),Vt(this,"coder",T)}encode(T){return this.coder.encode(T)}decode(T,A){return this.coder.decode(T,A)}}class ae extends ie{constructor(T,A){super(T,"null","",A,!1)}encode(T){return Wt([])}decode(T,A){if(A>T.length)throw new Error("invalid null");return{consumed:0,value:this.coerceFunc("null",void 0)}}}function ce(T,A){return new Pe(T.toString(2).substr(-A),2)}class ue extends ie{constructor(T,A,E,O){const k=(E?"int":"uint")+8*A;super(T,k,k,O,!1),this.size=A,this.signed=E}encode(T){try{let A=ot(T);if(this.signed){let T=ce($e,8*this.size-1);if(A.gt(T))throw new Error("out-of-bounds");if(T=T.plus(Ye).multipliedBy(qe),A.lt(T))throw new Error("out-of-bounds")}else if(A.lt(Xe)||A.gt(ce($e,8*this.size)))throw new Error("out-of-bounds");A=ce(st(A,8*this.size),8*this.size),this.signed&&(A=st(ut(A,8*this.size),256));let E=H(st(A).toString(16),64);if(-1!=E.indexOf("NaN"))throw U("invalid number value, NaN",Ue,{arg:this.localName,coderType:this.name,value:T,v:A,twosComplement:st(A),twosComplement16:st(A).toString(16),pad:H(st(A).toString(16),64),size:this.size});return D(E)}catch(A){throw U("invalid number value",Ue,{arg:this.localName,coderType:this.name,value:T,message:A.toString()})}}decode(T,A){if(T.length<A+32)throw U("insufficient data for "+this.name+" type",Ue,{arg:this.localName,coderType:this.name,value:nt(T.slice(A,A+32))});var E=32-this.size,O=new Pe(q(T.slice(A+E,A+32)),16);return O=this.signed?ut(O,8*this.size):ce(O,8*this.size),{consumed:32,value:this.coerceFunc(this.name,O)}}}var tn=new ue((function(T,A){return A}),32,!1,"none");class he extends ie{constructor(T,A,E){const O="bytes"+A;super(T,O,O,E,!1),this.length=A}encode(T){var A=new Uint8Array(32);try{if("string"==typeof T&&T.length%2!=0)throw new Error("hex string cannot be odd-length");let E=Wt(T);if(E.length>this.length)throw new Error("incorrect data length");A.set(E)}catch(A){throw U("invalid "+this.name+" value. Use hex strings or Uint8Array",Ue,{arg:this.localName,coderType:this.name,value:A.value||T,details:A.message})}return A}decode(T,A){if(T.length<A+32)throw U("insufficient data for "+this.name+" type",Ue,{arg:this.localName,coderType:this.name,value:nt(T.slice(A,A+32))});return{consumed:32,value:this.coerceFunc(this.name,T.slice(A,A+this.length))}}}function pe(T){var A=32*Math.ceil(T.length/32),E=new Uint8Array(A-T.length);return z(tn.encode(T.length),T,E)}function fe(T,A,E){if(T.length<A+32)throw U("insufficient data for dynamicBytes length",Ue,{arg:E,coderType:"dynamicBytes",value:nt(T.slice(A,A+32))});var O=tn.decode(T,A).value;try{O=O.toNumber()}catch(T){throw T("dynamic bytes count too large",Ue,{arg:E,coderType:"dynamicBytes",value:O.toString()})}if(T.length<A+32+O)throw U("insufficient data for dynamicBytes type",Ue,{arg:E,coderType:"dynamicBytes",value:nt(T.slice(A,A+32+O))});return{consumed:32+32*Math.ceil(O/32),value:T.slice(A+32,A+32+O)}}function de(T){return 32*Math.ceil(T/32)}function ge(T,A){if(Array.isArray(A));else{if(!A||"object"!=typeof A)throw U("invalid tuple value",Ue,{coderType:"tuple",value:A});var E=[];T.forEach((function(T){E.push(A[T.localName])})),A=E}if(T.length!==A.length)throw U("types/value length mismatch",Ue,{coderType:"tuple",value:A});var O=[];T.forEach((function(T,E){O.push({dynamic:T.dynamic,value:T.encode(A[E])})}));var k=0,B=0;O.forEach((function(T){T.dynamic?(k+=32,B+=de(T.value.length)):k+=de(T.value.length)}));var _t=0,Ft=k,Pt=new Uint8Array(k+B);return O.forEach((function(T){T.dynamic?(Pt.set(tn.encode(Ft),_t),_t+=32,Pt.set(T.value,Ft),Ft+=de(T.value.length)):(Pt.set(T.value,_t),_t+=de(T.value.length))})),Pt}class me extends Array{}class ye extends ie{constructor(T,A,E,O){super(T,"array",A.type+"["+(E>=0?E:"")+"]",O,-1===E||A.dynamic),this.coder=A,this.length=E}encode(T){if(!Array.isArray(T))throw U("expected array value",Ue,{arg:this.localName,coderType:"array",value:T});var A=this.length,E=new Uint8Array(0);-1===A&&(A=T.length,E=tn.encode(A)),function(T,A,E){if(E||(E=""),T<A)throw U("missing argument"+E,"MISSING_ARGUMENT",{count:T,expectedCount:A});if(T>A)throw U("too many arguments"+E,"UNEXPECTED_ARGUMENT",{count:T,expectedCount:A})}(A,T.length,"in coder array"+(this.localName?" "+this.localName:""));for(var O=[],k=0;k<T.length;k++)O.push(this.coder);return z(E,ge(O,T))}decode(T,A){var E=0,O=this.length;if(-1===O){try{var k=tn.decode(T,A)}catch(T){throw T("insufficient data for dynamic array length",Ue,{arg:this.localName,coderType:"array",value:T.value})}try{O=k.value.toNumber()}catch(T){throw T("array count too large",Ue,{arg:this.localName,coderType:"array",value:k.value.toString()})}E+=k.consumed,A+=k.consumed}for(var B=[],_t=0;_t<O;_t++)B.push(new se(this.coder));var Ft=function(T,A,E){var O=E,k=0,B=[];return T.forEach((function(T){if(T.dynamic){var _t=tn.decode(A,E);(Ft=T.decode(A,O+_t.value.toNumber())).consumed=_t.consumed}else var Ft=T.decode(A,E);null!=Ft.value&&B.push(Ft.value),E+=Ft.consumed,k+=Ft.consumed})),{value:B,consumed:k}}(B,T,A);return Ft.consumed+=E,Ft.value=this.coerceFunc(this.type,Ft.value),Ft}}class we extends ie{constructor(T,A,E){var O=!1,k=[];A.forEach((function(T){T.dynamic&&(O=!0),k.push(T.type)})),super(T,"tuple","tuple("+k.join(",")+")",E,O),this.coders=A}encode(T){return ge(this.coders,T)}decode(T,A){var E=function(T,A,E){var O=E,k=0,B=new me;return T.forEach((function(T){if(T.dynamic){var _t=tn.decode(A,E);(Ft=T.decode(A,O+_t.value.toNumber())).consumed=_t.consumed}else var Ft=T.decode(A,E);null!=Ft.value&&B.push(Ft.value),E+=Ft.consumed,k+=Ft.consumed})),T.forEach((function(T,A){let E=T.localName;E&&("length"===E&&(E="_length"),null==B[E]&&(B[E]=B[A]))})),{value:B,consumed:k}}(this.coders,T,A);return E.value=this.coerceFunc(this.type,E.value),E}}const nn={address:class extends ie{constructor(T,A){super(T,"address","address",A,!1)}encode(T){let A=new Uint8Array(32);const E=T.trim();if(!ht(E))throw U("invalid address format",Ue,{arg:this.localName,coderType:"address",value:T});try{A.set(D(jt(E)),12)}catch(A){throw U(`invalid address (${A.message})`,Ue,{arg:this.localName,coderType:"address",value:T})}return A}decode(T,A){if(T.length<A+32)throw U("insufficuent data for address type",Ue,{arg:this.localName,coderType:"address",value:nt(T.slice(A,A+32)),missingBytes:A+32-T.length});return{consumed:32,value:this.coerceFunc("address",ct(nt(T.slice(A+12,A+32))))}}},bool:class extends ie{constructor(T,A){super(T,"bool","bool",A,!1)}encode(T){return tn.encode(T?1:0)}decode(T,A){try{var E=tn.decode(T,A)}catch(T){if("insufficient data for uint256 type"===T.reason)throw U("insufficient data for boolean type",Ue,{arg:this.localName,coderType:"boolean",value:T.value});throw T}return{consumed:E.consumed,value:this.coerceFunc("bool",!E.value.isZero())}}},string:class extends ie{constructor(T,A){super(T,"string","string",A,!0)}encode(T){if("string"!=typeof T)throw U("invalid string value",Ue,{arg:this.localName,coderType:"string",value:T});return pe(M(T))}decode(T,A){var E=fe(T,A,this.localName);return E.value=this.coerceFunc("string",R(E.value)),E}},bytes:class extends ie{constructor(T,A){super(T,"bytes","bytes",A,!0)}encode(T){try{return pe(Wt(T))}catch(T){throw T("invalid bytes value",Ue,{arg:this.localName,coderType:"bytes",value:T.value})}}decode(T,A){var E=fe(T,A,this.localName);return E.value=this.coerceFunc("bytes",E.value),E}},function:class extends he{constructor(T,A){super(T,24,A)}}};function be(T,A){var E,O=nn[A.type];if(O)return new O(T,A.name);if(E=A.type.match(Qe)){let O=parseInt(E[2]||"256");if(0===O||O>256||O%8!=0)throw U("invalid "+E[1]+" bit length",Ue,{arg:"param",value:A});return new ue(T,O/8,"int"===E[1],A.name)}if(E=A.type.match(Je)){let O=parseInt(E[1]);if(0===O||O>32)throw U("invalid bytes length",Ue,{arg:"param",value:A});return new he(T,O,A.name)}if(E=A.type.match(Ze)){const O=Object.assign({},A);let k=parseInt(E[2]||"-1");return O.type=E[1],new ye(T,be(T,O),k,A.name)}if("tuple"===A.type.substring(0,5))return function(T,A,E){A||(A=[]);var O=A.map((A=>be(T,A)));return new we(T,O,E)}(T,A.components,A.name);if(""===A.type)return new ae(T,A.name);throw U("invalid type",Ue,{arg:"type",value:A.type,fullType:A})}class _e{constructor(T){!function(T,A){if(!(T instanceof A))throw U("missing new","MISSING_NEW",{name:A.name})}(this,_e),T||(T=oe),Vt(this,"coerceFunc",T)}encode(T,A){if(T.length!==A.length)throw U("types/values length mismatch",Ue,{count:{types:T.length,values:A.length},value:{types:T,values:A}});const E=T.map((T=>"string"==typeof T?Qt(T):T)).map((T=>be(this.coerceFunc,T)));return new we(this.coerceFunc,E,"_").encode(A)}decode(T,A){const E=T.map((T=>"string"==typeof T?Qt(T):T)).map((T=>be(this.coerceFunc,T)));return new we(this.coerceFunc,E,"_").decode(A,0).value}}const on=new _e;var rn;!function(T){T.encodeParams=function(T,A){return q(on.encode(T,A))},T.decodeParams=function(T,A){if(T.length>0&&(!A||"0x"===A||"0X"===A))throw new Error("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return on.decode(T,D("0x"+A.replace(/0x/i,"")))}}(rn||(rn={}));class xe{constructor(T){this.json=T,this._inputTypes=T.inputs||[],this._outputTypes=T.outputs||[],this._constant=!!T.constant,this._payable=!!T.payable||"payable"===T.stateMutability,this.needsToBeTransaction=this._payable||"constant"in T&&!T.constant||"nonpayable"===T.stateMutability,this._name=G(T)}extractDefaultBlock(T){return T.length>this._inputTypes.length&&!wt(T[T.length-1])&&Et(T.pop())||"latest"}validateArgs(T){if(T.some((T=>void 0===T)))throw new Error("Invalid call, some arguments are undefined");let A=T.filter((function(T){return!(!0===wt(T)&&!1===bt(T)&&!1===mt(T)&&!(T instanceof Uint8Array))}));if(A.length!==this._inputTypes.length)throw E=A.length,O=this._inputTypes.length,new Error(`Invalid number of arguments to Solidity function. given: ${E}, expected: ${O}`);var E,O}toPayload(T){let A={to:void 0,data:void 0,value:void 0,from:void 0};T.length>this._inputTypes.length&&wt(T[T.length-1])&&(A=T.pop()),this.validateArgs(T);const E=this.signature();let O=rn.encodeParams(this._inputTypes,T);return 0==O.indexOf("0x")&&(O=O.substr(2)),A.data="0x"+E+O,A}signature(){return $(this._name).slice(0,8)}unpackOutput(T){if(!T)return;const A=T.length>=2?T.slice(2):T;let E=rn.decodeParams(this._outputTypes,A);return 1===E.length?E[0]:E}async execute(T,A,...E){if(!T)throw new Error(`Cannot call function ${this.displayName()} because there is no requestManager`);if(this.needsToBeTransaction){const O=this.toPayload(E);if(O.to=A,O.value>0&&!this._payable)throw new Error("Cannot send value to non-payable function");if(!O.from)throw new Error('Missing "from" in transaction options');return await T.eth_sendTransaction(O)}{const O=this.extractDefaultBlock(E),k=this.toPayload(E);k.to=A;const B=await T.eth_call(k,O);return this.unpackOutput(B)}}estimateGas(T,A,...E){if(!(T instanceof zt))throw new Error("estimateGas needs to receive a RequestManager as first argument");let O=this.toPayload(E);return O.to=A,T.eth_estimateGas(O)}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}attachToContract(T){let A=this.displayName();const E=Object.assign(((...A)=>this.execute(T.requestManager,T.address,...A)),{estimateGas:this.estimateGas.bind(this,T.requestManager,T.address),toPayload:(...T)=>this.toPayload(T)});T[A]||(T[A]=E),T[A][this.typeName()]=E}}function ke(T){if(null==T)return null;const A=String(T).toString();return 0===A.indexOf("0x")?A:q(M(A))}class Te{constructor(T){this.requestManager=T,this.isStarted=!1,this.isDisposed=!1,this.formatter=T=>T,this.filterId=O(),this.callbacks=[],this.stopSemaphore=O()}async watch(T){if(this.isDisposed)throw new Error("The filter was disposed");T&&(this.callbacks.push(T),this.isStarted||await this.start())}async start(){if(this.isDisposed)throw new Error("The filter was disposed");if(!this.isStarted){this.isStarted=!0;try{const T=await this.getNewFilter();if(!T)throw new Error("Could not create a filter, response: "+JSON.stringify(T));this.filterId.resolve(T)}catch(T){throw T}this.stopSemaphore=O(),await this.poll()}}async stop(){if(!this.isStarted)return;if(this.isDisposed)return;this.isDisposed=!0;const T=await this.filterId;if(this.isStarted=!1,this.stopSemaphore&&await this.stopSemaphore,!0!==await this.uninstall())throw new Error(`Couldn't stop the eth filter: ${T}`)}async poll(){if(this.isStarted){if(this.callbacks.length){const T=await this.getChanges();this.callbacks.forEach((A=>{this.formatter?T.forEach((T=>{A(this.formatter(T))})):T.forEach((T=>A(T)))}))}this.stopSemaphore.resolve(1),this.isStarted&&(this.stopSemaphore=O(),setTimeout((T=()=>this.poll(),function(){T().catch((T=>console.error(T)))}),500))}else this.stopSemaphore.resolve(1);var T}}class Ae extends Te{constructor(T,A,E=(T=>T)){super(T),this.requestManager=T,this.options=A,this.formatter=E,this.options=this.options||{},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(T){return ke(T)})),this.options={topics:this.options.topics,address:this.options.address?this.options.address:void 0,fromBlock:"number"==typeof this.options.fromBlock||"string"==typeof this.options.fromBlock?Bt(this.options.fromBlock)||void 0:"latest",toBlock:"number"==typeof this.options.toBlock||"string"==typeof this.options.toBlock?Bt(this.options.toBlock)||void 0:"latest"}}async getLogs(){this.isStarted||await this.start();const T=await this.filterId;return this.requestManager.eth_getFilterLogs(T)}async getNewFilter(){return this.requestManager.eth_newFilter(this.options)}async getChanges(){const T=await this.filterId;return this.requestManager.eth_getFilterChanges(T)}async uninstall(){const T=await this.filterId;return this.requestManager.eth_uninstallFilter(T)}}class Ee{constructor(T,A,E){this.requestManager=T,this.address=E,this._anonymous=!1,this._params=A.inputs||[],this._name=G(A),this._anonymous=A.anonymous||!1}types(T){return this._params.filter((function(A){return A.indexed===T}))}displayName(){return W(this._name)}typeName(){return V(this._name)||"void"}signature(){return $(this._name)}encode(T={},A={}){let E={topics:[],address:this.address};void 0!==A.fromBlock&&(E.fromBlock=Bt(A.fromBlock)||void 0),void 0!==A.toBlock&&(E.toBlock=Bt(A.toBlock)||void 0),E.topics=E.topics||[],this._anonymous||E.topics.push("0x"+this.signature());let O=this._params.filter((function(T){return!0===T.indexed})).map((function(A){let E=T[A.name];return null==E?null:bt(E)?E.map((function(T){return"0x"+rn.encodeParams([A],[T])})):"0x"+rn.encodeParams([A],[E])}));return E.topics=E.topics.concat(O),E}decode(T){T.data=T.data||"",T.topics=T.topics||[];let A=(this._anonymous?T.topics:T.topics.slice(1)).map((function(T){return T.slice(2)})).join(""),E=rn.decodeParams(this.types(!0),A),O=T.data.slice(2),k=rn.decodeParams(this.types(!1),O);const B=this._params.reduce((function(T,A){return T[A.name]=A.indexed?E.shift():k.shift(),T}),{});return Object.assign(Object.assign({},Rt(T)),{event:this.displayName(),address:T.address,args:B})}async execute(T,A){let E=this.encode(T,A),O=this.decode.bind(this);return new Ae(this.requestManager,E,O)}attachToContract(T){let A=this.execute.bind(this),E=this.displayName();T.events[E]||(T.events[E]=A),T.events[E][this.typeName()]=this.execute.bind(this,T)}}class Be{constructor(T,A,E){this._requestManager=T,this._json=A,this._address=E}encode(T={}){let A={address:this._address};return void 0!==T.fromBlock&&(A.fromBlock=Bt(T.fromBlock)||void 0),void 0!==T.toBlock&&(A.toBlock=Bt(T.toBlock)||void 0),A}decode(T){T.data=T.data||"";let A=bt(T.topics)&&yt(T.topics[0])?T.topics[0].slice(2):"",E=this._json.filter((function(T){return A===$(G(T))}))[0];return E?new Ee(this._requestManager,E,this._address).decode(T):Rt(T)}async execute(T){let A=this.encode(T),E=this.decode.bind(this);return new Ae(this._requestManager,A,E)}getAllEventsFunction(){return this.execute.bind(this)}}class Oe{constructor(T,A,E){var O;this.requestManager=T,this.abi=A,this.address=E,this.events={},this.transactionHash=null,this.address=E,this.abi=A,(O=this).abi.filter((function(T){return"function"===T.type})).map((function(T){return new xe(T)})).forEach((function(T){T.attachToContract(O)})),this.allEvents=function(T){let A=T.abi.filter((function(T){return"event"===T.type})),E=new Be(T.requestManager,A,T.address);return A.map((function(A){return new Ee(T.requestManager,A,T.address)})).forEach((function(A){A.attachToContract(T)})),E.getAllEventsFunction()}(this)}}T.AbstractFilter=Te,T.BigNumber=Pe,T.Contract=Oe,T.ContractFactory=class{constructor(T,A){this.requestManager=T,this.abi=A}async deploy(...T){let A,E=T[T.length-1];if(wt(E)&&!bt(E)&&(A=T.pop()),!A)throw new Error("Missing options object");if(!A.data||"string"!=typeof A.data)throw new Error("Invalid options.data");if(Z(A.value)>0&&!(this.abi.filter((function(A){return"constructor"===A.type&&A.inputs.length===T.length}))[0]||{}).payable)throw new Error("Cannot send value to non-payable constructor");let k=(B=this.abi,_t=T,B.filter((function(T){return"constructor"===T.type&&T.inputs&&T.inputs.length===_t.length})).map((function(T){return T.inputs||[]})).map((function(T){return rn.encodeParams(T,_t)}))[0]||"");var B,_t;A.data+=k,A.gas||(A.gas=await this.requestManager.eth_estimateGas(A));const Ft=await this.requestManager.eth_sendTransaction(A);if(!Ft)throw new Error("Error while sending contract creation transaction. A TxHash was not retrieved");const Pt=await async function(T,A){const E=O();let k=0;const o=()=>{k++,k>50?E.reject(new Error("Contract transaction couldn't be found after 50 blocks")):T.eth_getTransactionReceipt(A).then((T=>{T&&T.blockHash?E.resolve(T):setTimeout(o,1e3)}),(T=>E.reject(T)))};o();const B=await E,_t=await T.eth_getCode(B.contractAddress,"latest");if(_t&&_t.length>3)return B.contractAddress;throw Object.assign(new Error("The contract code couldn't be stored, please check your gas amount."),{response:_t,receipt:B})}(this.requestManager,Ft),Lt=await this.at(Pt);return Lt.transactionHash=Ft,Lt}async at(T){if(!ht(T))throw new TypeError(`Invalid address ${JSON.stringify(T)}`);return new Oe(this.requestManager,this.abi,T)}},T.EthBlockFilter=class extends Ae{constructor(T){super(T,{})}async getNewFilter(){return this.requestManager.eth_newBlockFilter()}},T.EthFilter=Ae,T.EthPendingTransactionFilter=class extends Ae{constructor(T){super(T,{})}async getNewFilter(){return this.requestManager.eth_newPendingTransactionFilter()}},T.HTTPProvider=class{constructor(T,A={}){this.host=T,this.options=A,this.debug=!1,this.host=T||"http://localhost:8545"}send(){throw new Error("Sync requests are deprecated")}sendAsync(T,A){try{let E=null;if(E=T instanceof Array?T.map((T=>e(T))):e(T),"undefined"==typeof fetch)throw new Error("There is no global fetch object. Please install and import isomorphic-fetch");const O={body:JSON.stringify(E),method:"POST",headers:Object.assign(Object.assign({},this.options.headers),{"Content-Type":"application/json"})};this.debug&&console.log("SEND >> "+O.body),fetch(this.host,O).then((async T=>{if(T.ok){const E=await T.json();this.debug&&console.log("RECV << "+JSON.stringify(E)),E.error?A(Object.assign(new Error(E.error.json||E.error),E.error)):A(null,E)}else this.debug&&console.log("ERR << "+JSON.stringify(T)),A(new Error("External error. response code: "+T.status))}),(T=>{this.debug&&console.log("ERR << "+JSON.stringify(T)),A(T)}))}catch(T){this.debug&&console.log("ERR << "+JSON.stringify(T)),A(T)}}},T.Method=qt,T.Property=$t,T.RequestManager=zt,T.SHHFilter=class extends Te{constructor(T,A){super(T),this.requestManager=T,this.options=A,this.options=this.options||{topics:[]},this.options.topics=this.options.topics||[],this.options.topics=this.options.topics.map((function(T){return ke(T)})),this.options={topics:this.options.topics,to:this.options.to}}async getMessages(){const T=await this.filterId;return this.requestManager.shh_getMessages(T)}async getNewFilter(){return this.requestManager.shh_newFilter(this.options)}async getChanges(){const T=await this.filterId;return this.requestManager.shh_getFilterChanges(T)}async uninstall(){const T=await this.filterId;return this.requestManager.shh_uninstallFilter(T)}},T.SolidityEvent=Ee,T.SolidityFunction=xe,T.WebSocketProvider=class{constructor(T,A={}){this.url=T,this.options=A,this.isDisposed=!1,this.responseCallbacks=new Map,this.notificationCallbacks=new Set,this.debug=!1,this.lastChunk="",this.connect()}dispose(){this.isDisposed=!0;const T=this.connection;this.timeout(new Error("Provider disposed.")),T.then((T=>T.close()))}send(){throw new Error("Sync requests are deprecated")}sendAsync(T,A){const E=[];let k;if(T instanceof Array)k=Promise.all(T.map((T=>{const A=O();try{const O=e(T);E.push(O),this.responseCallbacks.set(O.id,A)}catch(T){A.reject(T)}return A})));else{const A=O();try{const O=e(T);E.push(O),this.responseCallbacks.set(O.id,A)}catch(T){A.reject(T)}k=A}k.then((T=>A(null,T)),(T=>A(T))),this.connection.then((T=>{E.forEach((A=>{const E=JSON.stringify(A);this.debug&&console.log("SEND >> "+E),T.send(E)}))}),(T=>{A(T)}))}parseResponse(T){let A=[];return T.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((T=>{let E=T;this.lastChunk&&(E=this.lastChunk+E);let O=null;try{O=JSON.parse(E)}catch(T){return this.lastChunk=E,clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.timeout()}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk="",O&&A.push(O)})),A}processMessage(T){if("id"in T){const A=T.id,E=this.responseCallbacks.get(A);if(!E)return void console.error("Error: Received a response for an unknown request",T);this.responseCallbacks.delete(A),"error"in T?E.reject(Object.assign(new Error(T.error.message||T.error),T.error)):"result"in T&&E.resolve(T)}else this.notificationCallbacks.forEach((A=>A(null,T)))}timeout(T){this.connection&&this.connection.isPending||(this.connection=O());const A=T||new Error("Connection timeout");this.responseCallbacks.forEach((T=>T.reject(A))),this.responseCallbacks.clear(),this.isDisposed||this.connect()}connect(){this.connection&&!this.connection.isPending&&this.connection.then((T=>T.close())),this.connection&&this.connection.isPending||(this.connection=O()),this.lastChunk="";let T=this.options.WebSocketConstructor||("undefined"!=typeof WebSocket?WebSocket:void 0);if(!T)throw new Error("Please provide a WebSocketConstructor");const A=new T(this.url,this.options.protocol);A.onopen=()=>{this.connection.resolve(A)},A.onerror=T=>{const A=new Error("Error in web socket");A.data=T,this.timeout(A)},A.onclose=T=>{this.timeout(new Error(`Connection closed (${T&&T.reason||"Unknown reason"})`))},A.onmessage=T=>{let A="string"==typeof T.data?T.data:"";this.debug&&console.log("RECV << "+T.data),this.parseResponse(A).forEach((T=>{T instanceof Array?T.forEach((T=>this.processMessage(T))):this.processMessage(T)}))}}},T.bytesToHex=q,T.bytesToUtf8String=R,T.concatBytes=z,T.default=zt,T.extractDisplayName=W,T.extractTypeName=V,T.fromAscii=function(T,A=0){let E="";for(let A=0;A<T.length;A++){let O=T.charCodeAt(A).toString(16);E+=O.length<2?"0"+O:O}return"0x"+E.padEnd(A,"0")},T.fromDecimal=et,T.fromTwosComplement=ut,T.fromWei=function(T,A){let E=ot(T).dividedBy(rt(A));return mt(T)?E:E.toString(10)},T.getAddress=ct,T.getValueOfUnit=rt,T.hexToBytes=D,T.isAddress=ht,T.isArray=bt,T.isBigNumber=mt,T.isBloom=function(T){return!!/^(0x)?[0-9a-f]{512}$/i.test(T)&&!!/^(0x)?[0-9a-f]{512}$/i.test(T)},T.isBoolean=vt,T.isChecksumAddress=pt,T.isFunction=function(T){return"function"==typeof T},T.isHex=function(T){return"string"==typeof T&&/^0x[0-9a-fA-F]+$/.test(T)},T.isJson=function(T){try{return!!JSON.parse(T)}catch(T){return!1}},T.isObject=wt,T.isStrictAddress=lt,T.isString=yt,T.isTopic=function(T){return!!/^(0x)?[0-9a-f]{64}$/i.test(T)&&!!/^(0x)?[0-9a-f]{64}$/i.test(T)},T.isValidResponse=xt,T.padLeft=H,T.padRight=function(T,A,E){return T+new Array(A-T.length+1).join(E||"0")},T.sha3=$,T.signedIsNegative=at,T.stringToUtf8Bytes=M,T.toAddress=gt,T.toArray=dt,T.toAscii=function(T){let A="",E=0,O=T.length;for("0x"===T.substring(0,2)&&(E=2);E<O;E+=2){let O=parseInt(T.substr(E,2),16);A+=String.fromCharCode(O)}return A},T.toBatchPayload=function(T){return T.map((function(T){return Nt(T.method,T.params)}))},T.toBigNumber=ot,T.toBoolean=tt,T.toChecksumAddress=ft,T.toData=X,T.toDecimal=Z,T.toHex=nt,T.toJsonRpcRequest=Nt,T.toNullDecimal=K,T.toString=Y,T.toStringData=Q,T.toTwosComplement=st,T.toWei=function(T,A){let E=ot(T).times(rt(A));return mt(T)?E:E.toString(10)},T.transformToFullName=G,Object.defineProperty(T,"__esModule",{value:!0})}));var __awaiter=this&&this.__awaiter||function(T,A,E,O){return new(E||(E=Promise))((function(k,B){function fulfilled(T){try{step(O.next(T))}catch(T){B(T)}}function rejected(T){try{step(O.throw(T))}catch(T){B(T)}}function step(T){var A;T.done?k(T.value):(A=T.value,A instanceof E?A:new E((function(T){T(A)}))).then(fulfilled,rejected)}step((O=O.apply(T,A||[])).next())}))},__generator=this&&this.__generator||function(T,A){var E,O,k,B,_t={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return B={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B;function verb(B){return function(Ft){return function(B){if(E)throw new TypeError("Generator is already executing.");for(;_t;)try{if(E=1,O&&(k=2&B[0]?O.return:B[0]?O.throw||((k=O.return)&&k.call(O),0):O.next)&&!(k=k.call(O,B[1])).done)return k;switch(O=0,k&&(B=[2&B[0],k.value]),B[0]){case 0:case 1:k=B;break;case 4:return _t.label++,{value:B[1],done:!1};case 5:_t.label++,O=B[1],B=[0];continue;case 7:B=_t.ops.pop(),_t.trys.pop();continue;default:if(!((k=(k=_t.trys).length>0&&k[k.length-1])||6!==B[0]&&2!==B[0])){_t=0;continue}if(3===B[0]&&(!k||B[1]>k[0]&&B[1]<k[3])){_t.label=B[1];break}if(6===B[0]&&_t.label<k[1]){_t.label=k[1],k=B;break}if(k&&_t.label<k[2]){_t.label=k[2],_t.ops.push(B);break}k[2]&&_t.ops.pop(),_t.trys.pop();continue}B=A.call(T,_t)}catch(T){B=[6,T],O=0}finally{E=k=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}([B,Ft])}}};define("abi/LockerABI",["require","exports"],(function(T,A){Object.defineProperty(A,"__esModule",{value:!0}),A.LockerABI=void 0,A.LockerABI=[{inputs:[],stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getContractBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"wallet",type:"address"}],name:"getEthBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSenderAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSenderEthBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"metadataCID",type:"string"}],name:"mintToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"numOfEther",type:"uint256"}],name:"sendToContract",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw",outputs:[{internalType:"bool",name:"sucess",type:"bool"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]})),define("src/game",["require","exports","@dcl/ui-scene-utils","@decentraland/EthereumController"],(function(T,A,E,O){Object.defineProperty(A,"__esModule",{value:!0});var k=new Entity("_scene");engine.addEntity(k);var B=new Transform({position:new Vector3(0,0,0),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)});k.addComponentOrReplace(B);var _t=new Entity("entity");engine.addEntity(_t),_t.setParent(k);var Ft=new GLTFShape("62b9b3e0-f0d9-4693-b8ee-fee3c20ca29c/FloorBasePebbles_01/FloorBasePebbles_01.glb");Ft.withCollisions=!0,Ft.isPointerBlocker=!0,Ft.visible=!0,_t.addComponentOrReplace(Ft);var Pt=new Transform({position:new Vector3(8,0,8),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)});_t.addComponentOrReplace(Pt);var Lt=new Entity("entity2");engine.addEntity(Lt),Lt.setParent(k),Lt.addComponentOrReplace(Ft);var Ut=new Transform({position:new Vector3(24,0,8),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)});Lt.addComponentOrReplace(Ut);var Yt=new Entity("entity3");engine.addEntity(Yt),Yt.setParent(k),Yt.addComponentOrReplace(Ft);var Zt=new Transform({position:new Vector3(8,0,24),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)});Yt.addComponentOrReplace(Zt);var Kt=new Entity("entity4");engine.addEntity(Kt),Kt.setParent(k),Kt.addComponentOrReplace(Ft);var ee=new Transform({position:new Vector3(24,0,24),rotation:new Quaternion(0,0,0,1),scale:new Vector3(1,1,1)});Kt.addComponentOrReplace(ee),executeTask((function(){return __awaiter(void 0,void 0,void 0,(function(){var T,A;return __generator(this,(function(k){switch(k.label){case 0:return k.trys.push([0,2,,3]),[4,(0,O.getUserAccount)()];case 1:return T=k.sent(),log("user address: "+T),new E.CornerLabel("In Testing: "+T,-100),[3,3];case 2:return A=k.sent(),log("executeTask error: "+A.toString()),[3,3];case 3:return[2]}}))}))}))}));